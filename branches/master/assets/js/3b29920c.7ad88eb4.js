"use strict";(self.webpackChunkrspamd_docs=self.webpackChunkrspamd_docs||[]).push([[661],{28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>t});var r=n(96540);const i={},a=r.createContext(i);function l(e){const s=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(a.Provider,{value:s},e.children)}},40434:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"getting-started/first-setup","title":"First Success Setup","description":"This guide gets you from a fresh Rspamd installation to working spam filtering in 30 minutes or less. We\'ll focus on the essential configuration needed to start filtering spam effectively.","source":"@site/docs/getting-started/first-setup.md","sourceDirName":"getting-started","slug":"/getting-started/first-setup","permalink":"/docs.rspamd.com/branches/master/getting-started/first-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/rspamd/docs.rspamd.com/edit/master/docs/getting-started/first-setup.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"First Success Setup","sidebar_position":3},"sidebar":"docs","previous":{"title":"Installation Guide","permalink":"/docs.rspamd.com/branches/master/getting-started/installation"},"next":{"title":"Configuration Fundamentals","permalink":"/docs.rspamd.com/branches/master/guides/configuration/fundamentals"}}');var i=n(74848),a=n(28453);const l={title:"First Success Setup",sidebar_position:3},t="First Success Setup",o={},c=[{value:"Prerequisites Checklist",id:"prerequisites-checklist",level:2},{value:"Step 1: Essential Configuration (10 minutes)",id:"step-1-essential-configuration-10-minutes",level:2},{value:"Set Spam Filtering Thresholds",id:"set-spam-filtering-thresholds",level:3},{value:"Connect to Redis",id:"connect-to-redis",level:3},{value:"Set Web Interface Password",id:"set-web-interface-password",level:3},{value:"Validate Configuration Syntax",id:"validate-configuration-syntax",level:3},{value:"Restart Rspamd",id:"restart-rspamd",level:3},{value:"Step 2: Test Basic Functionality (5 minutes)",id:"step-2-test-basic-functionality-5-minutes",level:2},{value:"Test Message Scanning",id:"test-message-scanning",level:3},{value:"Access Web Interface",id:"access-web-interface",level:3},{value:"Verify Redis Connection",id:"verify-redis-connection",level:3},{value:"Step 3: Mail Server Integration (15 minutes)",id:"step-3-mail-server-integration-15-minutes",level:2},{value:"For Postfix (Most Common)",id:"for-postfix-most-common",level:3},{value:"For Other MTAs",id:"for-other-mtas",level:3},{value:"Step 4: Verify End-to-End Functionality (5 minutes)",id:"step-4-verify-end-to-end-functionality-5-minutes",level:2},{value:"Send Test Messages",id:"send-test-messages",level:3},{value:"Check Processing in Web Interface",id:"check-processing-in-web-interface",level:3},{value:"Step 5: Fine-tune for Your Environment (5 minutes)",id:"step-5-fine-tune-for-your-environment-5-minutes",level:2},{value:"Adjust Thresholds Based on Initial Testing",id:"adjust-thresholds-based-on-initial-testing",level:3},{value:"Enable Bayesian Learning (Optional but Recommended)",id:"enable-bayesian-learning-optional-but-recommended",level:3},{value:"Quick Wins Checklist",id:"quick-wins-checklist",level:2},{value:"Common Issues and Quick Fixes",id:"common-issues-and-quick-fixes",level:2},{value:"Issue: &quot;Connection refused&quot; errors",id:"issue-connection-refused-errors",level:3},{value:"Issue: No spam headers added",id:"issue-no-spam-headers-added",level:3},{value:"Issue: All messages marked as spam",id:"issue-all-messages-marked-as-spam",level:3},{value:"Issue: Web interface won&#39;t load",id:"issue-web-interface-wont-load",level:3},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Immediate Next Steps (Same Day)",id:"immediate-next-steps-same-day",level:3},{value:"Within a Week",id:"within-a-week",level:3},{value:"Ongoing Optimization",id:"ongoing-optimization",level:3},{value:"Getting Help",id:"getting-help",level:2},{value:"Performance Tuning (Advanced)",id:"performance-tuning-advanced",level:2},{value:"Worker Count",id:"worker-count",level:3},{value:"DNS Timeout and Caching",id:"dns-timeout-and-caching",level:3},{value:"Memory Limits",id:"memory-limits",level:3},{value:"Message Size Limits",id:"message-size-limits",level:3},{value:"Security Hardening (Production Checklist)",id:"security-hardening-production-checklist",level:2},{value:"1. Restrict Web Interface Access",id:"1-restrict-web-interface-access",level:3},{value:"2. Enable HTTPS for Web Interface (Optional)",id:"2-enable-https-for-web-interface-optional",level:3},{value:"3. Rate Limiting (Prevent Abuse)",id:"3-rate-limiting-prevent-abuse",level:3},{value:"4. Monitor Log Files",id:"4-monitor-log-files",level:3},{value:"5. Regular Updates",id:"5-regular-updates",level:3},{value:"Backup and Recovery",id:"backup-and-recovery",level:2},{value:"Configuration Backup",id:"configuration-backup",level:3},{value:"Redis Data Backup",id:"redis-data-backup",level:3},{value:"Restore Configuration",id:"restore-configuration",level:3},{value:"Success Stories",id:"success-stories",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"first-success-setup",children:"First Success Setup"})}),"\n",(0,i.jsxs)(s.p,{children:["This guide gets you from a fresh Rspamd installation to working spam filtering in ",(0,i.jsx)(s.strong,{children:"30 minutes or less"}),". We'll focus on the essential configuration needed to start filtering spam effectively."]}),"\n",(0,i.jsx)(s.h2,{id:"prerequisites-checklist",children:"Prerequisites Checklist"}),"\n",(0,i.jsx)(s.p,{children:"Before starting, ensure you have:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Rspamd installed"})," - ",(0,i.jsx)(s.a,{href:"/getting-started/installation",children:"Installation guide"})," completed"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Redis running"})," - Required for statistics, caching, and Bayesian learning"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Mail server (MTA)"})," - Postfix recommended, Exim/Sendmail/Haraka also supported"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Root access"})," - To modify configuration files in ",(0,i.jsx)(s.code,{children:"/etc/rspamd/"})]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Test email accounts"})," - At least two accounts to send/receive test messages"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"DNS resolver"})," - Fast recursive resolver (not public resolvers like 8.8.8.8) for RBL lookups"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Time estimate"}),": 30 minutes for basic setup, +15 minutes for MTA integration"]}),"\n",(0,i.jsx)(s.admonition,{title:"Architecture Context",type:"info",children:(0,i.jsxs)(s.p,{children:["Rspamd uses a ",(0,i.jsx)(s.a,{href:"/developers/architecture",children:"multi-worker architecture"})," with specialized workers for different tasks. This setup configures the Normal worker (message scanning), Controller worker (web UI), and Proxy worker (milter protocol bridge to your MTA)."]})}),"\n",(0,i.jsx)(s.h2,{id:"step-1-essential-configuration-10-minutes",children:"Step 1: Essential Configuration (10 minutes)"}),"\n",(0,i.jsx)(s.h3,{id:"set-spam-filtering-thresholds",children:"Set Spam Filtering Thresholds"}),"\n",(0,i.jsx)(s.p,{children:"Create the actions configuration that determines what happens at different spam scores:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/actions.conf\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:"# Basic spam filtering thresholds\n# Adjust these based on your spam tolerance\n\nreject = 15;        # Score 15+: Reject obvious spam outright\nadd_header = 6;     # Score 6-14.9: Add spam headers, deliver to inbox/spam folder\ngreylist = 4;       # Score 4-5.9: Temporarily delay suspicious messages\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why these numbers?"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"reject = 15"}),": High threshold to avoid false positives. Messages scoring 15+ are extremely likely spam (multiple failed checks: SPF fail + DKIM fail + content spam patterns + RBL listings)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"add_header = 6"}),": Catches most spam while allowing borderline messages through. Your mail client can filter these to spam folder based on headers"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"greylist = 4"}),": Temporarily rejects with 4xx SMTP code. Legitimate MTAs will retry within minutes; spambots typically won't"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"How actions work internally:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Rspamd calculates a cumulative score from all ",(0,i.jsx)(s.a,{href:"/getting-started/understanding-rspamd#symbols-the-core-of-analysis",children:"symbols"})," (SPF, DKIM, Bayes, content rules, RBLs, etc.)"]}),"\n",(0,i.jsx)(s.li,{children:"Each action has a threshold. The action corresponding to the score range is applied"}),"\n",(0,i.jsxs)(s.li,{children:["Actions are applied via ",(0,i.jsx)(s.a,{href:"/developers/protocol#milter-protocol",children:"milter protocol"})," response to your MTA"]}),"\n",(0,i.jsxs)(s.li,{children:["Action thresholds can be overridden per-domain via ",(0,i.jsx)(s.a,{href:"/configuration/settings",children:"settings module"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"connect-to-redis",children:"Connect to Redis"}),"\n",(0,i.jsx)(s.p,{children:"Create the Redis configuration:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/redis.conf\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'# Redis connection for statistics and learning\nservers = "127.0.0.1:6379";\n\n# Optional: configure timeouts and pooling\ntimeout = 1s;\n# Optional: use Redis database number (default is 0)\n# db = "0";\n# Optional: for Redis with password\n# password = "your_redis_password";\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What Redis is used for:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Bayesian statistics"})," - Learns spam/ham patterns from your mail"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Rate limiting"})," - Tracks sender connection rates"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Greylisting"})," - Stores greylist triplets (IP, sender, recipient)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"DMARC reports"})," - Aggregates DMARC data"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Neural network training"})," - Stores neural net weights"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Fuzzy storage"})," - Can optionally use Redis as backend (in addition to dedicated fuzzy worker)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"History"})," - Recent message processing results (optional, can also use SQLite)"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Without Redis, statistical learning and rate limiting won't work. Rspamd will still scan messages using static rules (SPF, DKIM, DMARC, RBLs), but won't improve over time."}),"\n",(0,i.jsx)(s.h3,{id:"set-web-interface-password",children:"Set Web Interface Password"}),"\n",(0,i.jsx)(s.p,{children:"Generate a secure password for the web interface:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Generate password hash\nrspamadm pw\n# Enter your desired password when prompted\n# Copy the generated hash (starts with $2$...)\n"})}),"\n",(0,i.jsx)(s.p,{children:"Create the controller configuration:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/worker-controller.inc\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'# Replace with your generated password hash\npassword = "$2$your_generated_hash_here";\nbind_socket = "localhost:11334";\n\n# Optional: enable password for certain actions only\n# enable_password = "$2$another_hash";  # For dangerous operations (learn, fuzzy_add)\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Security note:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:'bind_socket = "localhost:11334"'})," ensures web interface is only accessible from the server itself"]}),"\n",(0,i.jsxs)(s.li,{children:["To access from remote browser, use SSH tunnel: ",(0,i.jsx)(s.code,{children:"ssh -L 11334:localhost:11334 user@your-server"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Never"})," bind to ",(0,i.jsx)(s.code,{children:"0.0.0.0:11334"})," without firewall rules - the web interface allows executing actions like learning spam/ham"]}),"\n",(0,i.jsxs)(s.li,{children:["Password uses bcrypt with cost factor (the ",(0,i.jsx)(s.code,{children:"$2$"})," prefix indicates bcrypt format)"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"validate-configuration-syntax",children:"Validate Configuration Syntax"}),"\n",(0,i.jsx)(s.p,{children:"Before restarting, verify your configuration is valid:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check configuration syntax\nsudo rspamadm configtest\n"})}),"\n",(0,i.jsx)(s.p,{children:"Expected output:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"syntax OK\n"})}),"\n",(0,i.jsx)(s.p,{children:"If you see errors, fix them before proceeding. Common issues:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Missing semicolons at end of lines"}),"\n",(0,i.jsxs)(s.li,{children:["Unmatched braces ",(0,i.jsx)(s.code,{children:"{}"})]}),"\n",(0,i.jsx)(s.li,{children:"Invalid parameter names"}),"\n",(0,i.jsx)(s.li,{children:"Typos in option names"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"restart-rspamd",children:"Restart Rspamd"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo systemctl restart rspamd\nsudo systemctl status rspamd\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"\u2705 Success Check"}),': Service should show "active (running)" with no errors in status']}),"\n",(0,i.jsx)(s.p,{children:"Expected output:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"\u25cf rspamd.service - rapid spam filtering system\n     Loaded: loaded (/lib/systemd/system/rspamd.service; enabled; vendor preset: enabled)\n     Active: active (running) since Mon 2024-01-15 10:30:45 UTC; 3s ago\n   Main PID: 12345 (rspamd)\n      Tasks: 5 (limit: 4915)\n     Memory: 45.2M\n     CGroup: /system.slice/rspamd.service\n             \u251c\u250012345 rspamd: main process\n             \u251c\u250012346 rspamd: rspamd_proxy process\n             \u251c\u250012347 rspamd: controller process\n             \u2514\u250012348 rspamd: normal process\n"})}),"\n",(0,i.jsx)(s.p,{children:"If the service fails to start, check logs:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo journalctl -u rspamd -n 50 --no-pager\n"})}),"\n",(0,i.jsx)(s.h2,{id:"step-2-test-basic-functionality-5-minutes",children:"Step 2: Test Basic Functionality (5 minutes)"}),"\n",(0,i.jsx)(s.h3,{id:"test-message-scanning",children:"Test Message Scanning"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Test with a sample message\necho -e "Subject: Test\\n\\nThis is a test message" | rspamc\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"Results for length: 43 bytes\nAction: no action\nSymbol: MIME_GOOD (0.10)\nSymbol: R_DKIM_NA (0.00)\nSymbol: R_SPF_NA (0.00)\nSymbol: DMARC_NA (0.00)\nSymbol: MIME_TRACE (0.00)[0:+]\nSymbol: ASN (0.00)[asn:0, ipnet:0.0.0.0/0, country:??]\nSymbol: MID_RHS_NOT_FQDN (0.50)\nSymbol: PREVIOUSLY_DELIVERED (0.00)\nSymbol: TO_DN_NONE (0.00)\nSymbol: RCVD_COUNT_ZERO (0.00)[0]\nMessage-ID: undef\nSpam: false\nScore: 0.60 / 15.00\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Understanding the output:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"Action: no action"})," - Score below all thresholds, message would be delivered"]}),"\n",(0,i.jsx)(s.li,{children:"Symbols show individual checks performed (SPF, DKIM, DMARC all N/A because this isn't a real SMTP message)"}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"Score: 0.60 / 15.00"})," - Current score vs reject threshold"]}),"\n",(0,i.jsx)(s.li,{children:"Many symbols have 0.00 score but are listed for informational purposes"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test with spam-like content:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'echo -e "Subject: FREE VIAGRA\\n\\nBUY NOW CLICK HERE WWW.SPAM.COM" | rspamc\n'})}),"\n",(0,i.jsx)(s.p,{children:"Expected higher score output:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"Action: add header\nSymbol: SUBJ_ALL_CAPS (3.00)\nSymbol: BITCOIN_ADDR (0.00)\nSymbol: R_SUSPICIOUS_URL (1.50)\nSymbol: UPPERCASE_50_75 (1.00)\nSymbol: MIME_TRACE (0.00)[0:+]\nSpam: true\nScore: 8.50 / 15.00\n"})}),"\n",(0,i.jsx)(s.h3,{id:"access-web-interface",children:"Access Web Interface"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Open your browser to ",(0,i.jsx)(s.code,{children:"http://your-server-ip:11334"})]}),"\n",(0,i.jsx)(s.li,{children:"Log in with the password you set earlier"}),"\n",(0,i.jsx)(s.li,{children:"You should see the Rspamd dashboard"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"\u2705 Success Check"}),": You can log in and see the dashboard with statistics"]}),"\n",(0,i.jsx)(s.h3,{id:"verify-redis-connection",children:"Verify Redis Connection"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check if Rspamd can connect to Redis\nrspamc stat\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected output"}),": Should show statistics including messages processed, learning data, etc."]}),"\n",(0,i.jsx)(s.p,{children:"Example output:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"Messages scanned: 0\nMessages with action reject: 0, 0.00%\nMessages with action soft reject: 0, 0.00%\nMessages with action rewrite subject: 0, 0.00%\nMessages with action add header: 0, 0.00%\nMessages with action greylist: 0, 0.00%\nMessages with action no action: 0, 0.00%\nMessages treated as spam: 0, 0.00%\nMessages treated as ham: 0, 0.00%\n\nStatfile: BAYES_SPAM type: redis; length: 0; free blocks: 0; total blocks: 0; free: 0.00%; learned: 0; users: 0; languages: 0\nStatfile: BAYES_HAM type: redis; length: 0; free blocks: 0; total blocks: 0; free: 0.00%; learned: 0; users: 0; languages: 0\nTotal learns: 0\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"If Redis connection fails:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Test Redis directly\nredis-cli ping\n# Should return: PONG\n\n# Check Redis is listening\nsudo ss -tlnp | grep 6379\n# Should show: 127.0.0.1:6379\n\n# Check Rspamd logs for Redis errors\nsudo journalctl -u rspamd | grep -i redis\n"})}),"\n",(0,i.jsx)(s.p,{children:"Common Redis connection issues:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Redis not installed or not running: ",(0,i.jsx)(s.code,{children:"sudo systemctl start redis"})]}),"\n",(0,i.jsx)(s.li,{children:"Wrong Redis port in configuration"}),"\n",(0,i.jsxs)(s.li,{children:["Redis bound to different interface (check ",(0,i.jsx)(s.code,{children:"/etc/redis/redis.conf"})," for ",(0,i.jsx)(s.code,{children:"bind"})," directive)"]}),"\n",(0,i.jsxs)(s.li,{children:["Firewall blocking localhost connections (rare, but check with ",(0,i.jsx)(s.code,{children:"sudo iptables -L"}),")"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"step-3-mail-server-integration-15-minutes",children:"Step 3: Mail Server Integration (15 minutes)"}),"\n",(0,i.jsx)(s.h3,{id:"for-postfix-most-common",children:"For Postfix (Most Common)"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Step 3a: Configure Rspamd Proxy Worker"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/worker-proxy.inc\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'# Enable milter mode for Postfix integration\nmilter = yes;\ntimeout = 120s;\nupstream "local" {\n  default = yes;\n  self_scan = yes;  # Scan locally rather than forwarding to another Rspamd instance\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What this configuration does:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"milter = yes"})," - Enables milter protocol support (Sendmail's Mail Filter API)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"timeout = 120s"})," - Maximum time to wait for message scanning (includes DNS lookups, RBL checks)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:'upstream "local"'})," - Defines where to send messages for scanning. In this case, to the local Normal worker via internal protocol"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"self_scan = yes"})," - Don't proxy to another Rspamd instance; scan on this server"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Architecture note:"}),"\nThe ",(0,i.jsx)(s.a,{href:"/workers/rspamd_proxy",children:"Proxy worker"})," acts as a bridge between your MTA (Postfix) and the Normal worker that performs actual message analysis. This separation allows:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Load balancing across multiple Normal workers"}),"\n",(0,i.jsx)(s.li,{children:"Milter protocol translation to Rspamd's native HTTP protocol"}),"\n",(0,i.jsx)(s.li,{children:"Connection pooling and buffering"}),"\n",(0,i.jsx)(s.li,{children:"Optional message mirroring to multiple backends"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Step 3b: Configure Postfix to Use Rspamd"})}),"\n",(0,i.jsxs)(s.p,{children:["Add to ",(0,i.jsx)(s.code,{children:"/etc/postfix/main.cf"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/postfix/main.cf\n"})}),"\n",(0,i.jsx)(s.p,{children:"Add these lines:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"# Rspamd spam filtering\nsmtpd_milters = inet:localhost:11332\nnon_smtpd_milters = inet:localhost:11332\nmilter_default_action = accept\nmilter_protocol = 6\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What these Postfix parameters do:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"smtpd_milters"})," - Apply milter to SMTP-received mail (incoming from other servers)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"non_smtpd_milters"})," - Apply milter to locally-submitted mail (from sendmail command, mail clients)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"milter_default_action = accept"})," - If Rspamd is unavailable, accept mail anyway (prevents mail loss during Rspamd maintenance). Change to ",(0,i.jsx)(s.code,{children:"tempfail"})," for stricter behavior"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"milter_protocol = 6"})," - Use milter protocol version 6 (supports all modern features including body modifications)"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Security consideration:"}),"\nWith ",(0,i.jsx)(s.code,{children:"milter_default_action = accept"}),", if Rspamd crashes, all mail will be accepted without filtering. Monitor Rspamd availability in production. Alternative: set to ",(0,i.jsx)(s.code,{children:"tempfail"})," to reject mail if filtering is unavailable (safer, but may cause legitimate mail delays during outages)."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Step 3c: Restart Both Services"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo systemctl restart rspamd\nsudo systemctl restart postfix\n\n# Verify both are running\nsudo systemctl status rspamd postfix\n"})}),"\n",(0,i.jsx)(s.h3,{id:"for-other-mtas",children:"For Other MTAs"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Exim"}),": See ",(0,i.jsx)(s.a,{href:"/tutorials/integration#exim",children:"Exim integration guide"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Other MTAs"}),": See ",(0,i.jsx)(s.a,{href:"/tutorials/integration",children:"general integration guide"})]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"step-4-verify-end-to-end-functionality-5-minutes",children:"Step 4: Verify End-to-End Functionality (5 minutes)"}),"\n",(0,i.jsx)(s.h3,{id:"send-test-messages",children:"Send Test Messages"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Test 1: Normal Message"}),"\nSend a regular email to one of your test accounts and verify:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Message is delivered normally"}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"X-Spam-Status"})," header is added"]}),"\n",(0,i.jsx)(s.li,{children:"Score should be low (< 4.0)"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test 2: GTUBE - Standard Spam Test Pattern"})}),"\n",(0,i.jsxs)(s.p,{children:["Rspamd includes the ",(0,i.jsx)(s.a,{href:"/other/gtube_patterns",children:"GTUBE pattern"})," (Generic Test for Unsolicited Bulk Email), similar to EICAR for antivirus:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Send GTUBE test to yourself\necho -e "Subject: GTUBE Test\\n\\nXJS*C4JDBQADN1.NSBN3*2IDNEN*GTUBE-STANDARD-ANTI-UBE-TEST-EMAIL*C.34X" | \\\n  sendmail test@yourdomain.com\n'})}),"\n",(0,i.jsx)(s.p,{children:"Expected behavior:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Should trigger ",(0,i.jsx)(s.code,{children:"GTUBE"})," symbol with very high score (typically 100+)"]}),"\n",(0,i.jsxs)(s.li,{children:["Action should be ",(0,i.jsx)(s.code,{children:"reject"})," (message blocked entirely)"]}),"\n",(0,i.jsxs)(s.li,{children:["Check MTA logs: ",(0,i.jsx)(s.code,{children:"sudo tail -f /var/log/mail.log"})," (you should see rejection)"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test 3: Real Spam-like Content"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Example spam test with multiple triggers\necho -e "Subject: FREE MONEY NOW!!!\\n\\nCLICK HERE FOR FREE MONEY VIAGRA CASINO WIN NOW!!!" | \\\n  sendmail test@yourdomain.com\n'})}),"\n",(0,i.jsx)(s.p,{children:"Expected behavior:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Message should get higher spam score (6-12 range typically)"}),"\n",(0,i.jsxs)(s.li,{children:["Should have ",(0,i.jsx)(s.code,{children:"X-Spam-Status: Yes"})," header"]}),"\n",(0,i.jsxs)(s.li,{children:["Should have ",(0,i.jsx)(s.code,{children:"X-Spam-Score"})," header with value >= 6.0"]}),"\n",(0,i.jsxs)(s.li,{children:["Action likely ",(0,i.jsx)(s.code,{children:"add header"})," (delivered but marked)"]}),"\n",(0,i.jsx)(s.li,{children:"May be delivered to spam folder depending on your mail client's filtering rules"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Check the headers:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# View full headers in your mail client or extract from mailbox\n# Example for Maildir format:\ngrep -r "X-Spam" ~/Maildir/new/\n'})}),"\n",(0,i.jsx)(s.p,{children:"Example spam headers:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"X-Spam-Status: Yes, score=8.50\nX-Spam-Score: 8.50\nX-Spam-Result: default: False [8.50 / 15.00];\n    SUBJ_ALL_CAPS(3.00)[];\n    R_SUSPICIOUS_URL(1.50)[];\n    UPPERCASE_50_75(1.00)[];\nX-Rspamd-Server: your-hostname\n"})}),"\n",(0,i.jsx)(s.h3,{id:"check-processing-in-web-interface",children:"Check Processing in Web Interface"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Go to the web interface (",(0,i.jsx)(s.a,{href:"http://your-server:11334",children:"http://your-server:11334"}),")"]}),"\n",(0,i.jsx)(s.li,{children:'Navigate to "History" tab'}),"\n",(0,i.jsx)(s.li,{children:"You should see your test messages being processed"}),"\n",(0,i.jsx)(s.li,{children:"Click on messages to see detailed analysis"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"\u2705 Success Check"}),": You can see messages being processed with appropriate spam scores"]}),"\n",(0,i.jsx)(s.h2,{id:"step-5-fine-tune-for-your-environment-5-minutes",children:"Step 5: Fine-tune for Your Environment (5 minutes)"}),"\n",(0,i.jsx)(s.h3,{id:"adjust-thresholds-based-on-initial-testing",children:"Adjust Thresholds Based on Initial Testing"}),"\n",(0,i.jsx)(s.p,{children:"Based on your test results, you might want to adjust thresholds:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/actions.conf\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Common adjustments"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Too many false positives"}),": Increase ",(0,i.jsx)(s.code,{children:"add_header"})," from 6 to 8"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Missing obvious spam"}),": Decrease ",(0,i.jsx)(s.code,{children:"add_header"})," from 6 to 4"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Greylisting causing delays"}),": Increase ",(0,i.jsx)(s.code,{children:"greylist"})," from 4 to 6"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"enable-bayesian-learning-optional-but-recommended",children:"Enable Bayesian Learning (Optional but Recommended)"}),"\n",(0,i.jsx)(s.p,{children:"Bayesian classification learns statistical patterns from spam and ham messages you explicitly train it with."}),"\n",(0,i.jsx)(s.p,{children:"Create Bayesian configuration:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/classifier-bayes.conf\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'# Enable Bayesian learning\nbackend = "redis";\nnew_schema = true;  # Use improved statistics schema (required for Redis)\nexpire = 8640000;   # 100 days (tokens older than this are expired from database)\n\n# Optional: per-user statistics\n# per_user = true;  # Learn separately for each recipient\n# per_language = true;  # Learn separately for each detected language\n\n# Optional: autolearn (automatically learn from high-confidence spam/ham)\nautolearn {\n  spam_threshold = 12.0;  # Auto-learn as spam if score >= 12\n  ham_threshold = -2.0;   # Auto-learn as ham if score <= -2\n  check_balance = true;   # Ensure balanced spam/ham learning ratio\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"How Bayesian learning works:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"You manually train Rspamd with spam and ham samples (see below)"}),"\n",(0,i.jsx)(s.li,{children:"Rspamd extracts tokens (words, patterns) and stores their spam/ham probabilities in Redis"}),"\n",(0,i.jsx)(s.li,{children:"For each new message, Rspamd calculates probability based on tokens present"}),"\n",(0,i.jsxs)(s.li,{children:["Adds ",(0,i.jsx)(s.code,{children:"BAYES_SPAM"})," or ",(0,i.jsx)(s.code,{children:"BAYES_HAM"})," symbol with corresponding score"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Training Bayesian classifier:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Learn a message as spam (from file)\nrspamc learn_spam /path/to/spam-message.eml\n\n# Learn a message as ham\nrspamc learn_ham /path/to/ham-message.eml\n\n# Learn multiple messages from directory\nfind /path/to/spam-samples/ -type f | xargs -I {} rspamc learn_spam {}\nfind /path/to/ham-samples/ -type f | xargs -I {} rspamc learn_ham {}\n\n# Check learning statistics\nrspamc stat | grep -A2 BAYES\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Best practices for training:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Train with at least 200 spam and 200 ham messages for meaningful results"}),"\n",(0,i.jsx)(s.li,{children:"Use messages representative of what you actually receive"}),"\n",(0,i.jsx)(s.li,{children:"Keep spam/ham ratio roughly balanced (within 2:1 ratio)"}),"\n",(0,i.jsx)(s.li,{children:"Retrain periodically as spam evolves"}),"\n",(0,i.jsx)(s.li,{children:"Don't train with messages that are borderline (only clear spam/ham)"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Autolearning:"}),"\nWith ",(0,i.jsx)(s.code,{children:"autolearn"})," enabled, Rspamd will automatically learn messages that score very high (definite spam) or very low (definite ham), reducing manual training burden."]}),"\n",(0,i.jsx)(s.p,{children:"Restart Rspamd:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo systemctl restart rspamd\n"})}),"\n",(0,i.jsx)(s.p,{children:"Verify Bayesian is working:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Should show BAYES_SPAM or BAYES_HAM symbols after training\necho "test message" | rspamc | grep BAYES\n'})}),"\n",(0,i.jsx)(s.h2,{id:"quick-wins-checklist",children:"Quick Wins Checklist"}),"\n",(0,i.jsx)(s.p,{children:"After completing this setup, you should have:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Working spam filtering"})," - Messages are being analyzed and scored"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Appropriate actions"})," - Spam is rejected or marked based on score"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Web interface access"})," - You can monitor and manage Rspamd"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"MTA integration"})," - Your mail server is using Rspamd for filtering"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Basic monitoring"})," - You can see message processing in the web interface"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"common-issues-and-quick-fixes",children:"Common Issues and Quick Fixes"}),"\n",(0,i.jsx)(s.h3,{id:"issue-connection-refused-errors",children:'Issue: "Connection refused" errors'}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Symptoms"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Mail server logs show: ",(0,i.jsx)(s.code,{children:"connect to localhost[127.0.0.1]:11332: Connection refused"})]}),"\n",(0,i.jsx)(s.li,{children:"Mail is not being filtered (no headers added)"}),"\n",(0,i.jsxs)(s.li,{children:["Postfix logs show: ",(0,i.jsx)(s.code,{children:"warning: milter inet:localhost:11332: can't connect"})]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Diagnosis:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check if Rspamd is running\nsudo systemctl status rspamd\n\n# Check if Rspamd is listening on correct ports\nsudo ss -tlnp | grep rspamd\n# Should show:\n# 127.0.0.1:11332 (proxy worker - milter)\n# 127.0.0.1:11333 (normal worker - scanner)\n# 127.0.0.1:11334 (controller - web UI)\n\n# Check which process is using port 11332 (if anything)\nsudo lsof -i :11332\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Possible causes and fixes:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Proxy worker not started"}),": Check ",(0,i.jsx)(s.code,{children:"/etc/rspamd/local.d/worker-proxy.inc"})," exists and has valid configuration"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo rspamadm configtest  # Validate config syntax\nsudo systemctl restart rspamd\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Port conflict"}),": Another process using port 11332"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Find conflicting process\nsudo lsof -i :11332\n# Kill it or change Rspamd's bind_socket in worker-proxy.inc\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Firewall blocking localhost"})," (rare but possible):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo iptables -L -n | grep 11332\n# If blocked, add exception for localhost\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"SELinux preventing binding"})," (RHEL/CentOS):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo ausearch -m avc -ts recent | grep rspamd\n# If SELinux denials, allow with:\nsudo setsebool -P antivirus_can_scan_system 1\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"issue-no-spam-headers-added",children:"Issue: No spam headers added"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Symptoms"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Messages are delivered but have no ",(0,i.jsx)(s.code,{children:"X-Spam-*"})," headers"]}),"\n",(0,i.jsx)(s.li,{children:"Web UI shows messages being processed"}),"\n",(0,i.jsx)(s.li,{children:"No indication to users which messages are spam"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Diagnosis:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Check if milter_headers module is enabled\nrspamc configdump milter_headers\n\n# Check if messages are actually being scanned\nrspamc stat\n# Should show non-zero "Messages scanned"\n\n# Check a recent message for Rspamd headers\n# (use your actual mail file path)\ngrep -i "X-" /var/mail/youruser | grep -i spam\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Possible causes and fixes:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"milter_headers module disabled"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check if module is explicitly disabled\nls /etc/rspamd/local.d/milter_headers.conf\nls /etc/rspamd/override.d/milter_headers.conf\n\n# If contains \"enabled = false;\", remove that line or set to true\n# Or create enable file:\necho 'enabled = true;' | sudo tee /etc/rspamd/local.d/milter_headers.conf\nsudo systemctl restart rspamd\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Extended headers not configured"}),":\nCreate ",(0,i.jsx)(s.code,{children:"/etc/rspamd/local.d/milter_headers.conf"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'# Add detailed spam headers\nuse = ["x-spamd-bar", "x-spam-level", "x-spam-status", "authentication-results"];\nauthenticated_headers = ["authentication-results"];\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Postfix not passing milter responses correctly"}),":\nCheck Postfix is using milter protocol 6:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"postconf | grep milter_protocol\n# Should show: milter_protocol = 6\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Messages bypassing Rspamd"})," (check Postfix configuration):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"postconf | grep milter\n# Verify smtpd_milters and non_smtpd_milters are set to inet:localhost:11332\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"issue-all-messages-marked-as-spam",children:"Issue: All messages marked as spam"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Symptoms"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Every message gets high spam scores (8+)"}),"\n",(0,i.jsx)(s.li,{children:"Even test messages from yourself score as spam"}),"\n",(0,i.jsx)(s.li,{children:"Legitimate senders complaining about rejections"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Diagnosis:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Check current scores and which symbols are triggering\necho "test message" | rspamc\n\n# Check Bayes statistics\nrspamc stat | grep -A2 BAYES\n\n# Check recent message history in web UI\n# Look for patterns - which symbols are consistently firing?\n\n# Check action thresholds\nrspamc configdump actions\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Possible causes and fixes:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Incorrectly trained Bayesian classifier"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Check Bayes learning balance\nrspamc stat | grep -A5 BAYES\n# If "learned: spam=5000, ham=50", you have imbalanced training\n\n# Option 1: Reset Bayes and retrain properly\n# WARNING: This deletes all learning data\nrspamc learn_spam --reset\nrspamc learn_ham --reset\n\n# Then retrain with balanced samples (e.g., 200 spam + 200 ham)\n\n# Option 2: Train more ham messages to balance\nfind /path/to/ham-samples/ -type f | xargs -I {} rspamc learn_ham {}\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"DNS/RBL lookup failures causing false positives"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Check if DNS is working\nrspamc stat | grep -i dns\n\n# Test DNS resolver\ndig +short multi.uribl.com\n\n# If DNS failing, configure proper resolver in /etc/rspamd/local.d/options.inc:\n# dns {\n#   nameserver = ["127.0.0.1:53"];  # Local resolver, not 8.8.8.8\n#   timeout = 2s;\n# }\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Thresholds set too low"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Check current thresholds\ngrep -r "add_header\\|reject" /etc/rspamd/local.d/actions.conf\n\n# Increase if needed (edit actions.conf)\n# reject = 20;       # Instead of 15\n# add_header = 10;   # Instead of 6\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Aggressive local rules"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Check for custom rules that might be too aggressive\nfind /etc/rspamd/local.d/ -name "*.conf" -exec grep -l "score\\|weight" {} \\;\n\n# Review any custom scoring and adjust\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Spam learning with legitimate mail"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"If you accidentally trained ham messages as spam, the classifier will mark similar mail as spam"}),"\n",(0,i.jsx)(s.li,{children:"Solution: Reset and retrain carefully with clear examples"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"issue-web-interface-wont-load",children:"Issue: Web interface won't load"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Symptoms"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:['Browser shows "Connection refused" when accessing ',(0,i.jsx)(s.a,{href:"http://server:11334",children:"http://server:11334"})]}),"\n",(0,i.jsx)(s.li,{children:'Or shows "ERR_CONNECTION_TIMED_OUT"'}),"\n",(0,i.jsx)(s.li,{children:"Or page loads but shows login errors"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Diagnosis:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check if controller worker is running\nsudo ss -tlnp | grep 11334\n# Should show: 127.0.0.1:11334 with rspamd process\n\n# Check Rspamd process list\nps aux | grep rspamd | grep controller\n\n# Test locally from server\ncurl -I http://localhost:11334/\n# Should return HTTP headers, not connection refused\n\n# Check configuration syntax\nsudo rspamadm configtest\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Possible causes and fixes:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Controller not started"})," (missing or invalid configuration):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Verify controller config exists\nls -la /etc/rspamd/local.d/worker-controller.inc\n\n# If missing, create it:\necho 'password = \"$2$...your_hash...\";' | sudo tee /etc/rspamd/local.d/worker-controller.inc\nsudo systemctl restart rspamd\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Trying to access from remote browser but bound to localhost"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Check bind address\ngrep bind_socket /etc/rspamd/local.d/worker-controller.inc\n# If shows "localhost:11334", use SSH tunnel:\nssh -L 11334:localhost:11334 user@your-server\n# Then access http://localhost:11334 on your local machine\n\n# Alternative: Bind to all interfaces (LESS SECURE - requires firewall)\n# bind_socket = "*:11334";  # Only if behind firewall!\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Firewall blocking port 11334"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check firewall rules\nsudo ufw status | grep 11334\nsudo iptables -L -n | grep 11334\n\n# If you need remote access (use with caution):\nsudo ufw allow from YOUR_IP to any port 11334\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Wrong password or password not set"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"If page loads but login fails, regenerate password:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'rspamadm pw\n# Copy the $2$... hash\n\n# Update worker-controller.inc with new hash\nsudo nano /etc/rspamd/local.d/worker-controller.inc\n# password = "$2$new_hash_here";\n\nsudo systemctl restart rspamd\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"SELinux blocking"})," (RHEL/CentOS):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo ausearch -m avc -ts recent | grep rspamd\n# If denials found:\nsudo setsebool -P antivirus_can_scan_system 1\nsudo semanage port -a -t antivirus_port_t -p tcp 11334\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsx)(s.p,{children:"Now that you have working spam filtering:"}),"\n",(0,i.jsx)(s.h3,{id:"immediate-next-steps-same-day",children:"Immediate Next Steps (Same Day)"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Monitor for a few hours"})," - Watch the history tab in web interface"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Test with real email"})," - Send yourself messages from different sources"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Adjust thresholds"})," if needed based on initial results"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"within-a-week",children:"Within a Week"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/guides/configuration/fundamentals",children:"Learn configuration fundamentals"})})," - Understand what else you can customize"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/developers/architecture",children:"Understand the architecture"})})," - Learn how Rspamd works internally for better troubleshooting"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Set up proper monitoring"})," - Use Prometheus/Grafana or the built-in ",(0,i.jsx)(s.code,{children:"/stat"})," endpoint"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Configure backup"})," - Back up ",(0,i.jsx)(s.code,{children:"/etc/rspamd/local.d/"})," and Redis dump (statistics data)"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"ongoing-optimization",children:"Ongoing Optimization"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/developers/writing_rules",children:"Rule writing basics"})})," - Create custom rules for your environment"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/developers/protocol",children:"Protocol documentation"})})," - Understand the HTTP API for integration"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Performance tuning"})," - Adjust worker count, DNS timeout, and caching parameters based on your message volume"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Advanced features"})," - Explore neural networks, fuzzy hashing, and external services integration"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,i.jsx)(s.p,{children:"If you run into issues:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/configuration/",children:"Configuration reference"})})," - Detailed parameter documentation for all modules"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/support",children:"Community support"})})," - Get help from other users and developers"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/developers/architecture",children:"Architecture documentation"})})," - Understand internal workings for debugging"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/faq",children:"FAQ"})})," - Frequently asked questions and common misconceptions"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"performance-tuning-advanced",children:"Performance Tuning (Advanced)"}),"\n",(0,i.jsx)(s.p,{children:"Once your basic setup is working, consider these optimizations:"}),"\n",(0,i.jsx)(s.h3,{id:"worker-count",children:"Worker Count"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check CPU cores\nnproc\n\n# Edit worker-normal.inc to match your cores (default is 1)\nsudo nano /etc/rspamd/local.d/worker-normal.inc\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:"# For a 4-core server\ncount = 4;  # Number of normal worker processes\n"})}),"\n",(0,i.jsx)(s.h3,{id:"dns-timeout-and-caching",children:"DNS Timeout and Caching"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/options.inc\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'dns {\n  timeout = 1s;          # Reduce if you have fast local resolver\n  retransmits = 2;       # Number of retries for failed DNS queries\n  sockets = 16;          # UDP sockets for parallel DNS queries\n  nameserver = ["127.0.0.1"];  # Use local recursive resolver\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"memory-limits",children:"Memory Limits"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/options.inc\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:"# Limit memory per worker (prevents memory leaks from causing OOM)\nmax_lua_urls = 1024;     # Maximum URLs to extract per message\nmax_urls = 10000;        # Hard limit on URL processing\nmax_recipients = 1024;   # Maximum recipients per message\n"})}),"\n",(0,i.jsx)(s.h3,{id:"message-size-limits",children:"Message Size Limits"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/worker-normal.inc\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:"# Don't scan very large messages (saves CPU)\ntask_timeout = 8s;       # Maximum time per message\nmax_message_size = 50M;  # Skip scanning messages larger than this\n"})}),"\n",(0,i.jsx)(s.h2,{id:"security-hardening-production-checklist",children:"Security Hardening (Production Checklist)"}),"\n",(0,i.jsx)(s.p,{children:"Before going live in production:"}),"\n",(0,i.jsx)(s.h3,{id:"1-restrict-web-interface-access",children:"1. Restrict Web Interface Access"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Ensure controller only listens on localhost\ngrep bind_socket /etc/rspamd/local.d/worker-controller.inc\n# Should show: bind_socket = "localhost:11334";\n\n# For remote access, use SSH tunnel (not public binding)\n'})}),"\n",(0,i.jsx)(s.h3,{id:"2-enable-https-for-web-interface-optional",children:"2. Enable HTTPS for Web Interface (Optional)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/worker-controller.inc\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'# Use HTTPS for web interface\nsecure_ip = "127.0.0.1";  # Allow secure mode from localhost\nssl_certificate = "/path/to/cert.pem";\nssl_certificate_key = "/path/to/key.pem";\n'})}),"\n",(0,i.jsx)(s.h3,{id:"3-rate-limiting-prevent-abuse",children:"3. Rate Limiting (Prevent Abuse)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/rspamd/local.d/ratelimit.conf\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'# Limit message processing rate per IP\nrates {\n  # Limit to 10 messages per minute per IP\n  to = {\n    bucket = {\n      rate = "10 / 1m";\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"4-monitor-log-files",children:"4. Monitor Log Files"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Set up log rotation\nls -la /etc/logrotate.d/rspamd\n\n# Monitor for errors\nsudo tail -f /var/log/rspamd/rspamd.log | grep -i error\n"})}),"\n",(0,i.jsx)(s.h3,{id:"5-regular-updates",children:"5. Regular Updates"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Keep Rspamd updated for security fixes\nsudo apt update && sudo apt upgrade rspamd  # Debian/Ubuntu\nsudo dnf update rspamd                      # RHEL/Rocky\n\n# Subscribe to security announcements\n# https://rspamd.com/announce/\n"})}),"\n",(0,i.jsx)(s.h2,{id:"backup-and-recovery",children:"Backup and Recovery"}),"\n",(0,i.jsx)(s.p,{children:"Protect your configuration and learning data:"}),"\n",(0,i.jsx)(s.h3,{id:"configuration-backup",children:"Configuration Backup"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Back up all custom configuration\nsudo tar -czf rspamd-config-backup-$(date +%F).tar.gz /etc/rspamd/local.d/ /etc/rspamd/override.d/\n\n# Store backup off-server\nscp rspamd-config-backup-*.tar.gz user@backup-server:~/backups/\n"})}),"\n",(0,i.jsx)(s.h3,{id:"redis-data-backup",children:"Redis Data Backup"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Redis automatically saves to disk (if persistence enabled)\n# Back up Redis dump file\nsudo cp /var/lib/redis/dump.rdb /backup/redis-rspamd-$(date +%F).rdb\n\n# Or trigger Redis save and backup\nredis-cli SAVE\nsudo cp /var/lib/redis/dump.rdb /backup/\n"})}),"\n",(0,i.jsx)(s.h3,{id:"restore-configuration",children:"Restore Configuration"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Restore from backup\nsudo tar -xzf rspamd-config-backup-YYYY-MM-DD.tar.gz -C /\n\n# Restart Rspamd\nsudo systemctl restart rspamd\n"})}),"\n",(0,i.jsx)(s.h2,{id:"success-stories",children:"Success Stories"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:'"Went from 50+ spam messages per day to 2-3 false positives per week after this 30-minute setup"'})," - Small business admin"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:'"The decision tree helped me choose package installation over Docker, saved me hours of debugging later"'})," - Enterprise email admin"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:'"Finally understanding what Rspamd actually configures made all the difference"'})," - SpamAssassin migrator"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Congratulations!"})," \ud83c\udf89 You now have working spam filtering with Rspamd. The foundation is solid, and you can build on this with more advanced configuration as needed."]})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);