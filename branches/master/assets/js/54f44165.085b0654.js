"use strict";(self.webpackChunkrspamd_docs=self.webpackChunkrspamd_docs||[]).push([[7924],{5287:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"getting-started/installation","title":"Installation Guide","description":"Choosing the right installation method depends on your scenario, technical requirements, and time constraints. This guide helps you make the best choice for your situation.","source":"@site/docs/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/docs.rspamd.com/branches/master/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/rspamd/docs.rspamd.com/edit/master/docs/getting-started/installation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Installation Guide","sidebar_position":2},"sidebar":"docs","previous":{"title":"Understanding Rspamd","permalink":"/docs.rspamd.com/branches/master/getting-started/understanding-rspamd"},"next":{"title":"First Success Setup","permalink":"/docs.rspamd.com/branches/master/getting-started/first-setup"}}');var t=s(4848),i=s(8453);const a={title:"Installation Guide",sidebar_position:2},l="Rspamd Installation Guide",o={},d=[{value:"Installation Decision Tree",id:"installation-decision-tree",level:2},{value:"Installation Methods Comparison",id:"installation-methods-comparison",level:2},{value:"Quick Start: Docker Installation",id:"quick-start-docker-installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Step 1: Run Rspamd Container",id:"step-1-run-rspamd-container",level:3},{value:"Important: DNS requirement for Docker",id:"important-dns-requirement-for-docker",level:3},{value:"Step 2: Set Web Interface Password",id:"step-2-set-web-interface-password",level:3},{value:"Step 3: Access Web Interface",id:"step-3-access-web-interface",level:3},{value:"Production: Package Installation",id:"production-package-installation",level:2},{value:"Supported Distributions",id:"supported-distributions",level:3},{value:"Ubuntu/Debian Installation",id:"ubuntudebian-installation",level:3},{value:"CentOS/RHEL/Rocky Linux Installation",id:"centosrhelrocky-linux-installation",level:3},{value:"FreeBSD Installation",id:"freebsd-installation",level:3},{value:"Advanced: Source Compilation",id:"advanced-source-compilation",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Compilation Steps",id:"compilation-steps",level:3},{value:"Create Systemd Service",id:"create-systemd-service",level:3},{value:"Cloud/Container Deployment",id:"cloudcontainer-deployment",level:2},{value:"Docker Compose Example",id:"docker-compose-example",level:3},{value:"Kubernetes Deployment",id:"kubernetes-deployment",level:3},{value:"Migration-Focused Installation",id:"migration-focused-installation",level:2},{value:"Step 1: Install Rspamd (Package Method)",id:"step-1-install-rspamd-package-method",level:3},{value:"Step 2: Configure for Parallel Testing",id:"step-2-configure-for-parallel-testing",level:3},{value:"Step 3: Configure Actions for Testing",id:"step-3-configure-actions-for-testing",level:3},{value:"Testing Your Installation",id:"testing-your-installation",level:2},{value:"1. Service Health Check",id:"1-service-health-check",level:3},{value:"2. Test Message Scanning",id:"2-test-message-scanning",level:3},{value:"3. Web Interface Test",id:"3-web-interface-test",level:3},{value:"4. Integration Test",id:"4-integration-test",level:3},{value:"Common Installation Issues",id:"common-installation-issues",level:2},{value:"Permission Problems",id:"permission-problems",level:3},{value:"Port Conflicts",id:"port-conflicts",level:3},{value:"Redis Connection Issues",id:"redis-connection-issues",level:3},{value:"DNS Resolver Problems (Docker)",id:"dns-resolver-problems-docker",level:3},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Getting Help",id:"getting-help",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"rspamd-installation-guide",children:"Rspamd Installation Guide"})}),"\n",(0,t.jsx)(n.p,{children:"Choosing the right installation method depends on your scenario, technical requirements, and time constraints. This guide helps you make the best choice for your situation."}),"\n",(0,t.jsx)(n.h2,{id:"installation-decision-tree",children:"Installation Decision Tree"}),"\n",(0,t.jsx)(n.p,{children:"Use this decision tree to find your recommended installation approach:"}),"\n",(0,t.jsx)(n.mermaid,{value:"flowchart TD\n    Start[I need to install Rspamd] --\x3e Purpose{What's your purpose?}\n    \n    Purpose --\x3e|Testing & Learning| Docker[Docker Installation]\n    Purpose --\x3e|Production Deployment| ProdType{What type of production?}\n    Purpose --\x3e|Migration from SpamAssassin| Migration[Migration-Focused Install]\n    \n    ProdType --\x3e|Standard business email| Package[Package Installation]\n    ProdType --\x3e|High-volume/custom needs| Source[Source Compilation]\n    ProdType --\x3e|Cloud/containerized| Container[Container Deployment]\n    \n    Docker --\x3e DockerSteps[15 minutes setup<br/>Easy testing<br/>No system changes]\n    Package --\x3e PackageSteps[1-2 hour setup<br/>Production ready<br/>Automatic updates]\n    Source --\x3e SourceSteps[3-4 hour setup<br/>Full customization<br/>Latest features]\n    Container --\x3e ContainerSteps[30 minutes - 2 hours<br/>Scalable deployment<br/>Infrastructure as code]\n    Migration --\x3e MigrationSteps[2-3 hour process<br/>Parallel testing<br/>Gradual transition]"}),"\n",(0,t.jsx)(n.h2,{id:"installation-methods-comparison",children:"Installation Methods Comparison"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Method"}),(0,t.jsx)(n.th,{children:"Time Required"}),(0,t.jsx)(n.th,{children:"Best For"}),(0,t.jsx)(n.th,{children:"Pros"}),(0,t.jsx)(n.th,{children:"Cons"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Docker"})}),(0,t.jsx)(n.td,{children:"15 minutes"}),(0,t.jsx)(n.td,{children:"Testing, learning, development"}),(0,t.jsx)(n.td,{children:"Quick setup, isolated, easy cleanup"}),(0,t.jsx)(n.td,{children:"Not for production, resource overhead"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Package Installation"})}),(0,t.jsx)(n.td,{children:"1-2 hours"}),(0,t.jsx)(n.td,{children:"Most production deployments"}),(0,t.jsx)(n.td,{children:"Stable, updates, system integration"}),(0,t.jsx)(n.td,{children:"Less customization, distribution dependent"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Source Compilation"})}),(0,t.jsx)(n.td,{children:"3-4 hours"}),(0,t.jsx)(n.td,{children:"High-volume, custom requirements"}),(0,t.jsx)(n.td,{children:"Latest features, full control, optimization"}),(0,t.jsx)(n.td,{children:"Complex, manual updates, more maintenance"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Container (K8s/Docker Compose)"})}),(0,t.jsx)(n.td,{children:"30min - 2 hours"}),(0,t.jsx)(n.td,{children:"Cloud-native, scalable deployments"}),(0,t.jsx)(n.td,{children:"Scalable, reproducible, version controlled"}),(0,t.jsx)(n.td,{children:"Infrastructure complexity, orchestration knowledge"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"quick-start-docker-installation",children:"Quick Start: Docker Installation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Best for"}),": Testing Rspamd, learning configuration, development work"]}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Docker installed and running"}),"\n",(0,t.jsx)(n.li,{children:"Basic familiarity with Docker commands"}),"\n",(0,t.jsx)(n.li,{children:"A fast local recursive DNS resolver (required \u2013 see DNS notes below)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"step-1-run-rspamd-container",children:"Step 1: Run Rspamd Container"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Create directories for configuration and data\nmkdir -p rspamd-test/{config,data,logs}\ncd rspamd-test\n\n# Run Rspamd with web interface\ndocker run -d \\\n  --name rspamd-test \\\n  -p 11334:11334 \\\n  -p 11332:11332 \\\n  -v "$(pwd)/config:/etc/rspamd/local.d" \\\n  -v "$(pwd)/data:/var/lib/rspamd" \\\n  -v "$(pwd)/logs:/var/log/rspamd" \\\n  rspamd/rspamd:latest\n'})}),"\n",(0,t.jsx)(n.h3,{id:"important-dns-requirement-for-docker",children:"Important: DNS requirement for Docker"}),"\n",(0,t.jsx)(n.p,{children:"Rspamd performs intensive DNS lookups (RBLs, URI checks, DKIM/ARC, DMARC, etc.). For accurate and fast results, Rspamd must use a nearby recursive DNS resolver. Public resolvers (8.8.8.8, 1.1.1.1, etc.) often rate-limit or filter RBL traffic and will cause timeouts or poor accuracy."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Recommended: run a local recursive resolver (e.g. Unbound, Knot Resolver, PowerDNS Recursor) on the host or as a sidecar container."}),"\n",(0,t.jsx)(n.li,{children:"Docker's embedded DNS (127.0.0.11) is only a forwarding stub; it is not a recursive resolver itself."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Configure Rspamd to use your local resolver by adding ",(0,t.jsx)(n.code,{children:"config/options.inc"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-hcl",children:'# /etc/rspamd/local.d/options.inc\ndns {\n  # For Rspamd 3.13+ you may specify hostnames here (e.g. "unbound")\n  # For older versions, use IP addresses or leave this unset to use /etc/resolv.conf\n  timeout = 1s;\n  sockets = 16;\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"If you run a resolver as a sidecar container (see docker-compose example below), set:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-hcl",children:'dns {\n  nameserver = ["unbound"];  # Requires Rspamd 3.13+ (hostname support)\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["For Rspamd versions prior to 3.13 (no hostname support in ",(0,t.jsx)(n.code,{children:"dns.nameserver"}),"), do one of the following:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Do not set ",(0,t.jsx)(n.code,{children:"dns.nameserver"})," and ensure the container's ",(0,t.jsx)(n.code,{children:"/etc/resolv.conf"})," points to your local recursive resolver (configure Docker/daemon with ",(0,t.jsx)(n.code,{children:"--dns=<resolver_ip>"}),"), or"]}),"\n",(0,t.jsxs)(n.li,{children:["Set ",(0,t.jsx)(n.code,{children:"dns.nameserver"})," to the resolver's IP address explicitly."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"step-2-set-web-interface-password",children:"Step 2: Set Web Interface Password"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Generate password hash\ndocker exec rspamd-test rspamadm pw\n\n# Create controller configuration\necho 'password = \"$2$your_generated_hash_here\";' > config/worker-controller.inc\n\n# Restart container\ndocker restart rspamd-test\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-access-web-interface",children:"Step 3: Access Web Interface"}),"\n",(0,t.jsxs)(n.p,{children:["Open ",(0,t.jsx)(n.a,{href:"http://localhost:11334",children:"http://localhost:11334"})," and log in with your password."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2705 Success Criteria"}),": You can access the web interface and see the Rspamd dashboard."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Next Steps"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#testing-your-installation",children:"Test message scanning"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/getting-started/first-setup",children:"Learn basic configuration"})}),"\n",(0,t.jsx)(n.li,{children:"Move to package installation for production"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"production-package-installation",children:"Production: Package Installation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Best for"}),": Most production deployments, standard business email systems"]}),"\n",(0,t.jsx)(n.h3,{id:"supported-distributions",children:"Supported Distributions"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Distribution"}),(0,t.jsx)(n.th,{children:"Support Level"}),(0,t.jsx)(n.th,{children:"Installation Method"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Ubuntu 20.04+"})}),(0,t.jsx)(n.td,{children:"\u2705 Full support"}),(0,t.jsx)(n.td,{children:"Official repository"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Debian 11+"})}),(0,t.jsx)(n.td,{children:"\u2705 Full support"}),(0,t.jsx)(n.td,{children:"Official repository"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"CentOS/RHEL 8+"})}),(0,t.jsx)(n.td,{children:"\u2705 Full support"}),(0,t.jsx)(n.td,{children:"Official repository"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Rocky Linux"})}),(0,t.jsx)(n.td,{children:"\u2705 Full support"}),(0,t.jsx)(n.td,{children:"Official repository"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"FreeBSD"})}),(0,t.jsx)(n.td,{children:"\u2705 Full support"}),(0,t.jsx)(n.td,{children:"Ports collection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Other Linux"})}),(0,t.jsx)(n.td,{children:"\u26a0\ufe0f Community support"}),(0,t.jsx)(n.td,{children:"Source compilation"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"ubuntudebian-installation",children:"Ubuntu/Debian Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Add Rspamd repository\ncurl -sSL https://rspamd.com/apt-stable/gpg.key | sudo apt-key add -\necho "deb [arch=amd64] https://rspamd.com/apt-stable/ $(lsb_release -cs) main" | \\\n  sudo tee /etc/apt/sources.list.d/rspamd.list\n\n# Update package list\nsudo apt update\n\n# Install Rspamd and Redis\nsudo apt install rspamd redis-server\n\n# Start and enable services\nsudo systemctl start rspamd redis-server\nsudo systemctl enable rspamd redis-server\n'})}),"\n",(0,t.jsx)(n.h3,{id:"centosrhelrocky-linux-installation",children:"CentOS/RHEL/Rocky Linux Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Add Rspamd repository\ncurl -sSL https://rspamd.com/rpm-stable/centos-8/rspamd.repo | \\\n  sudo tee /etc/yum.repos.d/rspamd.repo\n\n# Install Rspamd and Redis\nsudo dnf install rspamd redis\n\n# Start and enable services\nsudo systemctl start rspamd redis\nsudo systemctl enable rspamd redis\n"})}),"\n",(0,t.jsx)(n.h3,{id:"freebsd-installation",children:"FreeBSD Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Install from ports\nsudo pkg install rspamd redis\n\n# Enable services\nsudo sysrc rspamd_enable="YES"\nsudo sysrc redis_enable="YES"\n\n# Start services\nsudo service rspamd start\nsudo service redis start\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2705 Success Criteria"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'sudo systemctl status rspamd\n# Should show "active (running)"\n\nsudo systemctl status redis\n# Should show "active (running)"\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Next Steps"}),": ",(0,t.jsx)(n.a,{href:"/getting-started/first-setup",children:"Complete basic configuration"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"advanced-source-compilation",children:"Advanced: Source Compilation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Best for"}),": High-volume deployments, custom requirements, latest features"]}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites-1",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"Install build dependencies:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Ubuntu/Debian"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt install build-essential cmake libssl-dev libpcre3-dev \\\n  zlib1g-dev libluajit-5.1-dev libglib2.0-dev libevent-dev \\\n  libsodium-dev libhyperscan-dev ragel\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CentOS/RHEL"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'sudo dnf groupinstall "Development Tools"\nsudo dnf install cmake openssl-devel pcre-devel zlib-devel \\\n  luajit-devel glib2-devel libevent-devel libsodium-devel \\\n  hyperscan-devel ragel\n'})}),"\n",(0,t.jsx)(n.h3,{id:"compilation-steps",children:"Compilation Steps"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Download source\nwget https://github.com/rspamd/rspamd/archive/master.tar.gz\ntar xzf master.tar.gz\ncd rspamd-master\n\n# Create build directory\nmkdir build\ncd build\n\n# Configure build\ncmake .. \\\n  -DCMAKE_BUILD_TYPE=Release \\\n  -DCONFDIR=/etc/rspamd \\\n  -DRUNDIR=/run/rspamd \\\n  -DDBDIR=/var/lib/rspamd \\\n  -DLOGDIR=/var/log/rspamd\n\n# Compile (adjust -j based on your CPU cores)\nmake -j4\n\n# Install\nsudo make install\n\n# Create system user\nsudo useradd -r -g mail -d /var/lib/rspamd -s /bin/false rspamd\n\n# Create directories\nsudo mkdir -p /var/lib/rspamd /var/log/rspamd /run/rspamd\nsudo chown rspamd:mail /var/lib/rspamd /var/log/rspamd /run/rspamd\n"})}),"\n",(0,t.jsx)(n.h3,{id:"create-systemd-service",children:"Create Systemd Service"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"/etc/systemd/system/rspamd.service"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[Unit]\nDescription=Rspamd spam filtering system\nAfter=network.target\n\n[Service]\nType=forking\nPIDFile=/run/rspamd/rspamd.pid\nExecStart=/usr/local/bin/rspamd -f\nExecReload=/bin/kill -USR1 $MAINPID\nUser=rspamd\nGroup=mail\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Enable and start service\nsudo systemctl daemon-reload\nsudo systemctl enable rspamd\nsudo systemctl start rspamd\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2705 Success Criteria"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'sudo systemctl status rspamd\n# Should show "active (running)"\n\nrspamd --version\n# Should show version and build information\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"cloudcontainer-deployment",children:"Cloud/Container Deployment"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Best for"}),": Kubernetes, Docker Swarm, cloud-native deployments"]}),"\n",(0,t.jsx)(n.h3,{id:"docker-compose-example",children:"Docker Compose Example"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  rspamd:\n    image: rspamd/rspamd:latest\n    container_name: rspamd\n    ports:\n      - "11332:11332"  # Proxy worker\n      - "11334:11334"  # Web interface\n    volumes:\n      - ./config:/etc/rspamd/local.d\n      - ./data:/var/lib/rspamd\n      - ./logs:/var/log/rspamd\n    depends_on:\n      - redis\n      - unbound\n    restart: unless-stopped\n\n  redis:\n    image: redis:alpine\n    container_name: rspamd-redis\n    volumes:\n      - redis-data:/data\n    restart: unless-stopped\n\n  # Local recursive DNS resolver (recommended)\n  # Note: you can use any unbound image; this is an example. Ensure it is configured for recursion\n  unbound:\n    image: mvance/unbound:latest\n    container_name: rspamd-unbound\n    restart: unless-stopped\n    # Expose only to the compose network by default; no published ports are required\n    # You can mount custom configs if desired:\n    # volumes:\n    #   - ./unbound:/opt/unbound/etc/unbound\n\nvolumes:\n  redis-data:\n'})}),"\n",(0,t.jsx)(n.p,{children:"Deploy:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,t.jsx)(n.h3,{id:"kubernetes-deployment",children:"Kubernetes Deployment"}),"\n",(0,t.jsxs)(n.p,{children:["Basic Kubernetes manifests available in our ",(0,t.jsx)(n.a,{href:"https://github.com/rspamd/rspamd-k8s-examples",children:"examples repository"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"migration-focused-installation",children:"Migration-Focused Installation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Best for"}),": Migrating from SpamAssassin or other spam filtering solutions"]}),"\n",(0,t.jsx)(n.p,{children:"This approach allows you to run Rspamd in parallel with your existing solution for testing and gradual migration."}),"\n",(0,t.jsx)(n.h3,{id:"step-1-install-rspamd-package-method",children:"Step 1: Install Rspamd (Package Method)"}),"\n",(0,t.jsxs)(n.p,{children:["Follow the ",(0,t.jsx)(n.a,{href:"#production-package-installation",children:"package installation"})," steps above."]}),"\n",(0,t.jsx)(n.h3,{id:"step-2-configure-for-parallel-testing",children:"Step 2: Configure for Parallel Testing"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"/etc/rspamd/local.d/worker-proxy.inc"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-hcl",children:"# Configure for testing mode - don't take actions yet\nmilter = yes;\ntimeout = 120s;\nupstream \"local\" {\n  default = yes;\n  self_scan = yes;\n}\n\n# Testing mode - only add headers, don't reject\nskip_process_errors = true;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-configure-actions-for-testing",children:"Step 3: Configure Actions for Testing"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"/etc/rspamd/local.d/actions.conf"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-hcl",children:"# Conservative thresholds for testing\nreject = 999;       # Don't reject anything during testing\nadd_header = 1;     # Add headers to everything for analysis\ngreylist = 999;     # Don't greylist during testing\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2705 Success Criteria"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Rspamd adds ",(0,t.jsx)(n.code,{children:"X-Spam"})," headers without affecting mail delivery"]}),"\n",(0,t.jsx)(n.li,{children:"You can analyze header information to compare with existing solution"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Next Steps"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/getting-started/migration-planning",children:"Migration planning guide"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/tutorials/migrate_sa",children:"SpamAssassin migration"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"testing-your-installation",children:"Testing Your Installation"}),"\n",(0,t.jsx)(n.p,{children:"Regardless of installation method, verify your setup:"}),"\n",(0,t.jsx)(n.h3,{id:"1-service-health-check",children:"1. Service Health Check"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check service status\nsudo systemctl status rspamd\n\n# Check listening ports\nsudo netstat -tlnp | grep rspamd\n# Should show ports 11332, 11333, 11334\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-test-message-scanning",children:"2. Test Message Scanning"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Test with rspamc command\necho "Test message" | rspamc\n'})}),"\n",(0,t.jsx)(n.p,{children:"Expected output should include:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Symbol analysis results"}),"\n",(0,t.jsx)(n.li,{children:"Spam score"}),"\n",(0,t.jsx)(n.li,{children:"Action recommendation"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-web-interface-test",children:"3. Web Interface Test"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Set controller password:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Generate password\nrspamadm pw\n\n# Add to configuration\necho 'password = \"$2$your_hash_here\";' | sudo tee /etc/rspamd/local.d/worker-controller.inc\n\n# Restart Rspamd\nsudo systemctl restart rspamd\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Access ",(0,t.jsx)(n.a,{href:"http://your-server:11334",children:"http://your-server:11334"})]}),"\n",(0,t.jsx)(n.li,{children:"Log in and verify dashboard loads"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"4-integration-test",children:"4. Integration Test"}),"\n",(0,t.jsx)(n.p,{children:"Send a test email through your mail server and verify:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Email is processed by Rspamd"}),"\n",(0,t.jsx)(n.li,{children:"Appropriate headers are added"}),"\n",(0,t.jsx)(n.li,{children:"Actions are taken based on configuration"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-installation-issues",children:"Common Installation Issues"}),"\n",(0,t.jsx)(n.h3,{id:"permission-problems",children:"Permission Problems"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Fix ownership\nsudo chown -R rspamd:mail /var/lib/rspamd /var/log/rspamd\n\n# Fix SELinux (if applicable)\nsudo setsebool -P antivirus_can_scan_system 1\n"})}),"\n",(0,t.jsx)(n.h3,{id:"port-conflicts",children:"Port Conflicts"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check what's using the ports\nsudo lsof -i :11332\nsudo lsof -i :11334\n\n# Modify worker configuration if needed\n"})}),"\n",(0,t.jsx)(n.h3,{id:"redis-connection-issues",children:"Redis Connection Issues"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Test Redis connectivity\nredis-cli ping\n# Should return "PONG"\n\n# Check Rspamd Redis configuration\nsudo rspamc stat\n# Should show statistics if Redis is working\n'})}),"\n",(0,t.jsx)(n.h3,{id:"dns-resolver-problems-docker",children:"DNS Resolver Problems (Docker)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check what resolver the container sees\ndocker exec rspamd-test cat /etc/resolv.conf\n\n# If using a sidecar resolver, verify name resolution inside the container (Rspamd 3.13+)\ndocker exec rspamd-test getent hosts unbound || true\n\n# Inspect Rspamd DNS stats and errors\ndocker exec rspamd-test rspamc stat | grep -i dns || true\n"})}),"\n",(0,t.jsx)(n.p,{children:"Checklist:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure a local recursive resolver is available (host or sidecar)."}),"\n",(0,t.jsxs)(n.li,{children:["For Rspamd < 3.13, avoid hostnames in ",(0,t.jsx)(n.code,{children:"dns.nameserver"}),"; use IPs or rely on ",(0,t.jsx)(n.code,{children:"/etc/resolv.conf"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Avoid public resolvers for RBL traffic to prevent rate limiting and timeouts."}),"\n",(0,t.jsxs)(n.li,{children:["Keep ",(0,t.jsx)(n.code,{children:"dns.timeout"})," conservative (e.g., 1s\u20132s) and ensure network connectivity (UDP/53)."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Version note: Rspamd 3.13+ supports resolving hostnames in ",(0,t.jsx)(n.code,{children:"dns.nameserver"}),". Older versions only accept IP addresses or ",(0,t.jsx)(n.code,{children:"/etc/resolv.conf"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,t.jsx)(n.p,{children:"After successful installation:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/getting-started/first-setup",children:"Complete first setup"})})," - Configure basic spam filtering"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/configuration/fundamentals",children:"Learn configuration fundamentals"})})," - Understand what to customize"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/scenarios/",children:"Choose your scenario"})})," - Find guides specific to your use case"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,t.jsx)(n.p,{children:"If you encounter issues:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/troubleshooting/common-problems",children:"Common problems"})})," - Solutions to frequent installation issues"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/support",children:"Community support"})})," - Get help from other users and developers"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/configuration/",children:"Official documentation"})})," - Technical reference for advanced configuration"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);