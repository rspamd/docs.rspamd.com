"use strict";(self.webpackChunkrspamd_docs=self.webpackChunkrspamd_docs||[]).push([[5636],{6194:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>i,contentTitle:()=>c,default:()=>u,frontMatter:()=>n,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"modules/url_redirector","title":"URL redirector module","description":"This module provides a hook for RBL module to resolve redirects.","source":"@site/docs/modules/url_redirector.md","sourceDirName":"modules","slug":"/modules/url_redirector","permalink":"/docs.rspamd.com/branches/master/ru/modules/url_redirector","draft":false,"unlisted":false,"editUrl":"https://github.com/rspamd/docs.rspamd.com/edit/master/docs/modules/url_redirector.md","tags":[],"version":"current","frontMatter":{"title":"URL redirector module"},"sidebar":"docs","previous":{"title":"Trie module","permalink":"/docs.rspamd.com/branches/master/ru/modules/trie"},"next":{"title":"Whitelist module","permalink":"/docs.rspamd.com/branches/master/ru/modules/whitelist"}}');var t=o(4848),d=o(8453);const n={title:"URL redirector module"},c="URL redirector module",i={},l=[];function a(e){const r={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"url-redirector-module",children:"URL redirector module"})}),"\n",(0,t.jsxs)(r.p,{children:["This module provides a hook for ",(0,t.jsx)(r.a,{href:"/modules/rbl",children:"RBL"})," module to resolve redirects.\nTo enable this module one should add a ",(0,t.jsx)(r.code,{children:"redirector_hosts_map"})," option to the module's configuration, i.e. by adding the following to ",(0,t.jsx)(r.code,{children:"local.d/url_redirector.conf"}),":"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-hcl",children:'redirector_hosts_map = "${LOCAL_CONFDIR}/local.d/maps.d/redirectors.inc";\n'})}),"\n",(0,t.jsx)(r.p,{children:"This file/URL should contain a list of domains that should be checked by URL redirector."}),"\n",(0,t.jsxs)(r.p,{children:["Dereferenced links are cached in Redis (see ",(0,t.jsx)(r.a,{href:"/configuration/redis",children:"here"})," for information on configuring redis), checked by SURBL module and added as tags for other modules."]}),"\n",(0,t.jsx)(r.h1,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(r.p,{children:["The following settings could be set in ",(0,t.jsx)(r.code,{children:"local.d/url_redirector.conf"})," to control behaviour of the URL redirector module."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-hcl",children:'# How long to cache dereferenced links in Redis (default 1 day)\nexpire = 1d;\n# Timeout for HTTP requests (10 seconds by default)\ntimeout = 10; # 10 seconds by default\n# How many nested redirects to follow (default 1)\nnested_limit = 1;\n# Prefix for keys in redis (default "rdr:")\nkey_prefix = "rdr:";\n# Check SSL certificates (default false)\ncheck_ssl = false;\n# How many urls to check\nmax_urls = 5;\n# Maximum body to process\nmax_size = 10k;\n# Insert symbol if redirected url has been found\nredirector_symbol = "MY_REDIRECTOR_SYMBOL";\n# Follow merely redirectors\nredirectors_only = true;\n# Redis key for top urls\ntop_urls_key = \'rdr:top_urls\';\n# How many top urls to save\ntop_urls_count = 200;\n# Check only those redirectors\nredirector_hosts_map = "${LOCAL_CONFDIR}/local.d/maps.d/redirectors.inc";\n'})})]})}function u(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,r,o)=>{o.d(r,{R:()=>n,x:()=>c});var s=o(6540);const t={},d=s.createContext(t);function n(e){const r=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:n(e.components),s.createElement(d.Provider,{value:r},e.children)}}}]);