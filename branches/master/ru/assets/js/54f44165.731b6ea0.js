"use strict";(self.webpackChunkrspamd_docs=self.webpackChunkrspamd_docs||[]).push([[7924],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var r=s(96540);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}},35287:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"getting-started/installation","title":"Installation Guide","description":"Choosing the right installation method depends on your scenario, technical requirements, and time constraints. This guide helps you make the best choice for your situation.","source":"@site/docs/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/docs.rspamd.com/branches/master/ru/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/rspamd/docs.rspamd.com/edit/master/docs/getting-started/installation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Installation Guide","sidebar_position":2},"sidebar":"docs","previous":{"title":"Understanding Rspamd","permalink":"/docs.rspamd.com/branches/master/ru/getting-started/understanding-rspamd"},"next":{"title":"First Success Setup","permalink":"/docs.rspamd.com/branches/master/ru/getting-started/first-setup"}}');var i=s(74848),t=s(28453);const l={title:"Installation Guide",sidebar_position:2},o="Rspamd Installation Guide",a={},d=[{value:"Installation Decision Tree",id:"installation-decision-tree",level:2},{value:"Installation Methods Comparison",id:"installation-methods-comparison",level:2},{value:"Quick Start: Docker Installation",id:"quick-start-docker-installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Step 1: Run Rspamd Container",id:"step-1-run-rspamd-container",level:3},{value:"Important: DNS requirement for Docker",id:"important-dns-requirement-for-docker",level:3},{value:"Step 2: Set Web Interface Password",id:"step-2-set-web-interface-password",level:3},{value:"Step 3: Access Web Interface",id:"step-3-access-web-interface",level:3},{value:"Production: Package Installation",id:"production-package-installation",level:2},{value:"Supported Distributions",id:"supported-distributions",level:3},{value:"Ubuntu/Debian Installation",id:"ubuntudebian-installation",level:3},{value:"CentOS/RHEL/Rocky Linux Installation",id:"centosrhelrocky-linux-installation",level:3},{value:"FreeBSD Installation",id:"freebsd-installation",level:3},{value:"Cloud/Container Deployment",id:"cloudcontainer-deployment",level:2},{value:"Docker Compose Example",id:"docker-compose-example",level:3},{value:"Kubernetes Deployment",id:"kubernetes-deployment",level:3},{value:"Migration-Focused Installation",id:"migration-focused-installation",level:2},{value:"Step 1: Install Rspamd (Package Method)",id:"step-1-install-rspamd-package-method",level:3},{value:"Step 2: Configure for Parallel Testing",id:"step-2-configure-for-parallel-testing",level:3},{value:"Step 3: Configure Actions for Testing",id:"step-3-configure-actions-for-testing",level:3},{value:"Testing Your Installation",id:"testing-your-installation",level:2},{value:"1. Service Health Check",id:"1-service-health-check",level:3},{value:"2. Test Message Scanning",id:"2-test-message-scanning",level:3},{value:"3. Web Interface Test",id:"3-web-interface-test",level:3},{value:"4. Integration Test",id:"4-integration-test",level:3},{value:"Common Installation Issues",id:"common-installation-issues",level:2},{value:"Permission Problems",id:"permission-problems",level:3},{value:"Port Conflicts",id:"port-conflicts",level:3},{value:"Redis Connection Issues",id:"redis-connection-issues",level:3},{value:"DNS Resolver Problems (Docker)",id:"dns-resolver-problems-docker",level:3},{value:"Post-Installation Security Checklist",id:"post-installation-security-checklist",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Getting Help",id:"getting-help",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"rspamd-installation-guide",children:"Rspamd Installation Guide"})}),"\n",(0,i.jsx)(n.p,{children:"Choosing the right installation method depends on your scenario, technical requirements, and time constraints. This guide helps you make the best choice for your situation."}),"\n",(0,i.jsx)(n.h2,{id:"installation-decision-tree",children:"Installation Decision Tree"}),"\n",(0,i.jsx)(n.p,{children:"Use this decision tree to find your recommended installation approach:"}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart TD\n    Start[I need to install Rspamd] --\x3e Purpose{What's your purpose?}\n\n    Purpose --\x3e|Testing & Learning| Docker[Docker Installation]\n    Purpose --\x3e|Production Deployment| ProdType{What type of production?}\n    Purpose --\x3e|Migration from SpamAssassin| Migration[Migration-Focused Install]\n\n    ProdType --\x3e|Standard business email| Package[Package Installation]\n    ProdType --\x3e|Cloud/containerized| Container[Container Deployment]\n\n    Docker --\x3e DockerSteps[15 minutes setup<br/>Easy testing<br/>No system changes]\n    Package --\x3e PackageSteps[1-2 hour setup<br/>Production ready<br/>Automatic updates]\n    Container --\x3e ContainerSteps[30 minutes - 2 hours<br/>Scalable deployment<br/>Infrastructure as code]\n    Migration --\x3e MigrationSteps[2-3 hour process<br/>Parallel testing<br/>Gradual transition]"}),"\n",(0,i.jsx)(n.h2,{id:"installation-methods-comparison",children:"Installation Methods Comparison"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Method"}),(0,i.jsx)(n.th,{children:"Time Required"}),(0,i.jsx)(n.th,{children:"Best For"}),(0,i.jsx)(n.th,{children:"Pros"}),(0,i.jsx)(n.th,{children:"Cons"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Docker"})}),(0,i.jsx)(n.td,{children:"15 minutes"}),(0,i.jsx)(n.td,{children:"Testing, learning, development"}),(0,i.jsx)(n.td,{children:"Quick setup, isolated, easy cleanup"}),(0,i.jsx)(n.td,{children:"Not for production, resource overhead"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Package Installation"})}),(0,i.jsx)(n.td,{children:"1-2 hours"}),(0,i.jsx)(n.td,{children:"Most production deployments"}),(0,i.jsx)(n.td,{children:"Stable, updates, system integration"}),(0,i.jsx)(n.td,{children:"Less customization, distribution dependent"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Container (K8s/Docker Compose)"})}),(0,i.jsx)(n.td,{children:"30min - 2 hours"}),(0,i.jsx)(n.td,{children:"Cloud-native, scalable deployments"}),(0,i.jsx)(n.td,{children:"Scalable, reproducible, version controlled"}),(0,i.jsx)(n.td,{children:"Infrastructure complexity, orchestration knowledge"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start-docker-installation",children:"Quick Start: Docker Installation"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best for"}),": Testing Rspamd, learning configuration, development work"]}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker installed and running"}),"\n",(0,i.jsx)(n.li,{children:"Basic familiarity with Docker commands"}),"\n",(0,i.jsx)(n.li,{children:"A fast local recursive DNS resolver (required \u2013 see DNS notes below)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-1-run-rspamd-container",children:"Step 1: Run Rspamd Container"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Create directories for configuration and data\nmkdir -p rspamd-test/{config,data,logs}\ncd rspamd-test\n\n# Run Rspamd with web interface\ndocker run -d \\\n  --name rspamd-test \\\n  -p 11334:11334 \\\n  -p 11332:11332 \\\n  -v "$(pwd)/config:/etc/rspamd/local.d" \\\n  -v "$(pwd)/data:/var/lib/rspamd" \\\n  -v "$(pwd)/logs:/var/log/rspamd" \\\n  rspamd/rspamd:latest\n'})}),"\n",(0,i.jsx)(n.h3,{id:"important-dns-requirement-for-docker",children:"Important: DNS requirement for Docker"}),"\n",(0,i.jsx)(n.p,{children:"Rspamd performs intensive DNS lookups (RBLs, URI checks, DKIM/ARC, DMARC, etc.). For accurate and fast results, Rspamd must use a nearby recursive DNS resolver. Public resolvers (8.8.8.8, 1.1.1.1, etc.) often rate-limit or filter RBL traffic and will cause timeouts or poor accuracy."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Recommended: run a local recursive resolver (e.g. Unbound, Knot Resolver, PowerDNS Recursor) on the host or as a sidecar container."}),"\n",(0,i.jsx)(n.li,{children:"Docker's embedded DNS (127.0.0.11) is only a forwarding stub; it is not a recursive resolver itself."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Configure Rspamd to use your local resolver by adding ",(0,i.jsx)(n.code,{children:"config/options.inc"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'# /etc/rspamd/local.d/options.inc\ndns {\n  # For Rspamd 3.13+ you may specify hostnames here (e.g. "unbound")\n  # For older versions, use IP addresses or leave this unset to use /etc/resolv.conf\n  timeout = 1s;\n  sockets = 16;\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"If you run a resolver as a sidecar container (see docker-compose example below), set:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'dns {\n  nameserver = ["unbound"];  # Requires Rspamd 3.13+ (hostname support)\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["For Rspamd versions prior to 3.13 (no hostname support in ",(0,i.jsx)(n.code,{children:"dns.nameserver"}),"), do one of the following:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Do not set ",(0,i.jsx)(n.code,{children:"dns.nameserver"})," and ensure the container's ",(0,i.jsx)(n.code,{children:"/etc/resolv.conf"})," points to your local recursive resolver (configure Docker/daemon with ",(0,i.jsx)(n.code,{children:"--dns=<resolver_ip>"}),"), or"]}),"\n",(0,i.jsxs)(n.li,{children:["Set ",(0,i.jsx)(n.code,{children:"dns.nameserver"})," to the resolver's IP address explicitly."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-set-web-interface-password",children:"Step 2: Set Web Interface Password"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Generate password hash\ndocker exec rspamd-test rspamadm pw\n\n# Create controller configuration\necho 'password = \"$2$your_generated_hash_here\";' > config/worker-controller.inc\n\n# Restart container\ndocker restart rspamd-test\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-access-web-interface",children:"Step 3: Access Web Interface"}),"\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.a,{href:"http://localhost:11334",children:"http://localhost:11334"})," and log in with your password."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u2705 Success Criteria"}),": You can access the web interface and see the Rspamd dashboard."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next Steps"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#testing-your-installation",children:"Test message scanning"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/getting-started/first-setup",children:"Learn basic configuration"})}),"\n",(0,i.jsx)(n.li,{children:"Move to package installation for production"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"production-package-installation",children:"Production: Package Installation"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best for"}),": Most production deployments, standard business email systems"]}),"\n",(0,i.jsx)(n.h3,{id:"supported-distributions",children:"Supported Distributions"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Distribution"}),(0,i.jsx)(n.th,{children:"Support Level"}),(0,i.jsx)(n.th,{children:"Installation Method"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Ubuntu 20.04+"})}),(0,i.jsx)(n.td,{children:"\u2705 Full support"}),(0,i.jsx)(n.td,{children:"Official repository"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Debian 11+"})}),(0,i.jsx)(n.td,{children:"\u2705 Full support"}),(0,i.jsx)(n.td,{children:"Official repository"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"CentOS/RHEL 8+"})}),(0,i.jsx)(n.td,{children:"\u2705 Full support"}),(0,i.jsx)(n.td,{children:"Official repository"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Rocky Linux"})}),(0,i.jsx)(n.td,{children:"\u2705 Full support"}),(0,i.jsx)(n.td,{children:"Official repository"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"FreeBSD"})}),(0,i.jsx)(n.td,{children:"\u2705 Full support"}),(0,i.jsx)(n.td,{children:"Ports collection"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"ubuntudebian-installation",children:"Ubuntu/Debian Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Add Rspamd repository GPG key (modern method)\ncurl -fsSL https://rspamd.com/apt-stable/gpg.key | \\\n  sudo gpg --dearmor -o /usr/share/keyrings/rspamd.gpg\n\n# Add Rspamd repository\necho "deb [signed-by=/usr/share/keyrings/rspamd.gpg] https://rspamd.com/apt-stable/ $(lsb_release -cs) main" | \\\n  sudo tee /etc/apt/sources.list.d/rspamd.list\n\n# Update package list\nsudo apt update\n\n# Install Rspamd and Redis\nsudo apt install rspamd redis-server\n\n# Start and enable services\nsudo systemctl start rspamd redis-server\nsudo systemctl enable rspamd redis-server\n'})}),"\n",(0,i.jsx)(n.h3,{id:"centosrhelrocky-linux-installation",children:"CentOS/RHEL/Rocky Linux Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Add Rspamd repository\ncurl -sSL https://rspamd.com/rpm-stable/centos-8/rspamd.repo | \\\n  sudo tee /etc/yum.repos.d/rspamd.repo\n\n# Install Rspamd and Redis\nsudo dnf install rspamd redis\n\n# Start and enable services\nsudo systemctl start rspamd redis\nsudo systemctl enable rspamd redis\n"})}),"\n",(0,i.jsx)(n.h3,{id:"freebsd-installation",children:"FreeBSD Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Install from ports\nsudo pkg install rspamd redis\n\n# Enable services\nsudo sysrc rspamd_enable="YES"\nsudo sysrc redis_enable="YES"\n\n# Start services\nsudo service rspamd start\nsudo service redis start\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u2705 Success Criteria"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'sudo systemctl status rspamd\n# Should show "active (running)"\n\nsudo systemctl status redis\n# Should show "active (running)"\n\n# Verify Rspamd is listening on correct ports\nsudo ss -tlnp | grep rspamd\n# Should show:\n# - 127.0.0.1:11333 (normal worker - scanner)\n# - 127.0.0.1:11334 (controller - web interface)\n# - 127.0.0.1:11332 (proxy worker - milter protocol)\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What was installed:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rspamd daemon"})," (",(0,i.jsx)(n.code,{children:"/usr/bin/rspamd"}),") - Main executable"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuration"})," (",(0,i.jsx)(n.code,{children:"/etc/rspamd/"}),") - Default configuration files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data directory"})," (",(0,i.jsx)(n.code,{children:"/var/lib/rspamd/"}),") - Statistics, learned data, fuzzy hashes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Log directory"})," (",(0,i.jsx)(n.code,{children:"/var/log/rspamd/"}),") - Application logs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Utilities"}),": ",(0,i.jsx)(n.code,{children:"rspamc"})," (client), ",(0,i.jsx)(n.code,{children:"rspamadm"})," (admin tool)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next Steps"}),": ",(0,i.jsx)(n.a,{href:"/getting-started/first-setup",children:"Complete basic configuration"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"cloudcontainer-deployment",children:"Cloud/Container Deployment"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best for"}),": Kubernetes, Docker Swarm, cloud-native deployments"]}),"\n",(0,i.jsx)(n.h3,{id:"docker-compose-example",children:"Docker Compose Example"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  rspamd:\n    image: rspamd/rspamd:latest\n    container_name: rspamd\n    ports:\n      - "11332:11332"  # Proxy worker\n      - "11334:11334"  # Web interface\n    volumes:\n      - ./config:/etc/rspamd/local.d\n      - ./data:/var/lib/rspamd\n      - ./logs:/var/log/rspamd\n    depends_on:\n      - redis\n      - unbound\n    restart: unless-stopped\n\n  redis:\n    image: redis:alpine\n    container_name: rspamd-redis\n    volumes:\n      - redis-data:/data\n    restart: unless-stopped\n\n  # Local recursive DNS resolver (recommended)\n  # Note: you can use any unbound image; this is an example. Ensure it is configured for recursion\n  unbound:\n    image: mvance/unbound:latest\n    container_name: rspamd-unbound\n    restart: unless-stopped\n    # Expose only to the compose network by default; no published ports are required\n    # You can mount custom configs if desired:\n    # volumes:\n    #   - ./unbound:/opt/unbound/etc/unbound\n\nvolumes:\n  redis-data:\n'})}),"\n",(0,i.jsx)(n.p,{children:"Deploy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,i.jsx)(n.h3,{id:"kubernetes-deployment",children:"Kubernetes Deployment"}),"\n",(0,i.jsxs)(n.p,{children:["Basic Kubernetes manifests available in our ",(0,i.jsx)(n.a,{href:"https://github.com/rspamd/rspamd-k8s-examples",children:"examples repository"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Production considerations:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use persistent volumes for ",(0,i.jsx)(n.code,{children:"/var/lib/rspamd"})," (statistics, learned data)"]}),"\n",(0,i.jsx)(n.li,{children:"Configure resource limits (CPU: 1-2 cores, Memory: 512MB-1GB per worker)"}),"\n",(0,i.jsxs)(n.li,{children:["Set up proper health checks (liveness: ",(0,i.jsx)(n.code,{children:"/ping"}),", readiness: ",(0,i.jsx)(n.code,{children:"/stat"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Use Redis cluster or sentinel for high availability"}),"\n",(0,i.jsxs)(n.li,{children:["Consider ",(0,i.jsx)(n.a,{href:"/developers/encryption",children:"HTTPCrypt encryption"})," for inter-pod communication"]}),"\n",(0,i.jsx)(n.li,{children:"Deploy local DNS resolver (Unbound, CoreDNS with recursion) as sidecar or daemonset"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"migration-focused-installation",children:"Migration-Focused Installation"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best for"}),": Migrating from SpamAssassin or other spam filtering solutions"]}),"\n",(0,i.jsx)(n.p,{children:"This approach allows you to run Rspamd in parallel with your existing solution for testing and gradual migration."}),"\n",(0,i.jsx)(n.h3,{id:"step-1-install-rspamd-package-method",children:"Step 1: Install Rspamd (Package Method)"}),"\n",(0,i.jsxs)(n.p,{children:["Follow the ",(0,i.jsx)(n.a,{href:"#production-package-installation",children:"package installation"})," steps above."]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-configure-for-parallel-testing",children:"Step 2: Configure for Parallel Testing"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"/etc/rspamd/local.d/worker-proxy.inc"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:"# Configure for testing mode - don't take actions yet\nmilter = yes;\ntimeout = 120s;\nupstream \"local\" {\n  default = yes;\n  self_scan = yes;\n}\n\n# Testing mode - only add headers, don't reject\nskip_process_errors = true;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-configure-actions-for-testing",children:"Step 3: Configure Actions for Testing"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"/etc/rspamd/local.d/actions.conf"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:"# Conservative thresholds for testing\nreject = 999;       # Don't reject anything during testing\nadd_header = 1;     # Add headers to everything for analysis\ngreylist = 999;     # Don't greylist during testing\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u2705 Success Criteria"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Rspamd adds ",(0,i.jsx)(n.code,{children:"X-Spam"})," headers without affecting mail delivery"]}),"\n",(0,i.jsx)(n.li,{children:"You can analyze header information to compare with existing solution"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next Steps"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/getting-started/migration-planning",children:"Migration planning guide"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/tutorials/migrate_sa",children:"SpamAssassin migration"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"testing-your-installation",children:"Testing Your Installation"}),"\n",(0,i.jsx)(n.p,{children:"Regardless of installation method, verify your setup:"}),"\n",(0,i.jsx)(n.h3,{id:"1-service-health-check",children:"1. Service Health Check"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check service status\nsudo systemctl status rspamd\n\n# Check listening ports\nsudo netstat -tlnp | grep rspamd\n# Should show ports 11332, 11333, 11334\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-test-message-scanning",children:"2. Test Message Scanning"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Test with rspamc command\necho "Test message" | rspamc\n'})}),"\n",(0,i.jsx)(n.p,{children:"Expected output should include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Symbol analysis results"}),"\n",(0,i.jsx)(n.li,{children:"Spam score"}),"\n",(0,i.jsx)(n.li,{children:"Action recommendation"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-web-interface-test",children:"3. Web Interface Test"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Set controller password:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Generate password\nrspamadm pw\n\n# Add to configuration\necho 'password = \"$2$your_hash_here\";' | sudo tee /etc/rspamd/local.d/worker-controller.inc\n\n# Restart Rspamd\nsudo systemctl restart rspamd\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Access ",(0,i.jsx)(n.a,{href:"http://your-server:11334",children:"http://your-server:11334"})]}),"\n",(0,i.jsx)(n.li,{children:"Log in and verify dashboard loads"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-integration-test",children:"4. Integration Test"}),"\n",(0,i.jsx)(n.p,{children:"Send a test email through your mail server and verify:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Email is processed by Rspamd"}),"\n",(0,i.jsx)(n.li,{children:"Appropriate headers are added"}),"\n",(0,i.jsx)(n.li,{children:"Actions are taken based on configuration"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-installation-issues",children:"Common Installation Issues"}),"\n",(0,i.jsx)(n.h3,{id:"permission-problems",children:"Permission Problems"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Fix ownership\nsudo chown -R _rspamd:_rspamd /var/lib/rspamd /var/log/rspamd\n\n# Fix SELinux (if applicable)\nsudo setsebool -P antivirus_can_scan_system 1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"port-conflicts",children:"Port Conflicts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check what's using the ports\nsudo lsof -i :11332\nsudo lsof -i :11334\n\n# Modify worker configuration if needed\n"})}),"\n",(0,i.jsx)(n.h3,{id:"redis-connection-issues",children:"Redis Connection Issues"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Test Redis connectivity\nredis-cli ping\n# Should return "PONG"\n\n# Check Rspamd Redis configuration\nsudo rspamc stat\n# Should show statistics if Redis is working\n'})}),"\n",(0,i.jsx)(n.h3,{id:"dns-resolver-problems-docker",children:"DNS Resolver Problems (Docker)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check what resolver the container sees\ndocker exec rspamd-test cat /etc/resolv.conf\n\n# If using a sidecar resolver, verify name resolution inside the container (Rspamd 3.13+)\ndocker exec rspamd-test getent hosts unbound || true\n\n# Inspect Rspamd DNS stats and errors\ndocker exec rspamd-test rspamc stat | grep -i dns || true\n"})}),"\n",(0,i.jsx)(n.p,{children:"Checklist:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure a local recursive resolver is available (host or sidecar)."}),"\n",(0,i.jsxs)(n.li,{children:["For Rspamd < 3.13, avoid hostnames in ",(0,i.jsx)(n.code,{children:"dns.nameserver"}),"; use IPs or rely on ",(0,i.jsx)(n.code,{children:"/etc/resolv.conf"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Avoid public resolvers for RBL traffic to prevent rate limiting and timeouts."}),"\n",(0,i.jsxs)(n.li,{children:["Keep ",(0,i.jsx)(n.code,{children:"dns.timeout"})," conservative (e.g., 1s\u20132s) and ensure network connectivity (UDP/53)."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Version note: Rspamd 3.13+ supports resolving hostnames in ",(0,i.jsx)(n.code,{children:"dns.nameserver"}),". Older versions only accept IP addresses or ",(0,i.jsx)(n.code,{children:"/etc/resolv.conf"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"post-installation-security-checklist",children:"Post-Installation Security Checklist"}),"\n",(0,i.jsx)(n.p,{children:"Before going live, ensure:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Controller access"}),": Bind to localhost or firewall port 11334"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:'# /etc/rspamd/local.d/worker-controller.inc\nbind_socket = "localhost:11334";  # Not 0.0.0.0!\npassword = "$2$...";  # Always set strong password\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File permissions"}),": Verify ownership"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo ls -la /etc/rspamd/local.d/\n# Should be readable by _rspamd user\n\nsudo ls -la /var/lib/rspamd/\n# Should be owned by _rspamd:_rspamd\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Firewall rules"}),": Block external access to Rspamd ports"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Allow only from MTA (example with ufw)\nsudo ufw allow from <mta-ip> to any port 11332 proto tcp\nsudo ufw deny 11332/tcp  # Block from elsewhere\nsudo ufw deny 11334/tcp  # Block WebUI from outside\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SELinux/AppArmor"}),": Configure if enabled"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# For SELinux\nsudo setsebool -P antivirus_can_scan_system 1\nsudo setsebool -P antivirus_use_jit 1\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Encryption"}),": For multi-server setups, configure ",(0,i.jsx)(n.a,{href:"/developers/encryption",children:"HTTPCrypt"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsx)(n.p,{children:"After successful installation:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/getting-started/first-setup",children:"Complete first setup"})})," - Configure basic spam filtering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/guides/configuration/fundamentals",children:"Learn configuration fundamentals"})})," - Understand what to customize"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/scenarios/",children:"Choose your scenario"})})," - Find guides specific to your use case"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/developers/architecture",children:"Architecture details"})})," - Understand how Rspamd works internally"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,i.jsx)(n.p,{children:"If you encounter issues:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/troubleshooting/common-problems",children:"Common problems"})})," - Solutions to frequent installation issues"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/support",children:"Community support"})})," - Get help from other users and developers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/configuration/",children:"Official documentation"})})," - Technical reference for advanced configuration"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);