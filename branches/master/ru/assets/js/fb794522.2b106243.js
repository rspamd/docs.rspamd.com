"use strict";(self.webpackChunkrspamd_docs=self.webpackChunkrspamd_docs||[]).push([[2006],{3784:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>m,frontMatter:()=>l,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"modules/dkim","title":"DKIM module","description":"This module verifies the authenticity of emails through the analysis of DKIM signatures.","source":"@site/docs/modules/dkim.md","sourceDirName":"modules","slug":"/modules/dkim","permalink":"/docs.rspamd.com/branches/master/ru/modules/dkim","draft":false,"unlisted":false,"editUrl":"https://github.com/rspamd/docs.rspamd.com/edit/master/docs/modules/dkim.md","tags":[],"version":"current","frontMatter":{"title":"DKIM module"},"sidebar":"docs","previous":{"title":"DCC module","permalink":"/docs.rspamd.com/branches/master/ru/modules/dcc"},"next":{"title":"DKIM signing module","permalink":"/docs.rspamd.com/branches/master/ru/modules/dkim_signing"}}');var t=i(4848),r=i(8453);const l={title:"DKIM module"},d="DKIM module",o={},a=[{value:"Supported features",id:"supported-features",level:2},{value:"Configuration",id:"configuration",level:2},{value:"DKIM signatures",id:"dkim-signatures",level:2}];function c(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"dkim-module",children:"DKIM module"})}),"\n",(0,t.jsxs)(s.p,{children:["This module verifies the authenticity of emails through the analysis of ",(0,t.jsx)(s.a,{href:"http://dkim.org/",children:"DKIM"})," signatures.\nThe presence of a valid DKIM signature indicates that the message has been trusted and signed by a recognized source.\nFor example, if a message comes from ",(0,t.jsx)(s.code,{children:"gmail.com"})," then a valid DKIM signature means that this message was definitely signed by ",(0,t.jsx)(s.code,{children:"gmail.com"})," (unless gmail.com private key has been compromised, which is not a likewise case)."]}),"\n",(0,t.jsx)(s.h2,{id:"supported-features",children:"Supported features"}),"\n",(0,t.jsxs)(s.p,{children:["Rspamd effectively handles a variety of DKIM signatures and message canonicalization techniques.\nHowever, a common challenge in DKIM is the handling of line endings, as different mail transfer agents (MTAs) may treat them differently, resulting in invalid signatures.\nTo mitigate this issue, Rspamd treats line endings as ",(0,t.jsx)(s.code,{children:"CR+LF"})," that which is compatible with the majority of DKIM implementations."]}),"\n",(0,t.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(s.p,{children:"DKIM module has several useful configuration options:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"symbol_allow"})," (",(0,t.jsx)(s.em,{children:"string"}),"): symbol to insert in case of allow (default: 'R_DKIM_ALLOW')"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"symbol_reject"})," (",(0,t.jsx)(s.em,{children:"string"}),"): symbol to insert (default: 'R_DKIM_REJECT')"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"symbol_tempfail"})," (",(0,t.jsx)(s.em,{children:"string"}),"): symbol to insert in case of temporary fail (default: 'R_DKIM_TEMPFAIL')"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"symbol_permfail"})," (",(0,t.jsx)(s.em,{children:"string"}),"): symbol to insert in case of permanent failure (default: 'R_DKIM_PERMFAIL')"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"symbol_na"})," (",(0,t.jsx)(s.em,{children:"string"}),"): symbol to insert in case of no signing (default: 'R_DKIM_NA')"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"whitelist"})," (",(0,t.jsx)(s.em,{children:"map"}),"): map of whitelisted networks"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"domains"})," (",(0,t.jsx)(s.em,{children:"map"}),"): map of domains to check"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"strict_multiplier"})," (",(0,t.jsx)(s.em,{children:"number"}),"): multiplier for strict domains"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"time_jitter"})," (",(0,t.jsx)(s.em,{children:"number"}),"): jitter in seconds to allow time diff while checking"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"trusted_only"})," (",(0,t.jsx)(s.em,{children:"boolean"}),"): check signatures only for domains in 'domains' map"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"dkim_cache_size"})," (",(0,t.jsx)(s.em,{children:"number"}),"): cache up to 1000 of the most recent DKIM records"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"dkim_cache_expire"})," (",(0,t.jsx)(s.em,{children:"time"}),"): default max expire for an element in this cache"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"skip_multi"})," (",(0,t.jsx)(s.em,{children:"boolean"}),"): skip DKIM check for messages with multiple signatures"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"dkim-signatures",children:"DKIM signatures"}),"\n",(0,t.jsxs)(s.p,{children:["Please use ",(0,t.jsx)(s.a,{href:"/modules/dkim_signing",children:"dkim_signing module"})," for DKIM signatures."]})]})}function m(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>l,x:()=>d});var n=i(6540);const t={},r=n.createContext(t);function l(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);