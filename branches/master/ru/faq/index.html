<!doctype html>
<html lang="ru" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-faq" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Frequently Asked Questions | Rspamd Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rspamd.com/docs.rspamd.com/branches/master/ru/faq"><meta data-rh="true" property="og:locale" content="ru"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Frequently Asked Questions | Rspamd Documentation"><meta data-rh="true" name="description" content="This FAQ covers common questions about Rspamd installation, configuration, and operation. For detailed guides, see the documentation index."><meta data-rh="true" property="og:description" content="This FAQ covers common questions about Rspamd installation, configuration, and operation. For detailed guides, see the documentation index."><link data-rh="true" rel="icon" href="/docs.rspamd.com/branches/master/ru/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rspamd.com/docs.rspamd.com/branches/master/ru/faq"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/master/faq" hreflang="en"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/master/ru/faq" hreflang="ru"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/master/faq" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Frequently Asked Questions","item":"https://rspamd.com/docs.rspamd.com/branches/master/ru/faq"}]}</script><link rel="alternate" type="application/rss+xml" href="/docs.rspamd.com/branches/master/ru/blog/rss.xml" title="Rspamd Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs.rspamd.com/branches/master/ru/blog/atom.xml" title="Rspamd Blog Atom Feed">




<script>window.SEARCH_BACKEND_CONFIG={endpoint:"/api"}</script>

<link rel="alternate" type="application/rss+xml" title="Rspamd Changelog RSS" href="/rss/changelog.xml">
<link rel="alternate" type="application/rss+xml" title="Rspamd Blog RSS" href="/blog/rss.xml">
<link rel="alternate" type="application/atom+xml" title="Rspamd Blog Atom" href="/blog/atom.xml"><link rel="stylesheet" href="/docs.rspamd.com/branches/master/ru/assets/css/styles.5200ff8d.css">
<script src="/docs.rspamd.com/branches/master/ru/assets/js/runtime~main.72ee80c0.js" defer="defer"></script>
<script src="/docs.rspamd.com/branches/master/ru/assets/js/main.544a51e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/docs.rspamd.com/branches/master/ru/img/rspamd_logo_black.png"><link rel="preload" as="image" href="/docs.rspamd.com/branches/master/ru/img/rspamd_logo_navbar.png"><div role="region" aria-label="Перейти к основному содержимому"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Перейти к основному содержимому</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Переключить навигационную панель" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.rspamd.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs.rspamd.com/branches/master/ru/img/rspamd_logo_black.png" alt="Rspamd Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs.rspamd.com/branches/master/ru/img/rspamd_logo_navbar.png" alt="Rspamd Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/master/ru/">Documentation</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/master/ru/about/">About</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/master/ru/tutorials/">Tutorials</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/master/ru/modules/">Modules</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/master/ru/other/usage_policy">Usage Policy</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/master/ru/faq">FAQ</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/master/ru/support">Support</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/master/ru/downloads">Downloads</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/master/ru/blog">Blog</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/master/ru/changelog">Changelog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div><div class="elasticsearch-search-container"><form class="elasticsearch-search-form"><div class="elasticsearch-search-input-container"><input type="text" placeholder="Search documentation..." class="elasticsearch-search-input" aria-label="Search documentation" value=""><div class="elasticsearch-search-shortcut"><span>⌘K</span></div></div></form></div></div><div class="navbar__item"><div id="font-size-control-mount"></div></div><a href="https://github.com/rspamd/rspamd" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Переключение между темным и светлым режимом (сейчас используется system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Прокрутка к началу" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/master/ru/"><span title="About Rspamd" class="linkLabel_WmDU">About Rspamd</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/master/ru/getting-started/"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs.rspamd.com/branches/master/ru/tutorials/migration"><span title="How-To Guides" class="categoryLinkLabel_W154">How-To Guides</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs.rspamd.com/branches/master/ru/faq"><span title="Frequently Asked Questions" class="linkLabel_WmDU">Frequently Asked Questions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/master/ru/support"><span title="Rspamd Support" class="linkLabel_WmDU">Rspamd Support</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/master/ru/downloads"><span title="Downloads" class="linkLabel_WmDU">Downloads</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/master/ru/configuration/"><span title="Configuration" class="categoryLinkLabel_W154">Configuration</span></a><button aria-label="Expand sidebar category &#x27;Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/master/ru/workers/"><span title="Workers" class="categoryLinkLabel_W154">Workers</span></a><button aria-label="Expand sidebar category &#x27;Workers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/master/ru/modules/"><span title="Modules" class="categoryLinkLabel_W154">Modules</span></a><button aria-label="Expand sidebar category &#x27;Modules&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/master/ru/lua/"><span title="Lua API" class="categoryLinkLabel_W154">Lua API</span></a><button aria-label="Expand sidebar category &#x27;Lua API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/master/ru/developers/architecture"><span title="Developers" class="categoryLinkLabel_W154">Developers</span></a><button aria-label="Expand sidebar category &#x27;Developers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/master/ru/administration/rspamadm/"><span title="Administration Tools" class="categoryLinkLabel_W154">Administration Tools</span></a><button aria-label="Expand sidebar category &#x27;Administration Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs.rspamd.com/branches/master/ru/other/gtube_patterns"><span title="Other" class="categoryLinkLabel_W154">Other</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/master/ru/blog"><span title="Blog" class="linkLabel_WmDU">Blog</span></a></li></ul></nav><button type="button" title="Свернуть сайдбар" aria-label="Свернуть сайдбар" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Навигационная цепочка текущей страницы"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Главная страница" class="breadcrumbs__link" href="/docs.rspamd.com/branches/master/ru/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Frequently Asked Questions</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Содержание этой страницы</button></div><div class="theme-doc-markdown markdown"><header><h1>Frequently Asked Questions</h1></header>
<p>This FAQ covers common questions about Rspamd installation, configuration, and operation. For detailed guides, see the <a class="" href="/docs.rspamd.com/branches/master/ru/">documentation index</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="quick-navigation">Quick Navigation<a href="#quick-navigation" class="hash-link" aria-label="Прямая ссылка на Quick Navigation" title="Прямая ссылка на Quick Navigation" translate="no">​</a></h2>

























































<table><thead><tr><th>Topic</th><th>Questions</th></tr></thead><tbody><tr><td><a href="#getting-help" class="">Getting Help</a></td><td>Support channels, bug reports</td></tr><tr><td><a href="#installation" class="">Installation</a></td><td>Versions, packages, builds</td></tr><tr><td><a href="#initial-setup" class="">Initial Setup</a></td><td>DNS resolver, first configuration</td></tr><tr><td><a href="#configuration" class="">Configuration</a></td><td>File structure, changing settings, paths</td></tr><tr><td><a href="#scores-and-actions" class="">Scores &amp; Actions</a></td><td>How scoring works, actions, thresholds</td></tr><tr><td><a href="#modules" class="">Modules</a></td><td>Enabling/disabling, whitelisting, DNSBL</td></tr><tr><td><a href="#statistics-and-learning" class="">Statistics &amp; Learning</a></td><td>Bayes, fuzzy hashes</td></tr><tr><td><a href="#troubleshooting" class="">Troubleshooting</a></td><td>Crashes, debugging, core dumps</td></tr><tr><td><a href="#administration" class="">Administration</a></td><td>Logs, Redis, backups</td></tr><tr><td><a href="#web-interface" class="">Web Interface</a></td><td>Passwords, proxy setup, cluster</td></tr><tr><td><a href="#mta-integration" class="">MTA Integration</a></td><td>Inbound vs outbound, milter</td></tr><tr><td><a href="#lua-development" class="">Lua Development</a></td><td>Writing rules, API usage</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="getting-help">Getting Help<a href="#getting-help" class="hash-link" aria-label="Прямая ссылка на Getting Help" title="Прямая ссылка на Getting Help" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="where-can-i-get-help-with-rspamd">Where can I get help with Rspamd?<a href="#where-can-i-get-help-with-rspamd" class="hash-link" aria-label="Прямая ссылка на Where can I get help with Rspamd?" title="Прямая ссылка на Where can I get help with Rspamd?" translate="no">​</a></h3>
<p>The primary support channels are:</p>
<ul>
<li class=""><strong><a href="https://lists.rspamd.com/" target="_blank" rel="noopener noreferrer" class="">Mailing list</a></strong> — For detailed questions and discussions</li>
<li class=""><strong><a href="https://t.me/rspamd" target="_blank" rel="noopener noreferrer" class="">Telegram group</a></strong> — Real-time chat support</li>
<li class=""><strong><a href="https://github.com/rspamd/rspamd/issues" target="_blank" rel="noopener noreferrer" class="">GitHub Issues</a></strong> — Bug reports and feature requests</li>
</ul>
<p>See the <a class="" href="/docs.rspamd.com/branches/master/ru/support">support page</a> for all available resources.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-report-bugs">How do I report bugs?<a href="#how-do-i-report-bugs" class="hash-link" aria-label="Прямая ссылка на How do I report bugs?" title="Прямая ссылка на How do I report bugs?" translate="no">​</a></h3>
<p>For <strong>crashes</strong>: Obtain a core file and ASAN log (see <a href="#troubleshooting" class="">Troubleshooting</a>) before reporting.</p>
<p>For <strong>rule issues</strong>: Include a <strong>message sample</strong> that triggers the problem. You may redact irrelevant headers and content, but:</p>
<ul>
<li class="">For SPF issues: Include SMTP From (or HELO) and sender IP</li>
<li class="">For DKIM/ARC/statistics: Preserve all headers and content</li>
</ul>
<p>Bug reports without message samples will not be considered unless the bug is trivial or includes a patch.</p>
<p><strong>Where to report:</strong></p>
<ul>
<li class="">Rspamd core issues: <a href="https://github.com/rspamd/rspamd/issues" target="_blank" rel="noopener noreferrer" class="">rspamd/rspamd</a></li>
<li class="">Documentation issues: <a href="https://github.com/rspamd/rspamd.com/issues" target="_blank" rel="noopener noreferrer" class="">rspamd/rspamd.com</a></li>
</ul>
<p>We prefer patches/pull requests over plain bug reports.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-is-rspamd-spelled">How is &quot;Rspamd&quot; spelled?<a href="#how-is-rspamd-spelled" class="hash-link" aria-label="Прямая ссылка на How is &quot;Rspamd&quot; spelled?" title="Прямая ссылка на How is &quot;Rspamd&quot; spelled?" translate="no">​</a></h3>
<p>&quot;Rspamd&quot; as a project is capitalized. The process/binary name <code>rspamd</code> is lowercase.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Прямая ссылка на Installation" title="Прямая ссылка на Installation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-versions-are-supported">What versions are supported?<a href="#what-versions-are-supported" class="hash-link" aria-label="Прямая ссылка на What versions are supported?" title="Прямая ссылка на What versions are supported?" translate="no">​</a></h3>
<p>Rspamd maintains two branches:</p>
<ul>
<li class=""><strong>Stable branch</strong> (<code>rspamd-&lt;version&gt;</code>) — Recommended for production</li>
<li class=""><strong>Development branch</strong> (<code>master</code>) — Latest features, may have regressions</li>
</ul>
<p>When a new major release becomes stable, support for the previous stable branch ends. We do not support old releases.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="should-i-use-experimental-packages">Should I use experimental packages?<a href="#should-i-use-experimental-packages" class="hash-link" aria-label="Прямая ссылка на Should I use experimental packages?" title="Прямая ссылка на Should I use experimental packages?" translate="no">​</a></h3>
<p>Experimental packages are built from <code>master</code> and lack detailed changelogs. They include a git hash for tracking changes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git log &lt;old_hash&gt;..&lt;new_hash&gt;</span><br></span></code></pre></div></div>
<p><strong>Consider experimental packages when:</strong></p>
<ul>
<li class="">You have a significant bug that&#x27;s fixed in <code>master</code></li>
<li class="">You&#x27;re running a small system where you can manually downgrade if needed</li>
<li class="">You can test using <a class="" href="/docs.rspamd.com/branches/master/ru/workers/rspamd_proxy">proxy mirroring</a> without affecting production</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-are-official-packages-built">How are official packages built?<a href="#how-are-official-packages-built" class="hash-link" aria-label="Прямая ссылка на How are official packages built?" title="Прямая ссылка на How are official packages built?" translate="no">​</a></h3>
<p>Official packages from rspamd.com include these optimizations:</p>

























<table><thead><tr><th>Feature</th><th>Benefit</th></tr></thead><tbody><tr><td>Link Time Optimization (LTO)</td><td>Better performance</td></tr><tr><td>Bundled LuaJIT 2.1 beta</td><td>Up to 30% faster than stable LuaJIT</td></tr><tr><td>jemalloc</td><td>Optimized memory allocation</td></tr><tr><td>Hyperscan/Vectorscan</td><td>Fast regex matching</td></tr></tbody></table>
<p>Debug symbols are available in separate packages (<code>rspamd-dbg</code> for DEB, <code>rspamd-debuginfo</code> for RPM).</p>
<p>For package installation, see the <a class="" href="/docs.rspamd.com/branches/master/ru/downloads">Downloads page</a>.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="initial-setup">Initial Setup<a href="#initial-setup" class="hash-link" aria-label="Прямая ссылка на Initial Setup" title="Прямая ссылка на Initial Setup" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-configure-dns-resolution">How do I configure DNS resolution?<a href="#how-do-i-configure-dns-resolution" class="hash-link" aria-label="Прямая ссылка на How do I configure DNS resolution?" title="Прямая ссылка на How do I configure DNS resolution?" translate="no">​</a></h3>
<p><strong>This is critical.</strong> DNS is essential for spam filtering (RBLs, DKIM, SPF, etc.). Poor DNS configuration can make Rspamd non-functional.</p>
<p><strong>Requirements:</strong></p>
<ol>
<li class="">Use a <strong>local recursive resolver</strong> (Unbound recommended)</li>
<li class="">Do not rely on public DNS (Google, Cloudflare) — they rate-limit RBL queries</li>
<li class="">Your ISP&#x27;s resolver may return incorrect results (browser redirects instead of NXDOMAIN)</li>
</ol>
<p><strong>Configuration:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># /etc/rspamd/local.d/options.inc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dns {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nameserver = [&quot;127.0.0.1&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>With fallback:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dns {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nameserver = &quot;master-slave:127.0.0.1,8.8.8.8&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>For large-scale deployments with multiple resolvers:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dns {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nameserver = &quot;hash:10.0.0.1,10.1.0.1,10.3.0.1&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Important:</strong> Rspamd does not use system resolver libraries. Changes require restart. The <code>/etc/hosts</code> file is not read.</p>
<p>See <a href="https://wiki.archlinux.org/index.php/unbound" target="_blank" rel="noopener noreferrer" class="">Unbound setup guide</a> for resolver installation.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Прямая ссылка на Configuration" title="Прямая ссылка на Configuration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-view-my-current-configuration">How do I view my current configuration?<a href="#how-do-i-view-my-current-configuration" class="hash-link" aria-label="Прямая ссылка на How do I view my current configuration?" title="Прямая ссылка на How do I view my current configuration?" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump          # Full configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump -j       # JSON format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump -c       # Preserve comments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump multimap # Specific section</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump worker   # Worker configuration</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-are-the-configuration-directories">What are the configuration directories?<a href="#what-are-the-configuration-directories" class="hash-link" aria-label="Прямая ссылка на What are the configuration directories?" title="Прямая ссылка на What are the configuration directories?" translate="no">​</a></h3>


















































<table><thead><tr><th>Variable</th><th>Default</th><th>Purpose</th></tr></thead><tbody><tr><td><code>CONFDIR</code></td><td><code>/etc/rspamd</code></td><td>Main configuration</td></tr><tr><td><code>LOCAL_CONFDIR</code></td><td><code>/etc/rspamd</code></td><td>User configuration</td></tr><tr><td><code>DBDIR</code></td><td><code>/var/lib/rspamd</code></td><td>Runtime data (statistics, caches)</td></tr><tr><td><code>RUNDIR</code></td><td><code>/var/run/rspamd</code></td><td>PID files</td></tr><tr><td><code>LOGDIR</code></td><td><code>/var/log/rspamd</code></td><td>Log files</td></tr><tr><td><code>SHAREDIR</code></td><td><code>/usr/share/rspamd</code></td><td>Shared files</td></tr><tr><td><code>PLUGINSDIR</code></td><td><code>${SHAREDIR}/plugins</code></td><td>Lua plugins</td></tr><tr><td><code>LUALIBDIR</code></td><td><code>${SHAREDIR}/lualib</code></td><td>Shared Lua libraries</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-the-difference-between-locald-and-overrided">What is the difference between local.d and override.d?<a href="#what-is-the-difference-between-locald-and-overrided" class="hash-link" aria-label="Прямая ссылка на What is the difference between local.d and override.d?" title="Прямая ссылка на What is the difference between local.d and override.d?" translate="no">​</a></h3>
<p>Both directories extend default configuration without editing core files:</p>




















<table><thead><tr><th>Directory</th><th>Priority</th><th>Behavior</th></tr></thead><tbody><tr><td><code>local.d/</code></td><td>1</td><td><strong>Merges</strong> with defaults. Collections and lists are combined.</td></tr><tr><td><code>override.d/</code></td><td>10</td><td><strong>Replaces</strong> defaults. Entire sections are overwritten.</td></tr></tbody></table>
<p><strong>Example — Original config:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option1 = &quot;value&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option2 = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>local.d/example.conf:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">option2 = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">option3 = 1.0;</span><br></span></code></pre></div></div>
<p><strong>Result with local.d:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option1 = &quot;value&quot;;   # From default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option2 = false;     # From local.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option3 = 1.0;       # From local.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Result with override.d:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option2 = false;     # Only override.d content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option3 = 1.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-isnt-my-configuration-working">Why isn&#x27;t my configuration working?<a href="#why-isnt-my-configuration-working" class="hash-link" aria-label="Прямая ссылка на Why isn&#x27;t my configuration working?" title="Прямая ссылка на Why isn&#x27;t my configuration working?" translate="no">​</a></h3>
<p><strong>Common mistake — Extra nesting:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># WRONG - local.d/dkim_signing.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dkim_signing {    # Don&#x27;t add this wrapper!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  domain { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># CORRECT - local.d/dkim_signing.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domain { ... }</span><br></span></code></pre></div></div>
<p>Rspamd reports nesting issues in logs and via <code>rspamadm configtest</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-change-a-symbols-score">How do I change a symbol&#x27;s score?<a href="#how-do-i-change-a-symbols-score" class="hash-link" aria-label="Прямая ссылка на How do I change a symbol&#x27;s score?" title="Прямая ссылка на How do I change a symbol&#x27;s score?" translate="no">​</a></h3>
<p><strong>If using WebUI:</strong> The WebUI stores scores in <code>$DBDIR/rspamd_dynamic</code>. These take precedence over config files. Edit or remove this file to use config-based scores.</p>
<p><strong>Via configuration:</strong> Edit <code>local.d/groups.conf</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">symbols {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SOME_SYMBOL&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    weight = 1.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Or for a specific group (e.g., <code>local.d/rbl_group.conf</code>):</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">symbols {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;RBL_CUSTOM&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    weight = 5.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Verify with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump -g        # Show all groups and scores</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump -g -j | jq  # JSON for processing</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-list-enabled-plugins">How do I list enabled plugins?<a href="#how-do-i-list-enabled-plugins" class="hash-link" aria-label="Прямая ссылка на How do I list enabled plugins?" title="Прямая ссылка на How do I list enabled plugins?" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump -m        # List modules with status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configwizard         # Interactive configuration</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-disable-a-module">How do I disable a module?<a href="#how-do-i-disable-a-module" class="hash-link" aria-label="Прямая ссылка на How do I disable a module?" title="Прямая ссылка на How do I disable a module?" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># local.d/modulename.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled = false;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-disable-a-specific-rule">How do I disable a specific rule?<a href="#how-do-i-disable-a-specific-rule" class="hash-link" aria-label="Прямая ссылка на How do I disable a specific rule?" title="Прямая ссылка на How do I disable a specific rule?" translate="no">​</a></h3>
<p>Add a condition in <code>/etc/rspamd/rspamd.local.lua</code>:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamd_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">add_condition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;SOME_SYMBOL&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(222, 71, 0)">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(222, 71, 0)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(222, 71, 0)">false</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(222, 71, 0)">end</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Or use <a class="" href="/docs.rspamd.com/branches/master/ru/configuration/settings">settings</a> for dynamic control.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="scores-and-actions">Scores and Actions<a href="#scores-and-actions" class="hash-link" aria-label="Прямая ссылка на Scores and Actions" title="Прямая ссылка на Scores and Actions" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-actions-does-rspamd-support">What actions does Rspamd support?<a href="#what-actions-does-rspamd-support" class="hash-link" aria-label="Прямая ссылка на What actions does Rspamd support?" title="Прямая ссылка на What actions does Rspamd support?" translate="no">​</a></h3>





































<table><thead><tr><th>Action</th><th>Description</th></tr></thead><tbody><tr><td><code>no action</code></td><td>Message passes</td></tr><tr><td><code>add header</code></td><td>Add spam headers</td></tr><tr><td><code>rewrite subject</code></td><td>Modify subject line</td></tr><tr><td><code>soft reject</code></td><td>Temporary rejection (greylisting, ratelimit)</td></tr><tr><td><code>reject</code></td><td>Permanent rejection</td></tr><tr><td><code>quarantine</code></td><td>Move to quarantine (requires MTA support)</td></tr><tr><td><code>discard</code></td><td>Silently drop message</td></tr></tbody></table>
<p>Configure thresholds in <code>local.d/actions.conf</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">reject = 15;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_header = 6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">greylist = 4;</span><br></span></code></pre></div></div>
<p><strong>Important:</strong> Always use the <strong>action</strong>, not the score, to decide message handling. Some modules set actions directly regardless of score.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-is-my-score-zero-but-the-message-is-rejected">Why is my score zero but the message is rejected?<a href="#why-is-my-score-zero-but-the-message-is-rejected" class="hash-link" aria-label="Прямая ссылка на Why is my score zero but the message is rejected?" title="Прямая ссылка на Why is my score zero but the message is rejected?" translate="no">​</a></h3>
<p>Some modules set <strong>passthrough actions</strong> that bypass scoring:</p>
<ul>
<li class=""><code>greylist</code> — Sets <code>soft reject</code> for greylisting</li>
<li class=""><code>ratelimit</code> — Sets <code>soft reject</code> when limit reached</li>
<li class=""><code>antivirus</code> — Can set actions for virus detection</li>
<li class=""><code>multimap</code> — Sets actions for matched maps</li>
<li class=""><code>force_actions</code> — Explicit passthrough actions</li>
</ul>
<p>Check logs for <code>forced:</code> entries explaining the action.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-do-i-get-different-scores-for-the-same-message">Why do I get different scores for the same message?<a href="#why-do-i-get-different-scores-for-the-same-message" class="hash-link" aria-label="Прямая ссылка на Why do I get different scores for the same message?" title="Прямая ссылка на Why do I get different scores for the same message?" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>Early rejection:</strong> Once a message hits <code>reject</code> threshold, some checks stop to save resources. Use <code>Pass: all</code> header (or <code>rspamc -p</code>) to force all checks.</p>
</li>
<li class="">
<p><strong>Timeouts:</strong> Async rules may not complete before task timeout. Check:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm confighelp options.dns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm confighelp workers.normal.task_timeout</span><br></span></code></pre></div></div>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-do-some-symbols-have-variable-scores">Why do some symbols have variable scores?<a href="#why-do-some-symbols-have-variable-scores" class="hash-link" aria-label="Прямая ссылка на Why do some symbols have variable scores?" title="Прямая ссылка на Why do some symbols have variable scores?" translate="no">​</a></h3>
<p>Rspamd supports <strong>dynamic scoring</strong>. The symbol score is multiplied by a confidence factor (0-1):</p>
<ul>
<li class="">Bayes: Score scales with probability (50% → ~0, 90% → ~0.95, 100% → 1.0)</li>
<li class="">Fuzzy: Score scales with match weight</li>
<li class="">Phishing: Score varies by confidence</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="modules">Modules<a href="#modules" class="hash-link" aria-label="Прямая ссылка на Modules" title="Прямая ссылка на Modules" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-whitelist-senders-or-skip-checks">How do I whitelist senders or skip checks?<a href="#how-do-i-whitelist-senders-or-skip-checks" class="hash-link" aria-label="Прямая ссылка на How do I whitelist senders or skip checks?" title="Прямая ссылка на How do I whitelist senders or skip checks?" translate="no">​</a></h3>
<p>Several options:</p>
<ol>
<li class=""><strong><a class="" href="/docs.rspamd.com/branches/master/ru/modules/whitelist">Whitelist module</a></strong> — For SPF/DKIM/DMARC-based whitelisting</li>
<li class=""><strong><a class="" href="/docs.rspamd.com/branches/master/ru/modules/multimap">Multimap module</a></strong> — Flexible list-based checks and actions</li>
<li class=""><strong><a class="" href="/docs.rspamd.com/branches/master/ru/configuration/settings">Settings</a></strong> — Disable rules for specific conditions:</li>
</ol>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># rspamd.conf.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">settings {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  whitelist_authenticated {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    authenticated = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apply {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      symbols_enabled = [&quot;DKIM_SIGNED&quot;, &quot;ARC_SIGNED&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      flags = [&quot;skip_process&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-blacklist-file-extensions">How do I blacklist file extensions?<a href="#how-do-i-blacklist-file-extensions" class="hash-link" aria-label="Прямая ссылка на How do I blacklist file extensions?" title="Прямая ссылка на How do I blacklist file extensions?" translate="no">​</a></h3>
<p>Using multimap in <code>local.d/multimap.conf</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">file_extension_blacklist {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = &quot;filename&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter = &quot;extension&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  map = &quot;${LOCAL_CONFDIR}/local.d/blocked_extensions.map&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  symbol = &quot;BLOCKED_EXTENSION&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prefilter = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  action = &quot;reject&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message = &quot;Attachment type not allowed&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-does-uribl_blocked-mean">What does URIBL_BLOCKED mean?<a href="#what-does-uribl_blocked-mean" class="hash-link" aria-label="Прямая ссылка на What does URIBL_BLOCKED mean?" title="Прямая ссылка на What does URIBL_BLOCKED mean?" translate="no">​</a></h3>
<p>You&#x27;ve exceeded the free query limit for SURBL/URIBL services. This happens when:</p>
<ol>
<li class="">Using public DNS (Google, Cloudflare) — they aggregate queries and hit limits</li>
<li class="">High mail volume exceeding free tier</li>
</ol>
<p><strong>Solutions:</strong></p>
<ul>
<li class="">Use a local recursive resolver</li>
<li class="">Purchase a <a href="http://www.surbl.org/df" target="_blank" rel="noopener noreferrer" class="">commercial subscription</a></li>
</ul>
<p>The symbol has zero weight and doesn&#x27;t affect scoring.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-do-i-see-monitored-errors">Why do I see &quot;monitored&quot; errors?<a href="#why-do-i-see-monitored-errors" class="hash-link" aria-label="Прямая ссылка на Why do I see &quot;monitored&quot; errors?" title="Прямая ссылка на Why do I see &quot;monitored&quot; errors?" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DNS reply returned &#x27;no error&#x27; for multi.uribl.com while &#x27;no records with this name&#x27; was expected</span><br></span></code></pre></div></div>
<p>Rspamd monitors DNS lists by querying addresses that should return NXDOMAIN. Errors indicate:</p>
<ol>
<li class=""><strong>Rate limiting</strong> — You&#x27;re using public DNS or exceeded free limits</li>
<li class=""><strong>Broken RBL</strong> — The list is returning false positives</li>
<li class=""><strong>DNS hijacking</strong> — Your resolver returns redirects instead of NXDOMAIN</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-arent-fuzzy-checks-working">Why aren&#x27;t fuzzy checks working?<a href="#why-arent-fuzzy-checks-working" class="hash-link" aria-label="Прямая ссылка на Why aren&#x27;t fuzzy checks working?" title="Прямая ссылка на Why aren&#x27;t fuzzy checks working?" translate="no">​</a></h3>
<p>Fuzzy storage uses <strong>UDP port 1335</strong> (not TCP, not TLS).</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm fuzzyping   # Test connectivity</span><br></span></code></pre></div></div>
<p>If you see packet loss, check your firewall allows outbound UDP to port 1335.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="statistics-and-learning">Statistics and Learning<a href="#statistics-and-learning" class="hash-link" aria-label="Прямая ссылка на Statistics and Learning" title="Прямая ссылка на Statistics and Learning" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="which-backend-should-i-use-for-statistics">Which backend should I use for statistics?<a href="#which-backend-should-i-use-for-statistics" class="hash-link" aria-label="Прямая ссылка на Which backend should I use for statistics?" title="Прямая ссылка на Which backend should I use for statistics?" translate="no">​</a></h3>
<p><strong>Redis is recommended</strong> for both statistics and fuzzy storage.</p>
<p>Convert from SQLite:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --spam-db /var/lib/rspamd/bayes.spam.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ham-db /var/lib/rspamd/bayes.ham.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --symbol-spam BAYES_SPAM \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --symbol-ham BAYES_HAM \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h localhost</span><br></span></code></pre></div></div>
<p>Configure in <code>local.d/classifier-bayes.conf</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">backend = &quot;redis&quot;;</span><br></span></code></pre></div></div>
<p>See <a class="" href="/docs.rspamd.com/branches/master/ru/configuration/statistic">Statistics configuration</a> for details.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-train-the-bayes-classifier">How do I train the Bayes classifier?<a href="#how-do-i-train-the-bayes-classifier" class="hash-link" aria-label="Прямая ссылка на How do I train the Bayes classifier?" title="Прямая ссылка на How do I train the Bayes classifier?" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamc learn_spam message.eml   # Train as spam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc learn_ham message.eml    # Train as ham</span><br></span></code></pre></div></div>
<p>Requires <code>enable</code> level access (check <code>enable_password</code> or <code>secure_ip</code>).</p>
<p>For automatic learning, see <a class="" href="/docs.rspamd.com/branches/master/ru/configuration/statistic#autolearning">Autolearning documentation</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="can-i-retrain-messages-for-fuzzy-storage">Can I retrain messages for fuzzy storage?<a href="#can-i-retrain-messages-for-fuzzy-storage" class="hash-link" aria-label="Прямая ссылка на Can I retrain messages for fuzzy storage?" title="Прямая ссылка на Can I retrain messages for fuzzy storage?" translate="no">​</a></h3>
<p>To move a hash between lists:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamc -f 1 fuzzy_del message.eml    # Remove from list 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc -f 2 -w 10 fuzzy_add message.eml  # Add to list 2</span><br></span></code></pre></div></div>
<p>For statistics, Rspamd handles relearning automatically via the learn cache.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-does-inv_chi_square-exp-overflow-mean">What does &quot;inv_chi_square: exp overflow&quot; mean?<a href="#what-does-inv_chi_square-exp-overflow-mean" class="hash-link" aria-label="Прямая ссылка на What does &quot;inv_chi_square: exp overflow&quot; mean?" title="Прямая ссылка на What does &quot;inv_chi_square: exp overflow&quot; mean?" translate="no">​</a></h3>
<p>One statistics class is overloaded while the other is underlearned. Train more messages from both spam and ham classes to balance the classifier.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Прямая ссылка на Troubleshooting" title="Прямая ссылка на Troubleshooting" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-debug-a-module">How do I debug a module?<a href="#how-do-i-debug-a-module" class="hash-link" aria-label="Прямая ссылка на How do I debug a module?" title="Прямая ссылка на How do I debug a module?" translate="no">​</a></h3>
<p>Enable debug logging in <code>local.d/logging.inc</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">debug_modules = [&quot;module_name&quot;];</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-get-a-core-dump-after-a-crash">How do I get a core dump after a crash?<a href="#how-do-i-get-a-core-dump-after-a-crash" class="hash-link" aria-label="Прямая ссылка на How do I get a core dump after a crash?" title="Прямая ссылка на How do I get a core dump after a crash?" translate="no">​</a></h3>
<p><strong>1. Create core directory:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir /coreland</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 1777 /coreland</span><br></span></code></pre></div></div>
<p><strong>2. Configure core pattern:</strong></p>
<p>Linux:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sysctl kernel.core_pattern=/coreland/%e-%p.core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl kernel.core_uses_pid=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl fs.suid_dumpable=2</span><br></span></code></pre></div></div>
<p>FreeBSD:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sysctl kern.corefile=/coreland/%N-%P.core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl kern.sugid_coredump=1</span><br></span></code></pre></div></div>
<p><strong>3. Enable systemd core dumps</strong> (if applicable):</p>
<p>Edit <code>/etc/systemd/system.conf</code>:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DefaultLimitCORE=infinity</span><br></span></code></pre></div></div>
<p>Then:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reexec</span><br></span></code></pre></div></div>
<p><strong>4. Install debug symbols:</strong></p>
<ul>
<li class="">DEB: <code>apt install rspamd-dbg</code></li>
<li class="">RPM: <code>dnf install rspamd-debuginfo</code></li>
</ul>
<p><strong>5. Test setup:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kill -s 4 $(pgrep rspamd | head -1)  # Send SIGILL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls /coreland/  # Check for core file</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-use-asan-packages-for-debugging">How do I use ASAN packages for debugging?<a href="#how-do-i-use-asan-packages-for-debugging" class="hash-link" aria-label="Прямая ссылка на How do I use ASAN packages for debugging?" title="Прямая ссылка на How do I use ASAN packages for debugging?" translate="no">​</a></h3>
<p>ASAN (AddressSanitizer) packages detect memory errors. Install <code>rspamd-asan</code> instead of <code>rspamd</code>.</p>
<p>Configure ASAN logging:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export ASAN_OPTIONS=&quot;log_path=/tmp/rspamd-asan&quot;</span><br></span></code></pre></div></div>
<p>Or in systemd (<code>systemctl edit rspamd</code>):</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment=&quot;ASAN_OPTIONS=log_path=/tmp/rspamd-asan&quot;</span><br></span></code></pre></div></div>
<p>After a crash, collect both core file and <code>/tmp/rspamd-asan.&lt;pid&gt;</code> for bug reports.</p>
<p>See <a class="" href="/docs.rspamd.com/branches/master/ru/downloads#asan-packages">Downloads page</a> for more details.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-analyze-a-core-file">How do I analyze a core file?<a href="#how-do-i-analyze-a-core-file" class="hash-link" aria-label="Прямая ссылка на How do I analyze a core file?" title="Прямая ссылка на How do I analyze a core file?" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gdb $(which rspamd) -c /coreland/rspamd.core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) bt full</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Or with lldb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lldb $(which rspamd) -c /coreland/rspamd.core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(lldb) bt all</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-limit-core-file-disk-usage">How do I limit core file disk usage?<a href="#how-do-i-limit-core-file-disk-usage" class="hash-link" aria-label="Прямая ссылка на How do I limit core file disk usage?" title="Прямая ссылка на How do I limit core file disk usage?" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># local.d/options.inc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cores_dir = &quot;/coreland/&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_cores_size = 1G;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="administration">Administration<a href="#administration" class="hash-link" aria-label="Прямая ссылка на Administration" title="Прямая ссылка на Administration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-read-rspamd-logs">How do I read Rspamd logs?<a href="#how-do-i-read-rspamd-logs" class="hash-link" aria-label="Прямая ссылка на How do I read Rspamd logs?" title="Прямая ссылка на How do I read Rspamd logs?" translate="no">​</a></h3>
<p>Logs include a <strong>tag</strong> (e.g., <code>&lt;b120f6&gt;</code>) linking related entries:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grep &#x27;b120f6&#x27; /var/log/rspamd/rspamd.log</span><br></span></code></pre></div></div>
<p>The final <code>rspamd_task_write_log</code> line shows the complete result.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-customize-log-format">How do I customize log format?<a href="#how-do-i-customize-log-format" class="hash-link" aria-label="Прямая ссылка на How do I customize log format?" title="Прямая ссылка на How do I customize log format?" translate="no">​</a></h3>
<p>In <code>local.d/logging.inc</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">log_format =&lt;&lt;EOD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id: &lt;$mid&gt;, ip: [$ip], from: &lt;$smtp_from&gt;, (default: $is_spam ($action): [$scores] [$symbols_scores]), len: $len, time: $time_real</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOD</span><br></span></code></pre></div></div>
<p>See <a class="" href="/docs.rspamd.com/branches/master/ru/configuration/logging">Logging documentation</a> for all variables.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-redis-keys-does-rspamd-use">What Redis keys does Rspamd use?<a href="#what-redis-keys-does-rspamd-use" class="hash-link" aria-label="Прямая ссылка на What Redis keys does Rspamd use?" title="Прямая ссылка на What Redis keys does Rspamd use?" translate="no">​</a></h3>

























<table><thead><tr><th>Module</th><th>Key Pattern</th></tr></thead><tbody><tr><td>Statistics</td><td><code>&lt;SYMBOL&gt;&lt;username&gt;</code></td></tr><tr><td>Ratelimit</td><td>Per-limit keys (see <a class="" href="/docs.rspamd.com/branches/master/ru/modules/ratelimit">ratelimit docs</a>)</td></tr><tr><td>DMARC</td><td>Per-domain aggregation keys</td></tr><tr><td>Reputation</td><td>IP/domain reputation keys</td></tr></tbody></table>
<p>Set <code>maxmemory</code> limits and consider separate Redis instances for different data types.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-delete-redis-keys-by-pattern">How do I delete Redis keys by pattern?<a href="#how-do-i-delete-redis-keys-by-pattern" class="hash-link" aria-label="Прямая ссылка на How do I delete Redis keys by pattern?" title="Прямая ссылка на How do I delete Redis keys by pattern?" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">redis-cli --scan --pattern &#x27;rn_SHORT_*&#x27; | xargs redis-cli unlink</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-use-unix-sockets-with-redis">How do I use Unix sockets with Redis?<a href="#how-do-i-use-unix-sockets-with-redis" class="hash-link" aria-label="Прямая ссылка на How do I use Unix sockets with Redis?" title="Прямая ссылка на How do I use Unix sockets with Redis?" translate="no">​</a></h3>
<p><strong>Redis config</strong> (<code>/etc/redis/rspamd.conf</code>):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bind 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">port 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unixsocket /var/run/redis/rspamd.sock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unixsocketperm 770</span><br></span></code></pre></div></div>
<p><strong>Rspamd config</strong> (<code>local.d/redis.conf</code>):</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">servers = &quot;/var/run/redis/rspamd.sock&quot;;</span><br></span></code></pre></div></div>
<p>Add rspamd user to redis group:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">usermod -a -G redis _rspamd</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-should-i-back-up">What should I back up?<a href="#what-should-i-back-up" class="hash-link" aria-label="Прямая ссылка на What should I back up?" title="Прямая ссылка на What should I back up?" translate="no">​</a></h3>

























<table><thead><tr><th>Data</th><th>Location</th></tr></thead><tbody><tr><td>Configuration</td><td><code>/etc/rspamd/</code></td></tr><tr><td>Runtime data</td><td><code>/var/lib/rspamd/</code> (exclude <code>*.hs</code>, <code>*.hsmp</code>, <code>*.map</code> caches)</td></tr><tr><td>Redis config</td><td><code>/etc/redis/redis.conf</code></td></tr><tr><td>Redis data</td><td><code>/var/lib/redis/dump.rdb</code> (safe to copy while running)</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-do-i-get-errors-after-migrating-to-different-hardware">Why do I get errors after migrating to different hardware?<a href="#why-do-i-get-errors-after-migrating-to-different-hardware" class="hash-link" aria-label="Прямая ссылка на Why do I get errors after migrating to different hardware?" title="Прямая ссылка на Why do I get errors after migrating to different hardware?" translate="no">​</a></h3>
<p><strong>Hyperscan caches</strong> are platform-specific. Delete <code>*.hs</code> and <code>*.hsmp</code> files from <code>/var/lib/rspamd/</code>.</p>
<p><strong>RRD files</strong> cannot transfer between architectures. Export and reimport:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># On source system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rrdtool dump rspamd.rrd &gt; rspamd.rrd.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># On target system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rrdtool restore -f rspamd.rrd.xml rspamd.rrd</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="web-interface">Web Interface<a href="#web-interface" class="hash-link" aria-label="Прямая ссылка на Web Interface" title="Прямая ссылка на Web Interface" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-are-the-password-types">What are the password types?<a href="#what-are-the-password-types" class="hash-link" aria-label="Прямая ссылка на What are the password types?" title="Прямая ссылка на What are the password types?" translate="no">​</a></h3>





















<table><thead><tr><th>Setting</th><th>Purpose</th></tr></thead><tbody><tr><td><code>password</code></td><td>Read-only access</td></tr><tr><td><code>enable_password</code></td><td>Full access (learning, configuration)</td></tr><tr><td><code>secure_ip</code></td><td>IPs with full access without password</td></tr></tbody></table>
<p>If only <code>password</code> is set, it grants full access.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-create-a-secure-password">How do I create a secure password?<a href="#how-do-i-create-a-secure-password" class="hash-link" aria-label="Прямая ссылка на How do I create a secure password?" title="Прямая ссылка на How do I create a secure password?" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm pw</span><br></span></code></pre></div></div>
<p>This generates a PBKDF2/Catena hash. Add to <code>local.d/worker-controller.inc</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">password = &quot;$2$...generated_hash...&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable_password = &quot;$2$...another_hash...&quot;;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-run-the-webui-behind-a-proxy">How do I run the WebUI behind a proxy?<a href="#how-do-i-run-the-webui-behind-a-proxy" class="hash-link" aria-label="Прямая ссылка на How do I run the WebUI behind a proxy?" title="Прямая ссылка на How do I run the WebUI behind a proxy?" translate="no">​</a></h3>
<p><strong>Nginx:</strong></p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:rgb(222, 71, 0)">location</span><span class="token directive"> /rspamd/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token directive keyword" style="color:rgb(222, 71, 0)">proxy_pass</span><span class="token directive"> http://localhost:11334/</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token directive keyword" style="color:rgb(222, 71, 0)">proxy_set_header</span><span class="token directive"> Host </span><span class="token directive variable" style="color:#36acaa">$host</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token directive keyword" style="color:rgb(222, 71, 0)">proxy_set_header</span><span class="token directive"> X-Real-IP </span><span class="token directive variable" style="color:#36acaa">$remote_addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token directive keyword" style="color:rgb(222, 71, 0)">proxy_set_header</span><span class="token directive"> X-Forwarded-For </span><span class="token directive string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Apache:</strong></p>
<div class="language-apache codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apache codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RewriteRule ^/rspamd$ /rspamd/ [R,L]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RewriteRule ^/rspamd/(.*) http://localhost:11334/$1 [P,L]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="where-does-the-webui-store-settings">Where does the WebUI store settings?<a href="#where-does-the-webui-store-settings" class="hash-link" aria-label="Прямая ссылка на Where does the WebUI store settings?" title="Прямая ссылка на Where does the WebUI store settings?" translate="no">​</a></h3>
<p>Dynamic settings go to <code>$DBDIR/rspamd_dynamic</code> (typically <code>/var/lib/rspamd/rspamd_dynamic</code>). This file has priority 5, so <code>override.d</code> (priority 10) can override it.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-cant-i-edit-some-maps-in-webui">Why can&#x27;t I edit some maps in WebUI?<a href="#why-cant-i-edit-some-maps-in-webui" class="hash-link" aria-label="Прямая ссылка на Why can&#x27;t I edit some maps in WebUI?" title="Прямая ссылка на Why can&#x27;t I edit some maps in WebUI?" translate="no">​</a></h3>
<ul>
<li class="">File must exist and be writable by rspamd user</li>
<li class="">HTTP maps cannot be edited</li>
<li class="">Signed maps cannot be edited</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-set-up-webui-clustering">How do I set up WebUI clustering?<a href="#how-do-i-set-up-webui-clustering" class="hash-link" aria-label="Прямая ссылка на How do I set up WebUI clustering?" title="Прямая ссылка на How do I set up WebUI clustering?" translate="no">​</a></h3>
<p>Configure neighbors in <code>local.d/options.inc</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">neighbours {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    host = &quot;http://server1:11334&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server2 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    host = &quot;http://server2:11334&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>See <a class="" href="/docs.rspamd.com/branches/master/ru/configuration/options#neighbours-list">Options documentation</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-does-the-user-column-show-undefined">Why does the User column show &quot;undefined&quot;?<a href="#why-does-the-user-column-show-undefined" class="hash-link" aria-label="Прямая ссылка на Why does the User column show &quot;undefined&quot;?" title="Прямая ссылка на Why does the User column show &quot;undefined&quot;?" translate="no">​</a></h3>
<p>The User column displays the authenticated username from outbound mail scanning. It&#x27;s empty for inbound mail.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="mta-integration">MTA Integration<a href="#mta-integration" class="hash-link" aria-label="Прямая ссылка на MTA Integration" title="Прямая ссылка на MTA Integration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-distinguish-inbound-from-outbound-mail">How do I distinguish inbound from outbound mail?<a href="#how-do-i-distinguish-inbound-from-outbound-mail" class="hash-link" aria-label="Прямая ссылка на How do I distinguish inbound from outbound mail?" title="Прямая ссылка на How do I distinguish inbound from outbound mail?" translate="no">​</a></h3>
<p>Use the <a class="" href="/docs.rspamd.com/branches/master/ru/configuration/settings">settings module</a> with <code>settings-id</code>:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Settings configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">settings {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  outbound {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id = &quot;outbound&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apply {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      actions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reject = 150.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;add header&quot; = 6.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      groups_disabled = [&quot;hfilter&quot;, &quot;rbl&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Configure proxy to send the header:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Proxy configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream &quot;local&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  self_scan = yes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  settings_id = &quot;outbound&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Alternatively, use <code>authenticated = true</code> or IP-based conditions in settings.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="can-i-scan-outbound-mail-safely">Can I scan outbound mail safely?<a href="#can-i-scan-outbound-mail-safely" class="hash-link" aria-label="Прямая ссылка на Can I scan outbound mail safely?" title="Прямая ссылка на Can I scan outbound mail safely?" translate="no">​</a></h3>
<p>Yes. Rspamd automatically applies safe defaults for:</p>
<ul>
<li class="">Authenticated senders</li>
<li class="">Senders from <code>local_networks</code> (RFC 1918 addresses, loopback)</li>
</ul>
<p>Many checks are disabled for outbound. Be careful not to accidentally trigger this mode (e.g., by not using XCLIENT on a proxy MTA).</p>
<p>See <a class="" href="/docs.rspamd.com/branches/master/ru/tutorials/scanning_outbound">Scanning Outbound documentation</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="can-i-use-rspamd-only-for-dkim-signing">Can I use Rspamd only for DKIM signing?<a href="#can-i-use-rspamd-only-for-dkim-signing" class="hash-link" aria-label="Прямая ссылка на Can I use Rspamd only for DKIM signing?" title="Прямая ссылка на Can I use Rspamd only for DKIM signing?" translate="no">​</a></h3>
<p>Yes, use settings to skip processing:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">settings {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sign_only {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    authenticated = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apply {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      symbols_enabled = [&quot;DKIM_SIGNED&quot;, &quot;ARC_SIGNED&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      flags = [&quot;skip_process&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lua-development">Lua Development<a href="#lua-development" class="hash-link" aria-label="Прямая ссылка на Lua Development" title="Прямая ссылка на Lua Development" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="whats-the-difference-between-plugins-and-rules">What&#x27;s the difference between plugins and rules?<a href="#whats-the-difference-between-plugins-and-rules" class="hash-link" aria-label="Прямая ссылка на What&#x27;s the difference between plugins and rules?" title="Прямая ссылка на What&#x27;s the difference between plugins and rules?" translate="no">​</a></h3>




















<table><thead><tr><th>Type</th><th>Purpose</th><th>Capabilities</th></tr></thead><tbody><tr><td><strong>Rules</strong></td><td>Simple checks</td><td>Return <code>true</code>/<code>false</code>, synchronous</td></tr><tr><td><strong>Plugins</strong></td><td>Complex logic</td><td>Async requests, multiple symbols, <code>task:insert_result()</code></td></tr></tbody></table>
<p>Use <code>rspamd_config:register_symbol</code> for plugins.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-the-table-form-of-function-calls">What is the table form of function calls?<a href="#what-is-the-table-form-of-function-calls" class="hash-link" aria-label="Прямая ссылка на What is the table form of function calls?" title="Прямая ссылка на What is the table form of function calls?" translate="no">​</a></h3>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Sequential form</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Table form (preferred for 3+ arguments)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  param1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  param2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  param3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  param4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Table form is easier to read, extend, and maintain.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-use-rspamd-modules-in-lua">How do I use Rspamd modules in Lua?<a href="#how-do-i-use-rspamd-modules-in-lua" class="hash-link" aria-label="Прямая ссылка на How do I use Rspamd modules in Lua?" title="Прямая ссылка на How do I use Rspamd modules in Lua?" translate="no">​</a></h3>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:rgb(222, 71, 0)">local</span><span class="token plain"> rspamd_logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> require </span><span class="token string" style="color:#e3116c">&#x27;rspamd_logger&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:rgb(222, 71, 0)">local</span><span class="token plain"> rspamd_regexp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> require </span><span class="token string" style="color:#e3116c">&#x27;rspamd_regexp&#x27;</span><br></span></code></pre></div></div>
<p>Additional libraries available:</p>
<ul>
<li class=""><a href="https://github.com/rtsisyk/luafun" target="_blank" rel="noopener noreferrer" class="">Lua Functional</a></li>
<li class=""><a href="https://www.inf.puc-rio.br/~roberto/lpeg/" target="_blank" rel="noopener noreferrer" class="">Lua LPEG</a></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-log-from-lua">How do I log from Lua?<a href="#how-do-i-log-from-lua" class="hash-link" aria-label="Прямая ссылка на How do I log from Lua?" title="Прямая ссылка на How do I log from Lua?" translate="no">​</a></h3>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:rgb(222, 71, 0)">local</span><span class="token plain"> rspamd_logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> require </span><span class="token string" style="color:#e3116c">&#x27;rspamd_logger&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Modern format (recommended)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamd_logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">infox</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Processing %s from %s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sender</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Positional arguments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamd_logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">infox</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%s %1 %2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;abc&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:rgb(222, 71, 0)">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Output: abc abc 1 [[1] = true, [2] = 1]</span><br></span></code></pre></div></div>
<p>Use <code>rspamd_logger.slog</code> for string formatting without logging.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="should-i-use-local-for-variables">Should I use <code>local</code> for variables?<a href="#should-i-use-local-for-variables" class="hash-link" aria-label="Прямая ссылка на should-i-use-local-for-variables" title="Прямая ссылка на should-i-use-local-for-variables" translate="no">​</a></h3>
<p><strong>Always use <code>local</code></strong> unless absolutely necessary. Global variables significantly degrade Lua performance.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-create-regexps-safely">How do I create regexps safely?<a href="#how-do-i-create-regexps-safely" class="hash-link" aria-label="Прямая ссылка на How do I create regexps safely?" title="Прямая ссылка на How do I create regexps safely?" translate="no">​</a></h3>
<p>Regexp objects don&#x27;t have garbage collection. <strong>Always use the cache:</strong></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- CORRECT: Uses cached regexp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:rgb(222, 71, 0)">local</span><span class="token plain"> re </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rspamd_regexp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create_cached</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/pattern/&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- WRONG: Memory leak!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:rgb(222, 71, 0)">local</span><span class="token plain"> re </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rspamd_regexp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/pattern/&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>If you must create dynamic regexps, destroy them manually:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:rgb(222, 71, 0)">local</span><span class="token plain"> re </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rspamd_regexp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dynamic_pattern</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- ... use re ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">re</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">destroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Consider using <a class="" href="/docs.rspamd.com/branches/master/ru/modules/multimap">multimap</a> regexp maps for dynamic patterns.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="quick-reference">Quick Reference<a href="#quick-reference" class="hash-link" aria-label="Прямая ссылка на Quick Reference" title="Прямая ссылка на Quick Reference" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-commands">Common Commands<a href="#common-commands" class="hash-link" aria-label="Прямая ссылка на Common Commands" title="Прямая ссылка на Common Commands" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configtest              # Validate configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm configdump              # Show effective config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm confighelp options      # Get help on options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc &lt; message.eml             # Scan a message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc -p &lt; message.eml          # Scan with all checks (Pass: all)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc stat                      # Show statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Learning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc learn_spam message.eml    # Train as spam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc learn_ham message.eml     # Train as ham</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc -f 1 -w 10 fuzzy_add msg  # Add to fuzzy storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Administration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm control stat            # Runtime statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm control fuzzystat       # Fuzzy storage statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm pw                      # Generate password hash</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-paths">Common Paths<a href="#common-paths" class="hash-link" aria-label="Прямая ссылка на Common Paths" title="Прямая ссылка на Common Paths" translate="no">​</a></h3>

























<table><thead><tr><th>Path</th><th>Purpose</th></tr></thead><tbody><tr><td><code>/etc/rspamd/local.d/</code></td><td>Local configuration overrides</td></tr><tr><td><code>/etc/rspamd/override.d/</code></td><td>High-priority overrides</td></tr><tr><td><code>/var/lib/rspamd/</code></td><td>Runtime data</td></tr><tr><td><code>/var/log/rspamd/rspamd.log</code></td><td>Main log file</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-are-rspamc-and-rspamadm">What are rspamc and rspamadm?<a href="#what-are-rspamc-and-rspamadm" class="hash-link" aria-label="Прямая ссылка на What are rspamc and rspamadm?" title="Прямая ссылка на What are rspamc and rspamadm?" translate="no">​</a></h3>




















<table><thead><tr><th>Tool</th><th>Purpose</th><th>Communication</th></tr></thead><tbody><tr><td><code>rspamadm</code></td><td>Administration</td><td>Local Unix socket</td></tr><tr><td><code>rspamc</code></td><td>Client operations</td><td>HTTP to scanner/controller</td></tr></tbody></table>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm help           # List admin commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm help &lt;command&gt; # Command-specific help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc --help           # Client help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamc stat             # Get statistics via HTTP</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/rspamd/docs.rspamd.com/edit/master/docs/faq.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Отредактировать эту страницу</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Страница документа"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs.rspamd.com/branches/master/ru/tutorials/clickhouse_analytics"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">ClickHouse Analytics Platform</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs.rspamd.com/branches/master/ru/support"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">Rspamd Support</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-navigation" class="table-of-contents__link toc-highlight">Quick Navigation</a></li><li><a href="#getting-help" class="table-of-contents__link toc-highlight">Getting Help</a><ul><li><a href="#where-can-i-get-help-with-rspamd" class="table-of-contents__link toc-highlight">Where can I get help with Rspamd?</a></li><li><a href="#how-do-i-report-bugs" class="table-of-contents__link toc-highlight">How do I report bugs?</a></li><li><a href="#how-is-rspamd-spelled" class="table-of-contents__link toc-highlight">How is &quot;Rspamd&quot; spelled?</a></li></ul></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#what-versions-are-supported" class="table-of-contents__link toc-highlight">What versions are supported?</a></li><li><a href="#should-i-use-experimental-packages" class="table-of-contents__link toc-highlight">Should I use experimental packages?</a></li><li><a href="#how-are-official-packages-built" class="table-of-contents__link toc-highlight">How are official packages built?</a></li></ul></li><li><a href="#initial-setup" class="table-of-contents__link toc-highlight">Initial Setup</a><ul><li><a href="#how-do-i-configure-dns-resolution" class="table-of-contents__link toc-highlight">How do I configure DNS resolution?</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#how-do-i-view-my-current-configuration" class="table-of-contents__link toc-highlight">How do I view my current configuration?</a></li><li><a href="#what-are-the-configuration-directories" class="table-of-contents__link toc-highlight">What are the configuration directories?</a></li><li><a href="#what-is-the-difference-between-locald-and-overrided" class="table-of-contents__link toc-highlight">What is the difference between local.d and override.d?</a></li><li><a href="#why-isnt-my-configuration-working" class="table-of-contents__link toc-highlight">Why isn&#39;t my configuration working?</a></li><li><a href="#how-do-i-change-a-symbols-score" class="table-of-contents__link toc-highlight">How do I change a symbol&#39;s score?</a></li><li><a href="#how-do-i-list-enabled-plugins" class="table-of-contents__link toc-highlight">How do I list enabled plugins?</a></li><li><a href="#how-do-i-disable-a-module" class="table-of-contents__link toc-highlight">How do I disable a module?</a></li><li><a href="#how-do-i-disable-a-specific-rule" class="table-of-contents__link toc-highlight">How do I disable a specific rule?</a></li></ul></li><li><a href="#scores-and-actions" class="table-of-contents__link toc-highlight">Scores and Actions</a><ul><li><a href="#what-actions-does-rspamd-support" class="table-of-contents__link toc-highlight">What actions does Rspamd support?</a></li><li><a href="#why-is-my-score-zero-but-the-message-is-rejected" class="table-of-contents__link toc-highlight">Why is my score zero but the message is rejected?</a></li><li><a href="#why-do-i-get-different-scores-for-the-same-message" class="table-of-contents__link toc-highlight">Why do I get different scores for the same message?</a></li><li><a href="#why-do-some-symbols-have-variable-scores" class="table-of-contents__link toc-highlight">Why do some symbols have variable scores?</a></li></ul></li><li><a href="#modules" class="table-of-contents__link toc-highlight">Modules</a><ul><li><a href="#how-do-i-whitelist-senders-or-skip-checks" class="table-of-contents__link toc-highlight">How do I whitelist senders or skip checks?</a></li><li><a href="#how-do-i-blacklist-file-extensions" class="table-of-contents__link toc-highlight">How do I blacklist file extensions?</a></li><li><a href="#what-does-uribl_blocked-mean" class="table-of-contents__link toc-highlight">What does URIBL_BLOCKED mean?</a></li><li><a href="#why-do-i-see-monitored-errors" class="table-of-contents__link toc-highlight">Why do I see &quot;monitored&quot; errors?</a></li><li><a href="#why-arent-fuzzy-checks-working" class="table-of-contents__link toc-highlight">Why aren&#39;t fuzzy checks working?</a></li></ul></li><li><a href="#statistics-and-learning" class="table-of-contents__link toc-highlight">Statistics and Learning</a><ul><li><a href="#which-backend-should-i-use-for-statistics" class="table-of-contents__link toc-highlight">Which backend should I use for statistics?</a></li><li><a href="#how-do-i-train-the-bayes-classifier" class="table-of-contents__link toc-highlight">How do I train the Bayes classifier?</a></li><li><a href="#can-i-retrain-messages-for-fuzzy-storage" class="table-of-contents__link toc-highlight">Can I retrain messages for fuzzy storage?</a></li><li><a href="#what-does-inv_chi_square-exp-overflow-mean" class="table-of-contents__link toc-highlight">What does &quot;inv_chi_square: exp overflow&quot; mean?</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#how-do-i-debug-a-module" class="table-of-contents__link toc-highlight">How do I debug a module?</a></li><li><a href="#how-do-i-get-a-core-dump-after-a-crash" class="table-of-contents__link toc-highlight">How do I get a core dump after a crash?</a></li><li><a href="#how-do-i-use-asan-packages-for-debugging" class="table-of-contents__link toc-highlight">How do I use ASAN packages for debugging?</a></li><li><a href="#how-do-i-analyze-a-core-file" class="table-of-contents__link toc-highlight">How do I analyze a core file?</a></li><li><a href="#how-do-i-limit-core-file-disk-usage" class="table-of-contents__link toc-highlight">How do I limit core file disk usage?</a></li></ul></li><li><a href="#administration" class="table-of-contents__link toc-highlight">Administration</a><ul><li><a href="#how-do-i-read-rspamd-logs" class="table-of-contents__link toc-highlight">How do I read Rspamd logs?</a></li><li><a href="#how-do-i-customize-log-format" class="table-of-contents__link toc-highlight">How do I customize log format?</a></li><li><a href="#what-redis-keys-does-rspamd-use" class="table-of-contents__link toc-highlight">What Redis keys does Rspamd use?</a></li><li><a href="#how-do-i-delete-redis-keys-by-pattern" class="table-of-contents__link toc-highlight">How do I delete Redis keys by pattern?</a></li><li><a href="#how-do-i-use-unix-sockets-with-redis" class="table-of-contents__link toc-highlight">How do I use Unix sockets with Redis?</a></li><li><a href="#what-should-i-back-up" class="table-of-contents__link toc-highlight">What should I back up?</a></li><li><a href="#why-do-i-get-errors-after-migrating-to-different-hardware" class="table-of-contents__link toc-highlight">Why do I get errors after migrating to different hardware?</a></li></ul></li><li><a href="#web-interface" class="table-of-contents__link toc-highlight">Web Interface</a><ul><li><a href="#what-are-the-password-types" class="table-of-contents__link toc-highlight">What are the password types?</a></li><li><a href="#how-do-i-create-a-secure-password" class="table-of-contents__link toc-highlight">How do I create a secure password?</a></li><li><a href="#how-do-i-run-the-webui-behind-a-proxy" class="table-of-contents__link toc-highlight">How do I run the WebUI behind a proxy?</a></li><li><a href="#where-does-the-webui-store-settings" class="table-of-contents__link toc-highlight">Where does the WebUI store settings?</a></li><li><a href="#why-cant-i-edit-some-maps-in-webui" class="table-of-contents__link toc-highlight">Why can&#39;t I edit some maps in WebUI?</a></li><li><a href="#how-do-i-set-up-webui-clustering" class="table-of-contents__link toc-highlight">How do I set up WebUI clustering?</a></li><li><a href="#why-does-the-user-column-show-undefined" class="table-of-contents__link toc-highlight">Why does the User column show &quot;undefined&quot;?</a></li></ul></li><li><a href="#mta-integration" class="table-of-contents__link toc-highlight">MTA Integration</a><ul><li><a href="#how-do-i-distinguish-inbound-from-outbound-mail" class="table-of-contents__link toc-highlight">How do I distinguish inbound from outbound mail?</a></li><li><a href="#can-i-scan-outbound-mail-safely" class="table-of-contents__link toc-highlight">Can I scan outbound mail safely?</a></li><li><a href="#can-i-use-rspamd-only-for-dkim-signing" class="table-of-contents__link toc-highlight">Can I use Rspamd only for DKIM signing?</a></li></ul></li><li><a href="#lua-development" class="table-of-contents__link toc-highlight">Lua Development</a><ul><li><a href="#whats-the-difference-between-plugins-and-rules" class="table-of-contents__link toc-highlight">What&#39;s the difference between plugins and rules?</a></li><li><a href="#what-is-the-table-form-of-function-calls" class="table-of-contents__link toc-highlight">What is the table form of function calls?</a></li><li><a href="#how-do-i-use-rspamd-modules-in-lua" class="table-of-contents__link toc-highlight">How do I use Rspamd modules in Lua?</a></li><li><a href="#how-do-i-log-from-lua" class="table-of-contents__link toc-highlight">How do I log from Lua?</a></li><li><a href="#should-i-use-local-for-variables" class="table-of-contents__link toc-highlight">Should I use <code>local</code> for variables?</a></li><li><a href="#how-do-i-create-regexps-safely" class="table-of-contents__link toc-highlight">How do I create regexps safely?</a></li></ul></li><li><a href="#quick-reference" class="table-of-contents__link toc-highlight">Quick Reference</a><ul><li><a href="#common-commands" class="table-of-contents__link toc-highlight">Common Commands</a></li><li><a href="#common-paths" class="table-of-contents__link toc-highlight">Common Paths</a></li><li><a href="#what-are-rspamc-and-rspamadm" class="table-of-contents__link toc-highlight">What are rspamc and rspamadm?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/tutorials/quickstart">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/configuration">Configuration</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/modules">Modules</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/tutorials">Tutorials</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/downloads">Downloads</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/faq">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/support">Support</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/changelog">Changelog</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rspamd/rspamd" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/tutorials/site_contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/blog">Blog</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Subscribe</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/rss/changelog.xml">Changelog RSS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/blog/rss.xml">Blog RSS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/master/ru/blog/atom.xml">Blog Atom</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Rspamd Project. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>