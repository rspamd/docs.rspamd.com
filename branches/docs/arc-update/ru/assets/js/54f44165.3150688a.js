"use strict";(self.webpackChunkrspamd_docs=self.webpackChunkrspamd_docs||[]).push([[7924],{28453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>a});var r=n(96540);const i={},t=r.createContext(i);function d(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:s},e.children)}},35287:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"getting-started/installation","title":"Installation Guide","description":"This guide covers the recommended installation methods for Rspamd. Choose based on your deployment scenario:","source":"@site/docs/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/docs.rspamd.com/branches/docs/arc-update/ru/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/rspamd/docs.rspamd.com/edit/master/docs/getting-started/installation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Installation Guide","sidebar_position":2},"sidebar":"docs","previous":{"title":"Understanding Rspamd","permalink":"/docs.rspamd.com/branches/docs/arc-update/ru/getting-started/understanding-rspamd"},"next":{"title":"First Setup","permalink":"/docs.rspamd.com/branches/docs/arc-update/ru/getting-started/first-setup"}}');var i=n(74848),t=n(28453);const d={title:"Installation Guide",sidebar_position:2},a="Rspamd Installation Guide",o={},l=[{value:"Installation Methods Comparison",id:"installation-methods-comparison",level:2},{value:"Package Installation (Recommended)",id:"package-installation-recommended",level:2},{value:"Supported Platforms",id:"supported-platforms",level:3},{value:"Ubuntu/Debian",id:"ubuntudebian",level:3},{value:"CentOS/RHEL/Rocky Linux/AlmaLinux",id:"centosrhelrocky-linuxalmalinux",level:3},{value:"FreeBSD",id:"freebsd",level:3},{value:"Verify Installation",id:"verify-installation",level:3},{value:"Key Paths",id:"key-paths",level:3},{value:"Set Web Interface Password",id:"set-web-interface-password",level:3},{value:"Docker Installation",id:"docker-installation",level:2},{value:"Docker Compose (Recommended)",id:"docker-compose-recommended",level:3},{value:"Set Web Interface Password",id:"set-web-interface-password-1",level:3},{value:"Important: DNS Configuration",id:"important-dns-configuration",level:3},{value:"Production Considerations",id:"production-considerations",level:3},{value:"Kubernetes",id:"kubernetes",level:3},{value:"Migrating from SpamAssassin",id:"migrating-from-spamassassin",level:2},{value:"Testing Mode Configuration",id:"testing-mode-configuration",level:3},{value:"Testing Your Installation",id:"testing-your-installation",level:2},{value:"Basic Functionality Test",id:"basic-functionality-test",level:3},{value:"Test with Real Email",id:"test-with-real-email",level:3},{value:"Web Interface Test",id:"web-interface-test",level:3},{value:"MTA Integration Test",id:"mta-integration-test",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Service Won&#39;t Start",id:"service-wont-start",level:3},{value:"Permission Issues",id:"permission-issues",level:3},{value:"Port Conflicts",id:"port-conflicts",level:3},{value:"Redis Connection Failed",id:"redis-connection-failed",level:3},{value:"Docker DNS Issues",id:"docker-dns-issues",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Essential Security Steps",id:"essential-security-steps",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Getting Help",id:"getting-help",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"rspamd-installation-guide",children:"Rspamd Installation Guide"})}),"\n",(0,i.jsx)(s.p,{children:"This guide covers the recommended installation methods for Rspamd. Choose based on your deployment scenario:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Package Installation"})," (recommended): For production systems, automatic updates, system integration"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Docker/Container"}),": For testing, development, cloud-native deployments, or containerized infrastructure"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"FreeBSD Ports"}),": For FreeBSD systems"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"installation-methods-comparison",children:"Installation Methods Comparison"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Method"}),(0,i.jsx)(s.th,{children:"Best For"}),(0,i.jsx)(s.th,{children:"Update Management"}),(0,i.jsx)(s.th,{children:"Complexity"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"OS Packages"})}),(0,i.jsx)(s.td,{children:"Production servers"}),(0,i.jsx)(s.td,{children:"Automatic via package manager"}),(0,i.jsx)(s.td,{children:"Low"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Docker"})}),(0,i.jsx)(s.td,{children:"Testing, development, K8s"}),(0,i.jsx)(s.td,{children:"Manual image updates"}),(0,i.jsx)(s.td,{children:"Low-Medium"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"FreeBSD Ports"})}),(0,i.jsx)(s.td,{children:"FreeBSD systems"}),(0,i.jsx)(s.td,{children:"Via pkg or ports"}),(0,i.jsx)(s.td,{children:"Low"})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"package-installation-recommended",children:"Package Installation (Recommended)"}),"\n",(0,i.jsx)(s.p,{children:"Package installation provides automatic updates, system integration, and is the recommended method for production deployments."}),"\n",(0,i.jsx)(s.h3,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Ubuntu 20.04+, Debian 11+"}),": Official APT repository"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"CentOS/RHEL 8+, Rocky Linux, AlmaLinux"}),": Official YUM/DNF repository"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"FreeBSD"}),": Official pkg repository and ports collection"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"ubuntudebian",children:"Ubuntu/Debian"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Add Rspamd repository GPG key (modern method)\ncurl -fsSL https://rspamd.com/apt-stable/gpg.key | \\\n  sudo gpg --dearmor -o /usr/share/keyrings/rspamd.gpg\n\n# Add Rspamd repository\necho "deb [signed-by=/usr/share/keyrings/rspamd.gpg] https://rspamd.com/apt-stable/ $(lsb_release -cs) main" | \\\n  sudo tee /etc/apt/sources.list.d/rspamd.list\n\n# Update package list\nsudo apt update\n\n# Install Rspamd and Redis\nsudo apt install rspamd redis-server\n\n# Start and enable services\nsudo systemctl start rspamd redis-server\nsudo systemctl enable rspamd redis-server\n'})}),"\n",(0,i.jsx)(s.h3,{id:"centosrhelrocky-linuxalmalinux",children:"CentOS/RHEL/Rocky Linux/AlmaLinux"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Add Rspamd repository\ncurl -sSL https://rspamd.com/rpm-stable/centos-8/rspamd.repo | \\\n  sudo tee /etc/yum.repos.d/rspamd.repo\n\n# Install Rspamd and Redis\nsudo dnf install rspamd redis\n\n# Start and enable services\nsudo systemctl start rspamd redis\nsudo systemctl enable rspamd redis\n"})}),"\n",(0,i.jsx)(s.h3,{id:"freebsd",children:"FreeBSD"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Install from ports\nsudo pkg install rspamd redis\n\n# Enable services\nsudo sysrc rspamd_enable="YES"\nsudo sysrc redis_enable="YES"\n\n# Start services\nsudo service rspamd start\nsudo service redis start\n'})}),"\n",(0,i.jsx)(s.h3,{id:"verify-installation",children:"Verify Installation"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Check service status\nsudo systemctl status rspamd redis\n# Both should show "active (running)"\n\n# Verify ports\nsudo ss -tlnp | grep rspamd\n# Expected:\n# 127.0.0.1:11333 (normal worker - scanner)\n# 127.0.0.1:11334 (controller - web UI)\n# 127.0.0.1:11332 (proxy worker - milter)\n'})}),"\n",(0,i.jsx)(s.h3,{id:"key-paths",children:"Key Paths"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Binary"}),": ",(0,i.jsx)(s.code,{children:"/usr/bin/rspamd"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Configuration"}),": ",(0,i.jsx)(s.code,{children:"/etc/rspamd/"})," (modify files in ",(0,i.jsx)(s.code,{children:"/etc/rspamd/local.d/"})," and ",(0,i.jsx)(s.code,{children:"/etc/rspamd/override.d/"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Data"}),": ",(0,i.jsx)(s.code,{children:"/var/lib/rspamd/"})," (statistics, learned messages)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Logs"}),": ",(0,i.jsx)(s.code,{children:"/var/log/rspamd/"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Utilities"}),": ",(0,i.jsx)(s.code,{children:"rspamc"})," (client), ",(0,i.jsx)(s.code,{children:"rspamadm"})," (admin)"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"set-web-interface-password",children:"Set Web Interface Password"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Generate password hash\nrspamadm pw\n\n# Add to configuration\necho 'password = \"$2$your_generated_hash_here\";' | sudo tee /etc/rspamd/local.d/worker-controller.inc\n\n# Restart\nsudo systemctl restart rspamd\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Access the web interface at ",(0,i.jsx)(s.code,{children:"http://your-server:11334"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Next Steps"}),": ",(0,i.jsx)(s.a,{href:"/getting-started/first-setup",children:"First Setup Guide"})," for MTA integration and basic configuration"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"docker-installation",children:"Docker Installation"}),"\n",(0,i.jsx)(s.p,{children:"Docker is suitable for testing, development, and containerized production deployments. For production use, ensure proper DNS configuration and persistent storage."}),"\n",(0,i.jsx)(s.h3,{id:"docker-compose-recommended",children:"Docker Compose (Recommended)"}),"\n",(0,i.jsxs)(s.p,{children:["Create ",(0,i.jsx)(s.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  rspamd:\n    image: rspamd/rspamd:latest\n    container_name: rspamd\n    ports:\n      - "11332:11332"  # Proxy worker\n      - "11334:11334"  # Web interface\n    volumes:\n      - ./config:/etc/rspamd/local.d\n      - ./data:/var/lib/rspamd\n      - ./logs:/var/log/rspamd\n    depends_on:\n      - redis\n      - unbound\n    restart: unless-stopped\n\n  redis:\n    image: redis:alpine\n    container_name: rspamd-redis\n    volumes:\n      - redis-data:/data\n    restart: unless-stopped\n\n  # Local recursive DNS resolver (recommended)\n  # Note: you can use any unbound image; this is an example. Ensure it is configured for recursion\n  unbound:\n    image: mvance/unbound:latest\n    container_name: rspamd-unbound\n    restart: unless-stopped\n    # Expose only to the compose network by default; no published ports are required\n    # You can mount custom configs if desired:\n    # volumes:\n    #   - ./unbound:/opt/unbound/etc/unbound\n\nvolumes:\n  redis-data:\n'})}),"\n",(0,i.jsx)(s.p,{children:"Start the stack:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,i.jsx)(s.h3,{id:"set-web-interface-password-1",children:"Set Web Interface Password"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Generate password hash\ndocker exec rspamd rspamadm pw\n\n# Create controller configuration\necho 'password = \"$2$your_generated_hash_here\";' > config/worker-controller.inc\n\n# Restart\ndocker-compose restart rspamd\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Access at ",(0,i.jsx)(s.code,{children:"http://localhost:11334"})]}),"\n",(0,i.jsx)(s.h3,{id:"important-dns-configuration",children:"Important: DNS Configuration"}),"\n",(0,i.jsxs)(s.p,{children:["Rspamd performs intensive DNS lookups (RBLs, DKIM, DMARC, URI checks). ",(0,i.jsx)(s.strong,{children:"You must use a local recursive DNS resolver"})," for proper functionality."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why not public resolvers?"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Public DNS (8.8.8.8, 1.1.1.1) rate-limit RBL queries"}),"\n",(0,i.jsx)(s.li,{children:"Docker's embedded DNS (127.0.0.11) is only a forwarder, not recursive"}),"\n",(0,i.jsx)(s.li,{children:"This causes timeouts and poor spam detection accuracy"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Solution"}),": Run a local recursive resolver (Unbound, shown in docker-compose above) or use your host's resolver."]}),"\n",(0,i.jsxs)(s.p,{children:["Configure Rspamd DNS (create ",(0,i.jsx)(s.code,{children:"config/options.inc"}),"):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'dns {\n  nameserver = ["unbound"];  # Hostname support requires Rspamd 3.14+\n  timeout = 1s;\n  sockets = 16;\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:["For Rspamd < 3.14, use IP addresses instead of hostnames or rely on ",(0,i.jsx)(s.code,{children:"/etc/resolv.conf"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"production-considerations",children:"Production Considerations"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Persistent volumes"}),": Required for ",(0,i.jsx)(s.code,{children:"/var/lib/rspamd"})," (statistics, learned data)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Resource limits"}),": CPU: 1-2 cores, Memory: 512MB-1GB base + scale per worker"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Health checks"}),": Liveness on ",(0,i.jsx)(s.code,{children:"/ping"}),", readiness on ",(0,i.jsx)(s.code,{children:"/stat"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Redis HA"}),": Use Redis Sentinel or cluster for production"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Security"}),": Use ",(0,i.jsx)(s.a,{href:"/developers/encryption",children:"HTTPCrypt encryption"})," for multi-pod communication"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"kubernetes",children:"Kubernetes"}),"\n",(0,i.jsx)(s.p,{children:"For Kubernetes deployments, consider:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Using a StatefulSet for Rspamd workers"}),"\n",(0,i.jsx)(s.li,{children:"DaemonSet for local DNS resolver (Unbound or CoreDNS with recursion)"}),"\n",(0,i.jsx)(s.li,{children:"ConfigMaps for configuration management"}),"\n",(0,i.jsx)(s.li,{children:"Persistent volumes for data retention"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Example manifests available in ",(0,i.jsx)(s.a,{href:"https://github.com/rspamd/rspamd-k8s-examples",children:"rspamd-k8s-examples"})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"migrating-from-spamassassin",children:"Migrating from SpamAssassin"}),"\n",(0,i.jsx)(s.p,{children:"If you're migrating from SpamAssassin, install Rspamd using the package method above, then configure it for parallel testing before fully switching over."}),"\n",(0,i.jsx)(s.h3,{id:"testing-mode-configuration",children:"Testing Mode Configuration"}),"\n",(0,i.jsx)(s.p,{children:"Configure Rspamd to add headers without taking actions during testing:"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"/etc/rspamd/local.d/actions.conf"})}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:"# Conservative thresholds - only add headers during testing\nreject = 999;\nadd_header = 1;\ngreylist = 999;\n"})}),"\n",(0,i.jsx)(s.p,{children:"This allows you to:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Run Rspamd alongside SpamAssassin"}),"\n",(0,i.jsx)(s.li,{children:"Compare scoring and detection via headers"}),"\n",(0,i.jsx)(s.li,{children:"Gradually tune thresholds before production cutover"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"See also"}),": ",(0,i.jsx)(s.a,{href:"/tutorials/migrate_sa",children:"SpamAssassin Migration Guide"})," for detailed conversion steps"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"testing-your-installation",children:"Testing Your Installation"}),"\n",(0,i.jsx)(s.h3,{id:"basic-functionality-test",children:"Basic Functionality Test"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Test message scanning\necho "Test message" | rspamc\n\n# Expected output includes:\n# - Symbol results\n# - Spam score\n# - Action (e.g., "no action")\n'})}),"\n",(0,i.jsx)(s.h3,{id:"test-with-real-email",children:"Test with Real Email"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Scan a saved email file\nrspamc < /path/to/email.eml\n\n# Or via stdin\ncat email.eml | rspamc\n"})}),"\n",(0,i.jsx)(s.h3,{id:"web-interface-test",children:"Web Interface Test"}),"\n",(0,i.jsxs)(s.p,{children:["After setting the password (see above), access ",(0,i.jsx)(s.code,{children:"http://your-server:11334"})," and verify:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Dashboard loads"}),"\n",(0,i.jsx)(s.li,{children:"Statistics are visible"}),"\n",(0,i.jsx)(s.li,{children:"You can scan test messages via the interface"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"mta-integration-test",children:"MTA Integration Test"}),"\n",(0,i.jsxs)(s.p,{children:["Once integrated with your MTA (see ",(0,i.jsx)(s.a,{href:"/getting-started/first-setup",children:"First Setup"}),"):"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Send a test email through your server"}),"\n",(0,i.jsx)(s.li,{children:"Check mail logs for Rspamd processing"}),"\n",(0,i.jsxs)(s.li,{children:["Verify headers are added (check ",(0,i.jsx)(s.code,{children:"X-Spam"})," and ",(0,i.jsx)(s.code,{children:"X-Spamd-Result"})," headers)"]}),"\n",(0,i.jsx)(s.li,{children:"Confirm actions are applied correctly"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(s.h3,{id:"service-wont-start",children:"Service Won't Start"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check logs for errors\nsudo journalctl -u rspamd -n 50\n\n# Or check log file directly\nsudo tail -f /var/log/rspamd/rspamd.log\n\n# Verify configuration syntax\nrspamadm configtest\n"})}),"\n",(0,i.jsx)(s.h3,{id:"permission-issues",children:"Permission Issues"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Fix data directory ownership\nsudo chown -R _rspamd:_rspamd /var/lib/rspamd /var/log/rspamd\n\n# SELinux (RHEL/CentOS)\nsudo setsebool -P antivirus_can_scan_system 1\nsudo setsebool -P antivirus_use_jit 1\n"})}),"\n",(0,i.jsx)(s.h3,{id:"port-conflicts",children:"Port Conflicts"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check what's using the ports\nsudo lsof -i :11332\nsudo lsof -i :11333\nsudo lsof -i :11334\n\n# Change ports in worker configuration if needed\n# Edit /etc/rspamd/local.d/worker-*.inc\n"})}),"\n",(0,i.jsx)(s.h3,{id:"redis-connection-failed",children:"Redis Connection Failed"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Test Redis\nredis-cli ping  # Should return "PONG"\n\n# Check Redis is running\nsudo systemctl status redis\n\n# Verify Rspamd can reach Redis\nrspamc stat  # Should show statistics if Redis works\n'})}),"\n",(0,i.jsx)(s.h3,{id:"docker-dns-issues",children:"Docker DNS Issues"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Symptoms"}),": Timeouts, poor spam detection, RBL failures"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Solution"}),": Ensure local recursive DNS resolver is configured (see Docker DNS section above)"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Verify container DNS config\ndocker exec rspamd cat /etc/resolv.conf\n\n# Test DNS resolution\ndocker exec rspamd dig +short rspamd.com\n\n# Check Rspamd DNS stats\ndocker exec rspamd rspamc stat | grep -i dns\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Common mistakes"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Using public DNS (8.8.8.8, 1.1.1.1) - these rate-limit RBL queries"}),"\n",(0,i.jsx)(s.li,{children:"Relying on Docker's 127.0.0.11 - it's only a forwarder"}),"\n",(0,i.jsxs)(s.li,{children:["Using hostname in ",(0,i.jsx)(s.code,{children:"dns.nameserver"})," with Rspamd < 3.14"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsx)(s.h3,{id:"essential-security-steps",children:"Essential Security Steps"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Set a strong web interface password"})," (required)"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"rspamadm pw\n# Add to /etc/rspamd/local.d/worker-controller.inc\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Restrict controller access"})," - bind to localhost only"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-hcl",children:'# /etc/rspamd/local.d/worker-controller.inc\nbind_socket = "localhost:11334";\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Firewall configuration"})," - allow only MTA access"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Example with ufw\nsudo ufw allow from <mta-ip> to any port 11332 proto tcp\nsudo ufw deny 11334/tcp  # Block WebUI from internet\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"File permissions"})," - verify ownership"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo chown -R _rspamd:_rspamd /var/lib/rspamd\nsudo chmod 750 /var/lib/rspamd\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Multi-server encryption"})," - use ",(0,i.jsx)(s.a,{href:"/developers/encryption",children:"HTTPCrypt"})," for worker communication"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(s.p,{children:"After installation:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/getting-started/first-setup",children:"First Setup Guide"})})," - Integrate with your MTA (Postfix, Exim, Sendmail)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/configuration/index",children:"Configuration Basics"})})," - Learn how to customize Rspamd"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/getting-started/quickstart",children:"Quick Start"})})," - Get basic spam filtering working"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/tutorials/migrate_sa",children:"Migration from SpamAssassin"})})," - If migrating from SA"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/faq",children:"FAQ"})})," - Common questions and answers"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"https://rspamd.com/support.html",children:"Discord/Telegram"})})," - Real-time community support"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"https://github.com/rspamd/rspamd/issues",children:"GitHub Issues"})})," - Bug reports and feature requests"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"https://lists.rspamd.com/",children:"Mailing List"})})," - Discussion and announcements"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);