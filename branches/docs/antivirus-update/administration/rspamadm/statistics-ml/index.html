<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-administration/rspamadm/statistics-ml" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Statistics &amp; Machine Learning | Rspamd Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rspamd.com/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/statistics-ml"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ru"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Statistics &amp; Machine Learning | Rspamd Documentation"><meta data-rh="true" name="description" content="These commands help manage statistical classifiers (Bayes) and machine learning models (neural networks), including backup, migration, and performance evaluation."><meta data-rh="true" property="og:description" content="These commands help manage statistical classifiers (Bayes) and machine learning models (neural networks), including backup, migration, and performance evaluation."><link data-rh="true" rel="icon" href="/docs.rspamd.com/branches/docs/antivirus-update/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rspamd.com/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/statistics-ml"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/statistics-ml" hreflang="en"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/docs/antivirus-update/ru/administration/rspamadm/statistics-ml" hreflang="ru"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/statistics-ml" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Administration Tools","item":"https://rspamd.com/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/"},{"@type":"ListItem","position":2,"name":"Statistics & Machine Learning","item":"https://rspamd.com/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/statistics-ml"}]}</script><link rel="alternate" type="application/rss+xml" href="/docs.rspamd.com/branches/docs/antivirus-update/blog/rss.xml" title="Rspamd Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs.rspamd.com/branches/docs/antivirus-update/blog/atom.xml" title="Rspamd Blog Atom Feed">




<script>window.SEARCH_BACKEND_CONFIG={endpoint:"/api"}</script>

<link rel="alternate" type="application/rss+xml" title="Rspamd Changelog RSS" href="/rss/changelog.xml">
<link rel="alternate" type="application/rss+xml" title="Rspamd Blog RSS" href="/blog/rss.xml">
<link rel="alternate" type="application/atom+xml" title="Rspamd Blog Atom" href="/blog/atom.xml"><link rel="stylesheet" href="/docs.rspamd.com/branches/docs/antivirus-update/assets/css/styles.10e2e935.css">
<script src="/docs.rspamd.com/branches/docs/antivirus-update/assets/js/runtime~main.2461a4f8.js" defer="defer"></script>
<script src="/docs.rspamd.com/branches/docs/antivirus-update/assets/js/main.bf2ebc43.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/docs.rspamd.com/branches/docs/antivirus-update/img/rspamd_logo_black.png"><link rel="preload" as="image" href="/docs.rspamd.com/branches/docs/antivirus-update/img/rspamd_logo_navbar.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.rspamd.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs.rspamd.com/branches/docs/antivirus-update/img/rspamd_logo_black.png" alt="Rspamd Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs.rspamd.com/branches/docs/antivirus-update/img/rspamd_logo_navbar.png" alt="Rspamd Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/docs/antivirus-update/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/docs/antivirus-update/about/">About</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/docs/antivirus-update/tutorials/">Tutorials</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/docs/antivirus-update/modules/">Modules</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/docs/antivirus-update/other/usage_policy">Usage Policy</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/docs/antivirus-update/faq">FAQ</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/docs/antivirus-update/support">Support</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/docs/antivirus-update/downloads">Downloads</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/docs/antivirus-update/blog">Blog</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/docs/antivirus-update/changelog">Changelog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div><div class="elasticsearch-search-container"><form class="elasticsearch-search-form"><div class="elasticsearch-search-input-container"><input type="text" placeholder="Search documentation..." class="elasticsearch-search-input" aria-label="Search documentation" value=""><div class="elasticsearch-search-shortcut"><span>⌘K</span></div></div></form></div></div><div class="navbar__item"><div id="font-size-control-mount"></div></div><a href="https://github.com/rspamd/rspamd" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/docs/antivirus-update/"><span title="About Rspamd" class="linkLabel_WmDU">About Rspamd</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/docs/antivirus-update/getting-started/"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs.rspamd.com/branches/docs/antivirus-update/tutorials/migration"><span title="How-To Guides" class="categoryLinkLabel_W154">How-To Guides</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/docs/antivirus-update/faq"><span title="Frequently asked questions" class="linkLabel_WmDU">Frequently asked questions</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/docs/antivirus-update/about/"><span title="About" class="categoryLinkLabel_W154">About</span></a><button aria-label="Expand sidebar category &#x27;About&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/docs/antivirus-update/support"><span title="Rspamd Support" class="linkLabel_WmDU">Rspamd Support</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/docs/antivirus-update/downloads"><span title="Downloads" class="linkLabel_WmDU">Downloads</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/docs/antivirus-update/configuration/"><span title="Configuration" class="categoryLinkLabel_W154">Configuration</span></a><button aria-label="Expand sidebar category &#x27;Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/docs/antivirus-update/workers/"><span title="Workers" class="categoryLinkLabel_W154">Workers</span></a><button aria-label="Expand sidebar category &#x27;Workers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/docs/antivirus-update/modules/"><span title="Modules" class="categoryLinkLabel_W154">Modules</span></a><button aria-label="Expand sidebar category &#x27;Modules&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/docs/antivirus-update/lua/"><span title="Lua API" class="categoryLinkLabel_W154">Lua API</span></a><button aria-label="Expand sidebar category &#x27;Lua API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs.rspamd.com/branches/docs/antivirus-update/developers/architecture"><span title="Developers" class="categoryLinkLabel_W154">Developers</span></a><button aria-label="Expand sidebar category &#x27;Developers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/"><span title="Administration Tools" class="categoryLinkLabel_W154">Administration Tools</span></a><button aria-label="Collapse sidebar category &#x27;Administration Tools&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/email-analysis"><span title="Email Analysis &amp; Debugging" class="linkLabel_WmDU">Email Analysis &amp; Debugging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/email-manipulation"><span title="Email Manipulation" class="linkLabel_WmDU">Email Manipulation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/dns-tools"><span title="DNS &amp; SPF Management" class="linkLabel_WmDU">DNS &amp; SPF Management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/dkim-management"><span title="DKIM Key Management" class="linkLabel_WmDU">DKIM Key Management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/cryptography"><span title="Cryptography &amp; Security" class="linkLabel_WmDU">Cryptography &amp; Security</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/statistics-ml"><span title="Statistics &amp; Machine Learning" class="linkLabel_WmDU">Statistics &amp; Machine Learning</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/operations"><span title="Operations &amp; Monitoring" class="linkLabel_WmDU">Operations &amp; Monitoring</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/configuration"><span title="Configuration Management" class="linkLabel_WmDU">Configuration Management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/development"><span title="Development &amp; Testing" class="linkLabel_WmDU">Development &amp; Testing</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs.rspamd.com/branches/docs/antivirus-update/other/gtube_patterns"><span title="Other" class="categoryLinkLabel_W154">Other</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/docs/antivirus-update/blog"><span title="Blog" class="linkLabel_WmDU">Blog</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs.rspamd.com/branches/docs/antivirus-update/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/"><span>Administration Tools</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Statistics &amp; Machine Learning</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Statistics &amp; Machine Learning</h1></header>
<p>These commands help manage statistical classifiers (Bayes) and machine learning models (neural networks), including backup, migration, and performance evaluation.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="statistics_dump">statistics_dump<a href="#statistics_dump" class="hash-link" aria-label="Direct link to statistics_dump" title="Direct link to statistics_dump" translate="no">​</a></h2>
<p>Backup and restore Bayes statistics.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="purpose">Purpose<a href="#purpose" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose" translate="no">​</a></h3>
<p>Export and import Bayes statistics for backup, migration, or disaster recovery. Works with both Redis and SQLite backends.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-scenarios">Common Scenarios<a href="#common-scenarios" class="hash-link" aria-label="Direct link to Common Scenarios" title="Direct link to Common Scenarios" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="dump-statistics">Dump Statistics<a href="#dump-statistics" class="hash-link" aria-label="Direct link to Dump Statistics" title="Direct link to Dump Statistics" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Dump Bayes statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statistics_dump dump</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Dump with custom config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statistics_dump -c /path/to/rspamd.conf dump</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Dump with smaller batch size (less memory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statistics_dump -b 1000 dump</span><br></span></code></pre></div></div>
<p>Output is in structured format (JSON-like) that includes:</p>
<ul>
<li class="">Token frequencies</li>
<li class="">Spam/ham counters</li>
<li class="">Metadata</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="restore-statistics">Restore Statistics<a href="#restore-statistics" class="hash-link" aria-label="Direct link to Restore Statistics" title="Direct link to Restore Statistics" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Restore from dump</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statistics_dump restore &lt; backup.dump</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Restore with custom config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statistics_dump -c /path/to/rspamd.conf restore &lt; backup.dump</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="options">Options<a href="#options" class="hash-link" aria-label="Direct link to Options" title="Direct link to Options" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-c, --config &lt;cfg&gt;      Path to config file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-b, --batch-size &lt;N&gt;    Process N entries at once (default: 1000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Subcommands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dump, d                 Dump statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">restore, r              Restore statistics</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-cases">Use Cases<a href="#use-cases" class="hash-link" aria-label="Direct link to Use Cases" title="Direct link to Use Cases" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="regular-backups">Regular Backups<a href="#regular-backups" class="hash-link" aria-label="Direct link to Regular Backups" title="Direct link to Regular Backups" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Daily Bayes backup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BACKUP_DIR=&quot;/var/backups/rspamd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DATE=$(date +%Y%m%d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p &quot;$BACKUP_DIR&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Dump statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statistics_dump dump | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip &gt; &quot;$BACKUP_DIR/bayes-$DATE.dump.gz&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Keep only last 30 days</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find &quot;$BACKUP_DIR&quot; -name &quot;bayes-*.dump.gz&quot; -mtime +30 -delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Backup completed: bayes-$DATE.dump.gz&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="migration-between-servers">Migration Between Servers<a href="#migration-between-servers" class="hash-link" aria-label="Direct link to Migration Between Servers" title="Direct link to Migration Between Servers" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># On source server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statistics_dump dump | gzip &gt; bayes-export.dump.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Transfer to destination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp bayes-export.dump.gz new-server:/tmp/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># On destination server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zcat /tmp/bayes-export.dump.gz | rspamadm statistics_dump restore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Restart Rspamd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart rspamd</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="disaster-recovery">Disaster Recovery<a href="#disaster-recovery" class="hash-link" aria-label="Direct link to Disaster Recovery" title="Direct link to Disaster Recovery" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Restore from backup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zcat /var/backups/rspamd/bayes-20251120.dump.gz | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rspamadm statistics_dump restore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Verify restoration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm control stat | grep -A5 &quot;Bayes&quot;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="statconvert">statconvert<a href="#statconvert" class="hash-link" aria-label="Direct link to statconvert" title="Direct link to statconvert" translate="no">​</a></h2>
<p>Convert statistics from SQLite to Redis.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="purpose-1">Purpose<a href="#purpose-1" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose" translate="no">​</a></h3>
<p>Migrate Bayes statistics and learn cache from SQLite3 databases to Redis backend.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-scenarios-1">Common Scenarios<a href="#common-scenarios-1" class="hash-link" aria-label="Direct link to Common Scenarios" title="Direct link to Common Scenarios" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="convert-bayes-databases">Convert Bayes Databases<a href="#convert-bayes-databases" class="hash-link" aria-label="Direct link to Convert Bayes Databases" title="Direct link to Convert Bayes Databases" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Convert spam and ham databases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --spam-db /var/lib/rspamd/bayes.spam.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ham-db /var/lib/rspamd/bayes.ham.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --symbol-spam BAYES_SPAM \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --symbol-ham BAYES_HAM \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h localhost:6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># With Redis authentication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --spam-db /var/lib/rspamd/bayes.spam.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ham-db /var/lib/rspamd/bayes.ham.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h localhost:6379 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p redis-password \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d 0</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="convert-learn-cache">Convert Learn Cache<a href="#convert-learn-cache" class="hash-link" aria-label="Direct link to Convert Learn Cache" title="Direct link to Convert Learn Cache" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Convert learn cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cache /var/lib/rspamd/learn_cache.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h localhost:6379</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="reset-redis-before-import">Reset Redis Before Import<a href="#reset-redis-before-import" class="hash-link" aria-label="Direct link to Reset Redis Before Import" title="Direct link to Reset Redis Before Import" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Reset existing data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --spam-db bayes.spam.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ham-db bayes.ham.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h localhost:6379 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --reset</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="set-expiration-time">Set Expiration Time<a href="#set-expiration-time" class="hash-link" aria-label="Direct link to Set Expiration Time" title="Direct link to Set Expiration Time" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Set 90-day expiration on tokens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --spam-db bayes.spam.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ham-db bayes.ham.sqlite \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h localhost:6379 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --expire 7776000  # 90 days in seconds</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="options-1">Options<a href="#options-1" class="hash-link" aria-label="Direct link to Options" title="Direct link to Options" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-c, --config &lt;file&gt;         Config file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-r, --reset                 Reset existing data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-e, --expire &lt;seconds&gt;      Set expiration time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--symbol-spam &lt;symbol&gt;      Spam symbol (default: BAYES_SPAM)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--symbol-ham &lt;symbol&gt;       Ham symbol (default: BAYES_HAM)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--spam-db &lt;file&gt;           Spam SQLite database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ham-db &lt;file&gt;            Ham SQLite database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--cache &lt;file&gt;             Learn cache SQLite database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-h, --redis-host &lt;addr&gt;    Redis address (ip:port)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p, --redis-password &lt;pw&gt;  Redis password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d, --redis-db &lt;num&gt;       Redis database number</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="complete-migration-example">Complete Migration Example<a href="#complete-migration-example" class="hash-link" aria-label="Direct link to Complete Migration Example" title="Direct link to Complete Migration Example" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Migrate from SQLite to Redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SQLITE_DIR=&quot;/var/lib/rspamd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REDIS_HOST=&quot;localhost:6379&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REDIS_DB=&quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;=== Starting migration ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 1. Stop Rspamd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop rspamd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. Backup SQLite databases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar czf rspamd-sqlite-backup-$(date +%Y%m%d).tar.gz \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$SQLITE_DIR&quot;/*.sqlite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. Convert Bayes data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Converting Bayes databases...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --spam-db &quot;$SQLITE_DIR/bayes.spam.sqlite&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ham-db &quot;$SQLITE_DIR/bayes.ham.sqlite&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --symbol-spam BAYES_SPAM \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --symbol-ham BAYES_HAM \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h &quot;$REDIS_HOST&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &quot;$REDIS_DB&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --expire 7776000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. Convert learn cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Converting learn cache...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cache &quot;$SQLITE_DIR/learn_cache.sqlite&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h &quot;$REDIS_HOST&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &quot;$REDIS_DB&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 5. Update configuration to use Redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; /etc/rspamd/local.d/classifier-bayes.conf &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend = &quot;redis&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">servers = &quot;$REDIS_HOST&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database = $REDIS_DB;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 6. Start Rspamd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start rspamd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 7. Verify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm control stat | grep -A10 &quot;Bayes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;=== Migration complete ===&quot;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="classifiertest">classifiertest<a href="#classifiertest" class="hash-link" aria-label="Direct link to classifiertest" title="Direct link to classifiertest" translate="no">​</a></h2>
<p>Evaluate Bayes classifier performance.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="purpose-2">Purpose<a href="#purpose-2" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose" translate="no">​</a></h3>
<p>Train and test Bayes classifier using labeled ham and spam corpuses, measuring accuracy through cross-validation.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-scenarios-2">Common Scenarios<a href="#common-scenarios-2" class="hash-link" aria-label="Direct link to Common Scenarios" title="Direct link to Common Scenarios" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="basic-performance-test">Basic Performance Test<a href="#basic-performance-test" class="hash-link" aria-label="Direct link to Basic Performance Test" title="Direct link to Basic Performance Test" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Test classifier with ham and spam directories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm classifiertest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H /path/to/ham-corpus \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S /path/to/spam-corpus</span><br></span></code></pre></div></div>
<p>This:</p>
<ol>
<li class="">Splits corpus (70% training, 30% testing by default)</li>
<li class="">Learns from training set</li>
<li class="">Tests against test set</li>
<li class="">Reports accuracy, false positives, false negatives</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="custom-cross-validation-split">Custom Cross-Validation Split<a href="#custom-cross-validation-split" class="hash-link" aria-label="Direct link to Custom Cross-Validation Split" title="Direct link to Custom Cross-Validation Split" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Use 80% for training, 20% for testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm classifiertest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H /path/to/ham \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S /path/to/spam \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cv-fraction 0.8</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="test-without-learning">Test Without Learning<a href="#test-without-learning" class="hash-link" aria-label="Direct link to Test Without Learning" title="Direct link to Test Without Learning" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Test against existing classifier (no new learning)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm classifiertest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H /path/to/ham \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S /path/to/spam \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --no-learning</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="connect-to-remote-rspamd">Connect to Remote Rspamd<a href="#connect-to-remote-rspamd" class="hash-link" aria-label="Direct link to Connect to Remote Rspamd" title="Direct link to Connect to Remote Rspamd" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Test against remote instance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm classifiertest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H /path/to/ham \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S /path/to/spam \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c rspamd.example.com:11333</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="options-2">Options<a href="#options-2" class="hash-link" aria-label="Direct link to Options" title="Direct link to Options" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-H, --ham &lt;dir&gt;             Ham messages directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-S, --spam &lt;dir&gt;            Spam messages directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-n, --no-learning           Don&#x27;t learn, only test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--nconns &lt;N&gt;                Parallel connections (default: 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-t, --timeout &lt;sec&gt;         Connection timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c, --connect &lt;host&gt;        Rspamd host (default: localhost:11334)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-r, --rspamc &lt;path&gt;         Path to rspamc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--cv-fraction &lt;fraction&gt;    Cross-validation split (default: 0.7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--spam-symbol &lt;symbol&gt;      Spam symbol (default: BAYES_SPAM)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ham-symbol &lt;symbol&gt;       Ham symbol (default: BAYES_HAM)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-output">Example Output<a href="#example-output" class="hash-link" aria-label="Direct link to Example Output" title="Direct link to Example Output" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Learning phase: 1000 spam, 1000 ham messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Testing phase: 300 spam, 300 ham messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Results:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  True Positives:  295 (98.3%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  False Positives: 8 (2.7%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  True Negatives:  292 (97.3%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  False Negatives: 5 (1.7%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Accuracy: 97.8%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Precision: 97.4%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Recall: 98.3%</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-cases-1">Use Cases<a href="#use-cases-1" class="hash-link" aria-label="Direct link to Use Cases" title="Direct link to Use Cases" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="validate-bayes-effectiveness">Validate Bayes Effectiveness<a href="#validate-bayes-effectiveness" class="hash-link" aria-label="Direct link to Validate Bayes Effectiveness" title="Direct link to Validate Bayes Effectiveness" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test classifier before production deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HAM_DIR=&quot;/data/corpus/ham&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SPAM_DIR=&quot;/data/corpus/spam&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Testing Bayes classifier...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm classifiertest -H &quot;$HAM_DIR&quot; -S &quot;$SPAM_DIR&quot; &gt; test-results.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if accuracy is acceptable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ACCURACY=$(grep &quot;Accuracy:&quot; test-results.txt | awk &#x27;{print $2}&#x27; | tr -d &#x27;%&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (( $(echo &quot;$ACCURACY &gt; 95&quot; | bc -l) )); then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;Classifier performs well ($ACCURACY%)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;Classifier needs more training ($ACCURACY%)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="neuraltest">neuraltest<a href="#neuraltest" class="hash-link" aria-label="Direct link to neuraltest" title="Direct link to neuraltest" translate="no">​</a></h2>
<p>Test neural network performance with labeled datasets.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="purpose-3">Purpose<a href="#purpose-3" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose" translate="no">​</a></h3>
<p>Evaluate neural network module performance using spam/ham corpus.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-scenarios-3">Common Scenarios<a href="#common-scenarios-3" class="hash-link" aria-label="Direct link to Common Scenarios" title="Direct link to Common Scenarios" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="test-neural-network">Test Neural Network<a href="#test-neural-network" class="hash-link" aria-label="Direct link to Test Neural Network" title="Direct link to Test Neural Network" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Test with ham and spam directories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm neuraltest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H /path/to/ham \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S /path/to/spam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test specific neural rule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm neuraltest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H /path/to/ham \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S /path/to/spam \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --rule NEURAL_SPAM</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="options-3">Options<a href="#options-3" class="hash-link" aria-label="Direct link to Options" title="Direct link to Options" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-c, --config &lt;cfg&gt;          Config file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H, --hamdir &lt;dir&gt;          Ham directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-S, --spamdir &lt;dir&gt;         Spam directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-t, --timeout &lt;sec&gt;         Timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-n, --conns &lt;N&gt;            Parallel connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c, --connect &lt;host&gt;        Rspamd host</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-r, --rspamc &lt;path&gt;         rspamc path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--rule &lt;rule&gt;               Specific neural rule to test</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-cases-2">Use Cases<a href="#use-cases-2" class="hash-link" aria-label="Direct link to Use Cases" title="Direct link to Use Cases" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Test neural network after training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm neuraltest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H /data/ham-2024 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S /data/spam-2024 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --rule NEURAL_SPAM_SHORT</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="clickhouse-neural_profile">clickhouse neural_profile<a href="#clickhouse-neural_profile" class="hash-link" aria-label="Direct link to clickhouse neural_profile" title="Direct link to clickhouse neural_profile" translate="no">​</a></h2>
<p>Generate symbol profiles for neural network training.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="purpose-4">Purpose<a href="#purpose-4" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose" translate="no">​</a></h3>
<p>Analyze Clickhouse data to create optimal symbol sets for neural networks.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-scenarios-4">Common Scenarios<a href="#common-scenarios-4" class="hash-link" aria-label="Direct link to Common Scenarios" title="Direct link to Common Scenarios" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="generate-profile">Generate Profile<a href="#generate-profile" class="hash-link" aria-label="Direct link to Generate Profile" title="Direct link to Generate Profile" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Generate 7-day profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm clickhouse neural_profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Custom time period</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm clickhouse neural_profile --days 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Limit results per day</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm clickhouse neural_profile --days 7 --limit 10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># JSON output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm clickhouse neural_profile --days 7 -j</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="filter-by-settings-id">Filter by Settings ID<a href="#filter-by-settings-id" class="hash-link" aria-label="Direct link to Filter by Settings ID" title="Direct link to Filter by Settings ID" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Profile for specific settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm clickhouse neural_profile \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --settings-id inbound \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --days 14</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="custom-sql-conditions">Custom SQL Conditions<a href="#custom-sql-conditions" class="hash-link" aria-label="Direct link to Custom SQL Conditions" title="Direct link to Custom SQL Conditions" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Add WHERE clause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm clickhouse neural_profile \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -w &quot;Score &gt; 10&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --days 7</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="options-4">Options<a href="#options-4" class="hash-link" aria-label="Direct link to Options" title="Direct link to Options" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-h, --help                  Show help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c, --config &lt;cfg&gt;         Config file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d, --database &lt;db&gt;        Clickhouse database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-s, --server &lt;addr&gt;        Clickhouse server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-u, --user &lt;user&gt;          Username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p, --password &lt;pw&gt;        Password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-a, --ask-password         Ask password interactively</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--use-https                Use HTTPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--use-gzip                 Use Gzip compression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--no-ssl-verify            Disable SSL verification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">neural_profile options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-w, --where &lt;clause&gt;       SQL WHERE clause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-j, --json                 JSON output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--days &lt;N&gt;                 Days to analyze (default: 7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--limit &lt;N&gt;               Max rows per day</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--settings-id &lt;id&gt;        Settings ID filter</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-cases-3">Use Cases<a href="#use-cases-3" class="hash-link" aria-label="Direct link to Use Cases" title="Direct link to Use Cases" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Monthly neural network optimization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate fresh profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm clickhouse neural_profile \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --days 30 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -j &gt; neural-profile.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Analyze results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jq &#x27;.symbols | length&#x27; neural-profile.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Generated profile with $(jq &#x27;.symbols | length&#x27; neural-profile.json) symbols&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Apply to neural configuration (manual step)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="practical-examples">Practical Examples<a href="#practical-examples" class="hash-link" aria-label="Direct link to Practical Examples" title="Direct link to Practical Examples" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="complete-backup-and-migration-workflow">Complete Backup and Migration Workflow<a href="#complete-backup-and-migration-workflow" class="hash-link" aria-label="Direct link to Complete Backup and Migration Workflow" title="Direct link to Complete Backup and Migration Workflow" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Backup SQLite, migrate to Redis, verify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SOURCE=&quot;/var/lib/rspamd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BACKUP=&quot;/var/backups/rspamd/$(date +%Y%m%d)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REDIS=&quot;localhost:6379&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p &quot;$BACKUP&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 1. Dump current statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Backing up current statistics...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statistics_dump dump | gzip &gt; &quot;$BACKUP/statistics.dump.gz&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. Backup SQLite files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Backing up SQLite databases...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp &quot;$SOURCE&quot;/*.sqlite &quot;$BACKUP/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. Test Bayes classifier before migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Testing classifier performance...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm classifiertest -H /data/ham -S /data/spam &gt; &quot;$BACKUP/pre-migration-test.txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. Migrate to Redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Migrating to Redis...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop rspamd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm statconvert \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --spam-db &quot;$SOURCE/bayes.spam.sqlite&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ham-db &quot;$SOURCE/bayes.ham.sqlite&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cache &quot;$SOURCE/learn_cache.sqlite&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h &quot;$REDIS&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --expire 7776000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 5. Update config for Redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; /etc/rspamd/local.d/classifier-bayes.conf &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend = &quot;redis&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">servers = &quot;$REDIS&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start rspamd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sleep 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 6. Test after migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Testing after migration...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm classifiertest -H /data/ham -S /data/spam -n &gt; &quot;$BACKUP/post-migration-test.txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 7. Compare results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;=== Results ===&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Before migration:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grep &quot;Accuracy:&quot; &quot;$BACKUP/pre-migration-test.txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;After migration:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grep &quot;Accuracy:&quot; &quot;$BACKUP/post-migration-test.txt&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="automated-classifier-performance-monitoring">Automated Classifier Performance Monitoring<a href="#automated-classifier-performance-monitoring" class="hash-link" aria-label="Direct link to Automated Classifier Performance Monitoring" title="Direct link to Automated Classifier Performance Monitoring" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Weekly classifier performance check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CORPUS_HAM=&quot;/data/corpus/ham&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CORPUS_SPAM=&quot;/data/corpus/spam&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REPORT_DIR=&quot;/var/log/rspamd/classifier-reports&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEEK=$(date +%Y-W%V)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p &quot;$REPORT_DIR&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Testing classifier for week $WEEK...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rspamadm classifiertest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;$CORPUS_HAM&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S &quot;$CORPUS_SPAM&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; &quot;$REPORT_DIR/classifier-$WEEK.txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Extract metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ACCURACY=$(grep &quot;Accuracy:&quot; &quot;$REPORT_DIR/classifier-$WEEK.txt&quot; | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  awk &#x27;{print $2}&#x27; | tr -d &#x27;%&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FP_RATE=$(grep &quot;False Positives:&quot; &quot;$REPORT_DIR/classifier-$WEEK.txt&quot; | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  awk &#x27;{print $4}&#x27; | tr -d &#x27;%&#x27; | tr -d &#x27;()&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Alert if performance degrades</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (( $(echo &quot;$ACCURACY &lt; 95&quot; | bc -l) )); then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;WARNING: Classifier accuracy dropped to $ACCURACY%&quot; | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mail -s &quot;Rspamd Classifier Alert&quot; admin@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (( $(echo &quot;$FP_RATE &gt; 5&quot; | bc -l) )); then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;WARNING: False positive rate increased to $FP_RATE%&quot; | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mail -s &quot;Rspamd False Positive Alert&quot; admin@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="tips-and-best-practices">Tips and Best Practices<a href="#tips-and-best-practices" class="hash-link" aria-label="Direct link to Tips and Best Practices" title="Direct link to Tips and Best Practices" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="statistics-management">Statistics Management<a href="#statistics-management" class="hash-link" aria-label="Direct link to Statistics Management" title="Direct link to Statistics Management" translate="no">​</a></h3>
<ol>
<li class=""><strong>Regular backups</strong> - Daily dumps of Bayes data</li>
<li class=""><strong>Test before migration</strong> - Verify classifier performance</li>
<li class=""><strong>Monitor after migration</strong> - Check accuracy didn&#x27;t degrade</li>
<li class=""><strong>Set expiration</strong> - Use <code>--expire</code> to prevent unbounded growth</li>
<li class=""><strong>Incremental backups</strong> - Keep multiple backup versions</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-testing">Performance Testing<a href="#performance-testing" class="hash-link" aria-label="Direct link to Performance Testing" title="Direct link to Performance Testing" translate="no">​</a></h3>
<ol>
<li class=""><strong>Representative corpus</strong> - Use real-world emails for testing</li>
<li class=""><strong>Large datasets</strong> - At least 1000 of each (spam/ham)</li>
<li class=""><strong>Recent data</strong> - Test with current spam tactics</li>
<li class=""><strong>Balanced corpus</strong> - Equal amounts of spam and ham</li>
<li class=""><strong>Regular testing</strong> - Monthly performance checks</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="neural-networks">Neural Networks<a href="#neural-networks" class="hash-link" aria-label="Direct link to Neural Networks" title="Direct link to Neural Networks" translate="no">​</a></h3>
<ol>
<li class=""><strong>Generate profiles regularly</strong> - Monthly or quarterly</li>
<li class=""><strong>Sufficient data</strong> - At least 30 days of Clickhouse data</li>
<li class=""><strong>Monitor training</strong> - Check neural network logs</li>
<li class=""><strong>Validate results</strong> - Test with neuraltest command</li>
<li class=""><strong>Incremental updates</strong> - Don&#x27;t retrain too frequently</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-documentation">Related Documentation<a href="#related-documentation" class="hash-link" aria-label="Direct link to Related Documentation" title="Direct link to Related Documentation" translate="no">​</a></h2>
<ul>
<li class=""><a class="" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/email-analysis">Email Analysis</a> - Extract statistical data from messages</li>
<li class=""><a class="" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/operations">Operations</a> - Control statistics operations</li>
<li class=""><a class="" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/configuration">Configuration</a> - Configure Bayes and neural modules</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/rspamd/docs.rspamd.com/edit/master/docs/administration/rspamadm/statistics-ml.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/cryptography"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cryptography &amp; Security</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs.rspamd.com/branches/docs/antivirus-update/administration/rspamadm/operations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Operations &amp; Monitoring</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#statistics_dump" class="table-of-contents__link toc-highlight">statistics_dump</a><ul><li><a href="#purpose" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#common-scenarios" class="table-of-contents__link toc-highlight">Common Scenarios</a></li><li><a href="#options" class="table-of-contents__link toc-highlight">Options</a></li><li><a href="#use-cases" class="table-of-contents__link toc-highlight">Use Cases</a></li></ul></li><li><a href="#statconvert" class="table-of-contents__link toc-highlight">statconvert</a><ul><li><a href="#purpose-1" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#common-scenarios-1" class="table-of-contents__link toc-highlight">Common Scenarios</a></li><li><a href="#options-1" class="table-of-contents__link toc-highlight">Options</a></li><li><a href="#complete-migration-example" class="table-of-contents__link toc-highlight">Complete Migration Example</a></li></ul></li><li><a href="#classifiertest" class="table-of-contents__link toc-highlight">classifiertest</a><ul><li><a href="#purpose-2" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#common-scenarios-2" class="table-of-contents__link toc-highlight">Common Scenarios</a></li><li><a href="#options-2" class="table-of-contents__link toc-highlight">Options</a></li><li><a href="#example-output" class="table-of-contents__link toc-highlight">Example Output</a></li><li><a href="#use-cases-1" class="table-of-contents__link toc-highlight">Use Cases</a></li></ul></li><li><a href="#neuraltest" class="table-of-contents__link toc-highlight">neuraltest</a><ul><li><a href="#purpose-3" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#common-scenarios-3" class="table-of-contents__link toc-highlight">Common Scenarios</a></li><li><a href="#options-3" class="table-of-contents__link toc-highlight">Options</a></li><li><a href="#use-cases-2" class="table-of-contents__link toc-highlight">Use Cases</a></li></ul></li><li><a href="#clickhouse-neural_profile" class="table-of-contents__link toc-highlight">clickhouse neural_profile</a><ul><li><a href="#purpose-4" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#common-scenarios-4" class="table-of-contents__link toc-highlight">Common Scenarios</a></li><li><a href="#options-4" class="table-of-contents__link toc-highlight">Options</a></li><li><a href="#use-cases-3" class="table-of-contents__link toc-highlight">Use Cases</a></li></ul></li><li><a href="#practical-examples" class="table-of-contents__link toc-highlight">Practical Examples</a><ul><li><a href="#complete-backup-and-migration-workflow" class="table-of-contents__link toc-highlight">Complete Backup and Migration Workflow</a></li><li><a href="#automated-classifier-performance-monitoring" class="table-of-contents__link toc-highlight">Automated Classifier Performance Monitoring</a></li></ul></li><li><a href="#tips-and-best-practices" class="table-of-contents__link toc-highlight">Tips and Best Practices</a><ul><li><a href="#statistics-management" class="table-of-contents__link toc-highlight">Statistics Management</a></li><li><a href="#performance-testing" class="table-of-contents__link toc-highlight">Performance Testing</a></li><li><a href="#neural-networks" class="table-of-contents__link toc-highlight">Neural Networks</a></li></ul></li><li><a href="#related-documentation" class="table-of-contents__link toc-highlight">Related Documentation</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/tutorials/quickstart">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/configuration">Configuration</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/modules">Modules</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/tutorials">Tutorials</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/downloads">Downloads</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/faq">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/support">Support</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/changelog">Changelog</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rspamd/rspamd" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/tutorials/site_contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/blog">Blog</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Subscribe</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/rss/changelog.xml">Changelog RSS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/blog/rss.xml">Blog RSS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/docs/antivirus-update/blog/atom.xml">Blog Atom</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Rspamd Project. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>