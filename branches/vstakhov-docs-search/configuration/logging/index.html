<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-configuration/logging" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Logging settings | Rspamd Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rspamd.com/docs.rspamd.com/branches/vstakhov-docs-search/configuration/logging"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ru"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Logging settings | Rspamd Documentation"><meta data-rh="true" name="description" content="{:.no_toc}"><meta data-rh="true" property="og:description" content="{:.no_toc}"><link data-rh="true" rel="icon" href="/docs.rspamd.com/branches/vstakhov-docs-search/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rspamd.com/docs.rspamd.com/branches/vstakhov-docs-search/configuration/logging"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/vstakhov-docs-search/configuration/logging" hreflang="en"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/vstakhov-docs-search/ru/configuration/logging" hreflang="ru"><link data-rh="true" rel="alternate" href="https://rspamd.com/docs.rspamd.com/branches/vstakhov-docs-search/configuration/logging" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Configuration","item":"https://rspamd.com/docs.rspamd.com/branches/vstakhov-docs-search/configuration/"},{"@type":"ListItem","position":2,"name":"Logging settings","item":"https://rspamd.com/docs.rspamd.com/branches/vstakhov-docs-search/configuration/logging"}]}</script><link rel="alternate" type="application/rss+xml" href="/docs.rspamd.com/branches/vstakhov-docs-search/blog/rss.xml" title="Rspamd Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs.rspamd.com/branches/vstakhov-docs-search/blog/atom.xml" title="Rspamd Documentation Atom Feed">




<script>window.SEARCH_BACKEND_CONFIG={endpoint:"/api"}</script><link rel="stylesheet" href="/docs.rspamd.com/branches/vstakhov-docs-search/assets/css/styles.121a41fd.css">
<script src="/docs.rspamd.com/branches/vstakhov-docs-search/assets/js/runtime~main.d53a0eba.js" defer="defer"></script>
<script src="/docs.rspamd.com/branches/vstakhov-docs-search/assets/js/main.64722b56.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/docs.rspamd.com/branches/vstakhov-docs-search/img/rspamd_logo_black.png"><link rel="preload" as="image" href="/docs.rspamd.com/branches/vstakhov-docs-search/img/rspamd_logo_navbar.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.rspamd.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs.rspamd.com/branches/vstakhov-docs-search/img/rspamd_logo_black.png" alt="Rspamd Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs.rspamd.com/branches/vstakhov-docs-search/img/rspamd_logo_navbar.png" alt="Rspamd Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/about/">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/tutorials/">Tutorials</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/modules/">Modules</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/other/usage_policy">Usage Policy</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/faq">FAQ</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/support">Support</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/downloads">Downloads</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/blog">Blog</a><a class="navbar__item navbar__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/changelog">Changelog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div><div class="elasticsearch-search-container"><form class="elasticsearch-search-form"><div class="elasticsearch-search-input-container"><input type="text" placeholder="Search documentation..." class="elasticsearch-search-input" aria-label="Search documentation" value=""><div class="elasticsearch-search-shortcut"><span>⌘K</span></div></div></form></div></div><div class="navbar__item"><div id="font-size-control-mount"></div></div><a href="https://github.com/rspamd/rspamd" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/">About Rspamd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/faq">Frequently asked questions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs.rspamd.com/branches/vstakhov-docs-search/about/">About</a><button aria-label="Expand sidebar category &#x27;About&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/support">Rspamd Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/downloads">Downloads</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/">Configuration</a><button aria-label="Collapse sidebar category &#x27;Configuration&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/settings">User settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/metrics">Actions and scores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/logging">Logging settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/options">Common options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/composites">Composite symbols</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/maps">Rspamd maps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/selectors">Selectors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/statistic">Statistics settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/redis">Redis configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/upstream">Upstreams configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/ucl">Universal configuration language (UCL)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs.rspamd.com/branches/vstakhov-docs-search/workers/">Workers</a><button aria-label="Expand sidebar category &#x27;Workers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs.rspamd.com/branches/vstakhov-docs-search/modules/">Modules</a><button aria-label="Expand sidebar category &#x27;Modules&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs.rspamd.com/branches/vstakhov-docs-search/lua/">Lua API</a><button aria-label="Expand sidebar category &#x27;Lua API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs.rspamd.com/branches/vstakhov-docs-search/tutorials/">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs.rspamd.com/branches/vstakhov-docs-search/developers/architecture">Developers</a><button aria-label="Expand sidebar category &#x27;Developers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs.rspamd.com/branches/vstakhov-docs-search/other/rspamadm">Other</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/blog">Blog</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/"><span>Configuration</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Logging settings</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rspamd logging settings</h1></header>
<p>{:.no_toc}</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Rspamd offers various logging options. Firstly, there are three supported types of log output: <code>console</code> logging, which outputs log messages to the console; <code>file</code> logging, which directs log messages to a file; and logging via the <code>syslog</code> daemon. Additionally, it is possible to limit logging to a specific level:</p>

































<table><thead><tr><th style="text-align:left">Level</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>error</code></td><td style="text-align:left">log only critical errors</td></tr><tr><td style="text-align:left"><code>warning</code></td><td style="text-align:left">log errors and warnings</td></tr><tr><td style="text-align:left"><code>notice</code></td><td style="text-align:left">log only important notices + scan messages results</td></tr><tr><td style="text-align:left"><code>info</code></td><td style="text-align:left">log all non-debug messages</td></tr><tr><td style="text-align:left"><code>silent</code></td><td style="text-align:left">log at <code>info</code> level on start and then reduce to <code>notice</code> level when forking worker processes</td></tr><tr><td style="text-align:left"><code>debug</code></td><td style="text-align:left">log all including debug messages (huge amount of logging)</td></tr></tbody></table>
<p>You have the option to enable debug messages for specific IP addresses, which can be beneficial for testing purposes. Each logging type has specific mandatory parameters: log facility for syslog (refer to the <code>syslog(3)</code> man page for facility details), and log file for file logging. File logging can also be buffered for improved performance. In order to reduce logging noise, Rspamd detects consecutive matching log messages and replaces them with the total number of repeated occurrences.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#81123(fuzzy): May 11 19:41:54 rspamd file_log_function: Last message repeated 155 times</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#81123(fuzzy): May 11 19:41:54 rspamd process_write_command: fuzzy hash was successfully added</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="unique-id">Unique ID<a href="#unique-id" class="hash-link" aria-label="Direct link to Unique ID" title="Direct link to Unique ID">​</a></h2>
<p>Starting from version 1.0, Rspamd logs include a unique ID for each logging message, enabling efficient search for relevant messages. Additionally, there is now a <code>module</code> definition that specifies the module associated with the log message, such as <code>task</code> or <code>cfg</code> modules. Here is a brief example to illustrate how it works: let&#x27;s consider an incoming task for a specific message. In the logs, you would observe something similar to the following entry:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2015-09-02 16:41:59 #45015(normal) &lt;ed2abb&gt;; task; accept_socket: accepted connection from ::1 port 52895</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2015-09-02 16:41:59 #45015(normal) &lt;ed2abb&gt;; task; rspamd_message_parse: loaded message; id: &lt;F66099EE-BCAB-4D4F-A4FC-7C15A6686397@FreeBSD.org&gt;; queue-id: &lt;undef&gt;</span><br></span></code></pre></div></div>
<p>In this case, the tag <code>ed2abb</code> is assigned to the task, and all subsequent processing related to that task will bear the same tag. This tagging feature is not limited to the <code>task</code> module alone; it is also enabled in other modules like <code>spf</code> or <code>lua</code>. For certain modules like <code>cfg</code>, the tag is generated statically using a specific characteristic, such as the checksum of the configuration file.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-parameters">Configuration parameters<a href="#configuration-parameters" class="hash-link" aria-label="Direct link to Configuration parameters" title="Direct link to Configuration parameters">​</a></h2>
<p>Here is a summary of the logging parameters, each of which can be redefined or defined in the <code>local.d/logging.inc</code> file:</p>





































































<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>type</code></td><td style="text-align:left">Defines logging type (file, console or syslog). For some types mandatory attributes may be required.</td></tr><tr><td style="text-align:left"><code>filename</code></td><td style="text-align:left">Path to log file for file logging (required for <strong>file</strong> type)</td></tr><tr><td style="text-align:left"><code>facility</code></td><td style="text-align:left">Logging facility for <strong>syslog</strong> type (required if this type is used)</td></tr><tr><td style="text-align:left"><code>level</code></td><td style="text-align:left">Defines logging level (error, warning, info or debug).</td></tr><tr><td style="text-align:left"><code>log_buffered</code></td><td style="text-align:left">Flag that controls whether logging is buffered.</td></tr><tr><td style="text-align:left"><code>log_buf_size</code></td><td style="text-align:left">For file and console logging defines buffer size that will be used for logging output.</td></tr><tr><td style="text-align:left"><code>log_urls</code></td><td style="text-align:left">Flag that defines whether all URLs in message should be logged. Useful for testing. Default: <code>false</code>.</td></tr><tr><td style="text-align:left"><code>log_re_cache</code></td><td style="text-align:left">Output regular expressions statistics after each message. Default: <code>true</code>.</td></tr><tr><td style="text-align:left"><code>debug_ip</code></td><td style="text-align:left">List that contains IP addresses for which debugging should be turned on.</td></tr><tr><td style="text-align:left"><code>color</code></td><td style="text-align:left">Turn on coloring for log messages. Default: <code>false</code>.</td></tr><tr><td style="text-align:left"><code>systemd</code></td><td style="text-align:left">If <code>true</code> timestamps aren&#x27;t prepended to log messages. Default: <code>false</code>.</td></tr><tr><td style="text-align:left"><code>debug_modules</code></td><td style="text-align:left">A list of modules that are enabled for debugging.</td></tr><tr><td style="text-align:left"><code>log_usec</code></td><td style="text-align:left">Log microseconds (e.g. <code>11:43:16.68071</code>). Default: <code>false</code>.</td></tr><tr><td style="text-align:left"><code>log_severity</code> (2.8+)</td><td style="text-align:left">Log severity explicitly (e.g. <code>[info]</code> or <code>[error]</code>). Default: <code>false</code>.</td></tr><tr><td style="text-align:left"><code>log_json</code> (3.8+)</td><td style="text-align:left">If <code>true</code> logs are emitted in JSON format (implies <code>log_severity=true</code> and <code>systemd=false</code>). Default: <code>false</code>.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="defined-debug-modules">Defined debug modules<a href="#defined-debug-modules" class="hash-link" aria-label="Direct link to Defined debug modules" title="Direct link to Defined debug modules">​</a></h3>
<p>Here is a list of C debug modules defined in Rspamd (this list is usually incomplete):</p>













































































<table><thead><tr><th style="text-align:left">Module</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>bayes</code></td><td style="text-align:left">messages from Bayes classifier</td></tr><tr><td style="text-align:left"><code>cfg</code></td><td style="text-align:left">configuration messages</td></tr><tr><td style="text-align:left"><code>composites</code></td><td style="text-align:left">debug composite symbols</td></tr><tr><td style="text-align:left"><code>dkim</code></td><td style="text-align:left">messages from dkim module</td></tr><tr><td style="text-align:left"><code>dns</code></td><td style="text-align:left">messages from DNS resolver</td></tr><tr><td style="text-align:left"><code>fuzzy_backend</code></td><td style="text-align:left">messages from fuzzy backend</td></tr><tr><td style="text-align:left"><code>langdet</code></td><td style="text-align:left">messages from language detector</td></tr><tr><td style="text-align:left"><code>logger</code></td><td style="text-align:left">messages from the logger itself</td></tr><tr><td style="text-align:left"><code>main</code></td><td style="text-align:left">messages from the main process</td></tr><tr><td style="text-align:left"><code>map</code></td><td style="text-align:left">messages from maps in Rspamd</td></tr><tr><td style="text-align:left"><code>milter</code></td><td style="text-align:left">debug milter interface</td></tr><tr><td style="text-align:left"><code>protocol</code></td><td style="text-align:left">debug protocol details</td></tr><tr><td style="text-align:left"><code>proxy</code></td><td style="text-align:left">messages from proxy</td></tr><tr><td style="text-align:left"><code>spf</code></td><td style="text-align:left">messages from spf module</td></tr><tr><td style="text-align:left"><code>stat_redis</code></td><td style="text-align:left">messages from redis statistics</td></tr><tr><td style="text-align:left"><code>symcache</code></td><td style="text-align:left">messages from symbols cache</td></tr><tr><td style="text-align:left"><code>task</code></td><td style="text-align:left">task messages</td></tr></tbody></table>
<p>Any Lua module can also be added to <code>debug_modules</code> as they are using somehow a similar naming semantics. E.g. you can use <code>dkim_signing</code> or <code>multimap</code> or <code>lua_tcp</code> to debug the corresponding modules.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="log-format">Log format<a href="#log-format" class="hash-link" aria-label="Direct link to Log format" title="Direct link to Log format">​</a></h2>
<p>Rspamd supports a custom log format for writing message information to the log. This feature has been supported since version 1.1. The format string for the custom log format is as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">log_format =&lt;&lt;EOD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id: &lt;$mid&gt;,$if_qid{ qid: &lt;$&gt;,}$if_ip{ ip: $,}$if_user{ user: $,}$if_smtp_from{ from: &lt;$&gt;,}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(default: $is_spam ($action): [$scores] [$symbols]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">len: $len, time: $time_real real,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$time_virtual virtual, dns req: $dns_req</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOD</span><br></span></code></pre></div></div>
<p>Newlines are replaced with spaces in the custom log format. The log format line can include both text and variables. Each variable can have an optional <code>if_</code> prefix, which will log the variable only if it is triggered. Additionally, each variable can have an optional body value where <code>$</code> is replaced with the variable&#x27;s value. The <code>$</code> placeholder can be repeated multiple times in the body. For example, <code>$if_var{$$$$}</code> will be replaced with the variable&#x27;s name repeated four times.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="log-variables">Log variables<a href="#log-variables" class="hash-link" aria-label="Direct link to Log variables" title="Direct link to Log variables">​</a></h3>
<p>Rspamd supports the following log variables:</p>

























































































































<table><thead><tr><th style="text-align:left">Variable</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>action</code></td><td style="text-align:left">default metric action</td></tr><tr><td style="text-align:left"><code>digest</code></td><td style="text-align:left">cryptographic digest of a message&#x27;s content (stripped to 16 bytes or 32 hex symbols)</td></tr><tr><td style="text-align:left"><code>dns_req</code></td><td style="text-align:left">number of DNS requests</td></tr><tr><td style="text-align:left"><code>filename</code> (from 1.8.0)</td><td style="text-align:left">name of file if HTTP agent (e.g. rspamc) passes it</td></tr><tr><td style="text-align:left"><code>forced_action</code> (from 1.8.2)</td><td style="text-align:left">forced action if form <code>&lt;action&gt; &quot;&lt;message&gt;&quot;; score=&lt;score&gt; (set by &lt;module&gt;)</code></td></tr><tr><td style="text-align:left"><code>groups</code> (from 2.0)</td><td style="text-align:left">symbols groups list for a task</td></tr><tr><td style="text-align:left"><code>ip</code></td><td style="text-align:left">from IP</td></tr><tr><td style="text-align:left"><code>is_spam</code></td><td style="text-align:left">a one-letter rating of spammyness: <code>T</code> for spam, <code>F</code> for ham and <code>S</code> for skipped messages</td></tr><tr><td style="text-align:left"><code>len</code></td><td style="text-align:left">length of message</td></tr><tr><td style="text-align:left"><code>lua</code></td><td style="text-align:left">custom Lua script (see below)</td></tr><tr><td style="text-align:left"><code>mid</code></td><td style="text-align:left">message ID</td></tr><tr><td style="text-align:left"><code>mime_from</code></td><td style="text-align:left">MIME from</td></tr><tr><td style="text-align:left"><code>mime_rcpt</code></td><td style="text-align:left">MIME rcpt - the first recipient</td></tr><tr><td style="text-align:left"><code>mime_rcpts</code></td><td style="text-align:left">MIME rcpts - all recipients</td></tr><tr><td style="text-align:left"><code>public_groups</code> (from 2.0)</td><td style="text-align:left">public groups only (similar to groups but more restricted)</td></tr><tr><td style="text-align:left"><code>qid</code></td><td style="text-align:left">queue ID</td></tr><tr><td style="text-align:left"><code>scores</code></td><td style="text-align:left">summary of scores</td></tr><tr><td style="text-align:left"><code>settings_id</code> (from 2.0)</td><td style="text-align:left">settings id for a message</td></tr><tr><td style="text-align:left"><code>smtp_from</code></td><td style="text-align:left">envelope from (or MIME from if SMTP from is absent)</td></tr><tr><td style="text-align:left"><code>smtp_rcpt</code></td><td style="text-align:left">envelope rcpt (or MIME from if SMTP from is absent) - the first recipient</td></tr><tr><td style="text-align:left"><code>smtp_rcpts</code></td><td style="text-align:left">envelope rcpts - all recipients</td></tr><tr><td style="text-align:left"><code>symbols_params</code></td><td style="text-align:left">list of all symbols and their options</td></tr><tr><td style="text-align:left"><code>symbols_scores_params</code></td><td style="text-align:left">list of all symbols, their scores and options</td></tr><tr><td style="text-align:left"><code>symbols_scores</code></td><td style="text-align:left">list of all symbols and their scores</td></tr><tr><td style="text-align:left"><code>symbols</code></td><td style="text-align:left">list of all symbols</td></tr><tr><td style="text-align:left"><code>time_real</code></td><td style="text-align:left">real time of task processing</td></tr><tr><td style="text-align:left"><code>time_virtual</code> (till 2.0)</td><td style="text-align:left">CPU time of task processing</td></tr><tr><td style="text-align:left"><code>user</code></td><td style="text-align:left">authenticated user</td></tr></tbody></table>
<p>Custom logging scripts could look like the following:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token function" style="color:#d73a49">lua</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:rgb(222, 71, 0)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(222, 71, 0)">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:rgb(222, 71, 0)">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text parts: &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">..</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tostring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">#</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">get_text_parts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:rgb(222, 71, 0)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>this script will log number of text part in messages.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rspamd/docs.rspamd.com/edit/master/docs/configuration/logging.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/metrics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Actions and scores</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration/options"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Common options</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#unique-id" class="table-of-contents__link toc-highlight">Unique ID</a></li><li><a href="#configuration-parameters" class="table-of-contents__link toc-highlight">Configuration parameters</a><ul><li><a href="#defined-debug-modules" class="table-of-contents__link toc-highlight">Defined debug modules</a></li></ul></li><li><a href="#log-format" class="table-of-contents__link toc-highlight">Log format</a><ul><li><a href="#log-variables" class="table-of-contents__link toc-highlight">Log variables</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/tutorials/quickstart">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/configuration">Configuration</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/modules">Modules</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/tutorials">Tutorials</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/downloads">Downloads</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/faq">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/support">Support</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/changelog">Changelog</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rspamd/rspamd" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/tutorials/site_contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/docs.rspamd.com/branches/vstakhov-docs-search/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Rspamd Project. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>